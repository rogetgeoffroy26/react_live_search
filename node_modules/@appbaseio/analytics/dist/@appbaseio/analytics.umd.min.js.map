{"version":3,"file":"analytics.umd.min.js","sources":["../../src/utils.js","../../node_modules/cross-fetch/dist/browser-ponyfill.js","../../src/validate.js","../../src/index.js"],"sourcesContent":["// Function to parse the URL\nexport function getURL(url: string): string {\n  return url && url.trim() !== '' ? url : 'https://scalr.api.appbase.io';\n}\n\nexport function btoa(input = '') {\n  const chars =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  const str = input;\n  let output = '';\n\n  // eslint-disable-next-line\n  for (\n    let block = 0, charCode, i = 0, map = chars;\n    str.charAt(i | 0) || ((map = '='), i % 1); // eslint-disable-line no-bitwise\n    output += map.charAt(63 & (block >> (8 - (i % 1) * 8))) // eslint-disable-line no-bitwise\n  ) {\n    charCode = str.charCodeAt((i += 3 / 4));\n\n    if (charCode > 0xff) {\n      throw new Error(\n        '\"btoa\" failed: The string to be encoded contains characters outside of the Latin1 range.'\n      );\n    }\n\n    block = (block << 8) | charCode; // eslint-disable-line no-bitwise\n  }\n\n  return output;\n}\n","var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n","export function validateIndex(index: string) {\n  if (!index) {\n    throw new Error(\n      'appbase-analytics: A valid index must be present to record analytics events.'\n    );\n  }\n}\n\nexport function validateCredentials(credentials: string) {\n  if (!credentials) {\n    throw new Error('appbase-analytics: Auth credentials is missing.');\n  }\n}\n\nexport function validateURL(url: string) {\n  if (!url) {\n    throw new Error('appbase-analytics: URL is missing.');\n  }\n}\n\nexport function validateSearchQuery(query: string) {\n  if (query === undefined || query === null) {\n    throw new Error(\n      'appbase-analytics: query must be present, set to empty string to register as an empty query search.'\n    );\n  }\n}\n\nexport function validateQuery(query: string, queryID: string) {\n  if ((query === undefined || query === null) && !queryID) {\n    throw new Error(\n      'appbase-analytics: query or queryID must be present to register a click/conversion event'\n    );\n  }\n}\n\nexport function validateClickObjects(objects: Object) {\n  if (!objects || Object.keys(objects).length < 1) {\n    throw new Error(\n      'appbase-analytics: at least one click object must be present to register a click event'\n    );\n  }\n}\n\nexport function validateConversionObjects(objects: Object) {\n  if (!objects || Object.keys(objects).length < 1) {\n    throw new Error(\n      'appbase-analytics: at least one click object must be present to register a click event'\n    );\n  }\n}\n","// @flow\nimport { btoa } from './utils';\nimport fetch from 'cross-fetch';\nimport {\n  validateIndex,\n  validateCredentials,\n  validateURL,\n  validateQuery,\n  validateClickObjects,\n  validateConversionObjects\n} from './validate';\n\ntype Hit = {\n  id?: string,\n  type?: string,\n  source?: Object\n};\n\ntype AnalyticsConfig = {\n  index: string,\n  url: string,\n  credentials: string,\n  userID?: string,\n  globalEventData?: { [key: string]: string },\n  headers?: Object\n};\n\ntype SearchConfig = {\n  query?: string,\n  queryID?: string,\n  eventData?: { [key: string]: string },\n  filters?: { [key: string]: string },\n  hits?: Array<Hit>\n};\n\ntype SearchRequestBody = {\n  query?: string,\n  query_id?: string,\n  event_data?: { [key: string]: string },\n  filters?: { [key: string]: string },\n  user_id?: string,\n  hits?: Array<Hit>\n};\n\ntype ClickConfig = {\n  query?: string,\n  queryID?: string,\n  isSuggestionClick?: boolean,\n  objects: { [key: string]: number },\n  eventData?: { [key: string]: string }\n};\n\ntype ClickRequestBody = {\n  click_on: { [key: string]: number },\n  click_type?: 'result' | 'suggestion',\n  query?: string,\n  query_id?: string,\n  event_data?: { [key: string]: string },\n  user_iD?: string\n};\n\ntype ConversionConfig = {\n  objects: Array<string>,\n  query?: string,\n  queryID?: string,\n  eventData?: { [key: string]: string }\n};\n\ntype ConversionRequestBody = {\n  conversion_on: Array<string>,\n  query?: string,\n  query_id?: string,\n  event_data?: { [key: string]: string },\n  user_iD?: string\n};\n\ntype CallBack = (err: any, res: any) => void;\n\ntype Metrics = {\n  index: string,\n  url: string,\n  credentials: string,\n  globalEventData?: { [key: string]: string },\n  userID?: string,\n  queryID: string,\n  headers?: Object,\n  search?: (searchConfig: SearchConfig, callback: CallBack) => void,\n  click?: (clickConfig: ClickConfig, callback: CallBack) => void,\n  conversion?: (conversionConfig: ConversionConfig, callback: CallBack) => void,\n  getQueryID?: () => string,\n  setUserID?: (userID: string) => void,\n  setGlobalEventData?: (events: { [key: string]: string }) => void,\n  setHeaders?: (headers: Object) => void,\n  _request?: (url: string, body: Object, callback?: CallBack) => void\n};\n\nfunction initClient(config: AnalyticsConfig = {}) {\n  const metrics: Metrics = {\n    credentials: config.credentials,\n    index: config.index,\n    url: config.url,\n    userID: config.userID,\n    globalEventData: config.globalEventData,\n    queryID: '',\n    headers: null\n  };\n\n  validateIndex(metrics.index);\n  validateCredentials(metrics.credentials);\n  validateURL(metrics.url);\n\n  metrics._request = (\n    url: string,\n    body?: Object,\n    callback?: CallBack\n  ): void => {\n    const finalBody = {\n      ...body,\n      user_id: metrics.userID,\n      event_data: { ...(body && body.event_data), ...metrics.globalEventData }\n    };\n    return fetch(`${metrics.url}/${metrics.index}/_analytics/${url}`, {\n      method: 'PUT',\n      headers: {\n        ...metrics.headers,\n        'Content-Type': 'application/json',\n        Authorization: `Basic ${btoa(metrics.credentials)}`\n      },\n      body: JSON.stringify(finalBody)\n    })\n      .then(response => {\n        if (callback) {\n          callback(null, response);\n        }\n      })\n      .catch(err => {\n        console.error(err);\n        if (callback) {\n          callback(err, null);\n        }\n      });\n  };\n\n  // To register a search\n  metrics.search = (searchConfig: SearchConfig, callback?: CallBack) => {\n    validateQuery(searchConfig.query, searchConfig.queryID);\n    const captureQueryID = (err: any, res: any) => {\n      if (res) {\n        res\n          .json()\n          .then(response => {\n            if (response && response.query_id) {\n              metrics.queryID = response.query_id;\n            }\n          })\n          .catch(error => {\n            console.error(error);\n          });\n      }\n      if (callback) {\n        callback(err, res);\n      }\n    };\n    // just to avoid the flow type error\n    if (metrics._request) {\n      const requestBody: SearchRequestBody = {\n        query: searchConfig.query,\n        query_id: searchConfig.queryID,\n        event_data: searchConfig.eventData,\n        filters: searchConfig.filters,\n        hits: searchConfig.hits\n      };\n      metrics._request('search', requestBody, captureQueryID);\n    }\n  };\n\n  // To register a click\n  metrics.click = (clickConfig: ClickConfig, callback?: CallBack) => {\n    validateQuery(clickConfig.query, clickConfig.queryID);\n    validateClickObjects(clickConfig.objects);\n    // just to avoid the flow type error\n    if (metrics._request) {\n      const requestBody: ClickRequestBody = {\n        click_on: clickConfig.objects,\n        click_type: clickConfig.isSuggestionClick ? 'suggestion' : 'result',\n        query: clickConfig.query,\n        query_id: clickConfig.queryID,\n        event_data: clickConfig.eventData\n      };\n      metrics._request('click', requestBody, callback);\n    }\n  };\n\n  // To register a conversion\n  metrics.conversion = (\n    conversionConfig: ConversionConfig,\n    callback?: CallBack\n  ) => {\n    validateQuery(conversionConfig.query, conversionConfig.queryID);\n    validateConversionObjects(conversionConfig.objects);\n    // just to avoid the flow type error\n    if (metrics._request) {\n      const requestBody: ConversionRequestBody = {\n        conversion_on: conversionConfig.objects,\n        query: conversionConfig.query,\n        query_id: conversionConfig.queryID,\n        event_data: conversionConfig.eventData\n      };\n      metrics._request('conversion', requestBody, callback);\n    }\n  };\n\n  // Sets the userID\n  metrics.setUserID = (userID: string) => {\n    metrics.userID = userID;\n  };\n\n  // Sets the global events\n  metrics.setGlobalEventData = (globalEvents: { [key: string]: string }) => {\n    metrics.globalEventData = globalEvents;\n  };\n\n  // Sets the headers\n  metrics.setHeaders = (headers: Object) => {\n    metrics.headers = headers;\n  };\n\n  return metrics;\n}\n\nexport default {\n  init: initClient\n};\n"],"names":["btoa","input","charCode","str","output","block","i","map","charAt","charCodeAt","Error","__self__","root","F","this","fetch","DOMException","prototype","self","exports","support","searchParams","iterable","Symbol","blob","Blob","e","formData","arrayBuffer","viewClasses","isArrayBufferView","ArrayBuffer","isView","obj","indexOf","Object","toString","call","normalizeName","name","String","test","TypeError","toLowerCase","normalizeValue","value","iteratorFor","items","iterator","next","shift","done","undefined","Headers","headers","forEach","append","Array","isArray","header","getOwnPropertyNames","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","error","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","bufferClone","buf","slice","view","Uint8Array","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","get","type","rejected","then","text","readAsText","chars","length","fromCharCode","join","readArrayBufferAsText","decode","json","JSON","parse","oldValue","has","hasOwnProperty","callback","thisArg","keys","push","values","entries","methods","Request","options","method","upcased","url","credentials","mode","signal","toUpperCase","referrer","form","trim","split","bytes","replace","decodeURIComponent","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","RangeError","location","err","message","stack","create","constructor","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","key","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","module","validateQuery","query","queryID","config","metrics","index","userID","globalEventData","validateIndex","validateCredentials","validateURL","_request","finalBody","user_id","event_data","Authorization","stringify","console","search","searchConfig","requestBody","query_id","eventData","filters","hits","res","click","clickConfig","objects","validateClickObjects","click_on","click_type","isSuggestionClick","conversion","conversionConfig","validateConversionObjects","conversion_on","setUserID","setGlobalEventData","globalEvents","setHeaders"],"mappings":"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"}