{"version":3,"file":"searchbase.umd.js","sources":["../../../../node_modules/cross-fetch/dist/browser-ponyfill.js","../../node_modules/@appbaseio/analytics/dist/@appbaseio/analytics.es.js","../../src/utils.js","../../src/Results.js","../../src/observable.js","../../src/CompositeAggregationResults.js","../../src/index.js"],"sourcesContent":["var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n","import fetch from 'cross-fetch';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n// Function to parse the URL\nfunction btoa(input) {\n  if (input === void 0) {\n    input = '';\n  }\n\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  var str = input;\n  var output = ''; // eslint-disable-next-line\n\n  for (var block = 0, charCode, i = 0, map = chars; str.charAt(i | 0) || (map = '=', i % 1); // eslint-disable-line no-bitwise\n  output += map.charAt(63 & block >> 8 - i % 1 * 8) // eslint-disable-line no-bitwise\n  ) {\n    charCode = str.charCodeAt(i += 3 / 4);\n\n    if (charCode > 0xff) {\n      throw new Error('\"btoa\" failed: The string to be encoded contains characters outside of the Latin1 range.');\n    }\n\n    block = block << 8 | charCode; // eslint-disable-line no-bitwise\n  }\n\n  return output;\n}\n\nfunction validateIndex(index) {\n  if (!index) {\n    throw new Error('appbase-analytics: A valid index must be present to record analytics events.');\n  }\n}\nfunction validateCredentials(credentials) {\n  if (!credentials) {\n    throw new Error('appbase-analytics: Auth credentials is missing.');\n  }\n}\nfunction validateURL(url) {\n  if (!url) {\n    throw new Error('appbase-analytics: URL is missing.');\n  }\n}\nfunction validateQuery(query, queryID) {\n  if ((query === undefined || query === null) && !queryID) {\n    throw new Error('appbase-analytics: query or queryID must be present to register a click/conversion event');\n  }\n}\nfunction validateClickObjects(objects) {\n  if (!objects || Object.keys(objects).length < 1) {\n    throw new Error('appbase-analytics: at least one click object must be present to register a click event');\n  }\n}\nfunction validateConversionObjects(objects) {\n  if (!objects || Object.keys(objects).length < 1) {\n    throw new Error('appbase-analytics: at least one click object must be present to register a click event');\n  }\n}\n\nfunction initClient(config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var metrics = {\n    credentials: config.credentials,\n    index: config.index,\n    url: config.url,\n    userID: config.userID,\n    globalEventData: config.globalEventData,\n    queryID: '',\n    headers: null\n  };\n  validateIndex(metrics.index);\n  validateCredentials(metrics.credentials);\n  validateURL(metrics.url);\n\n  metrics._request = function (url, body, callback) {\n    var finalBody = _extends({}, body, {\n      user_id: metrics.userID,\n      event_data: _extends({}, body && body.event_data, {}, metrics.globalEventData)\n    });\n\n    return fetch(metrics.url + \"/\" + metrics.index + \"/_analytics/\" + url, {\n      method: 'PUT',\n      headers: _extends({}, metrics.headers, {\n        'Content-Type': 'application/json',\n        Authorization: \"Basic \" + btoa(metrics.credentials)\n      }),\n      body: JSON.stringify(finalBody)\n    }).then(function (response) {\n      if (callback) {\n        callback(null, response);\n      }\n    })[\"catch\"](function (err) {\n      console.error(err);\n\n      if (callback) {\n        callback(err, null);\n      }\n    });\n  }; // To register a search\n\n\n  metrics.search = function (searchConfig, callback) {\n    validateQuery(searchConfig.query, searchConfig.queryID);\n\n    var captureQueryID = function captureQueryID(err, res) {\n      if (res) {\n        res.json().then(function (response) {\n          if (response && response.query_id) {\n            metrics.queryID = response.query_id;\n          }\n        })[\"catch\"](function (error) {\n          console.error(error);\n        });\n      }\n\n      if (callback) {\n        callback(err, res);\n      }\n    }; // just to avoid the flow type error\n\n\n    if (metrics._request) {\n      var requestBody = {\n        query: searchConfig.query,\n        query_id: searchConfig.queryID,\n        event_data: searchConfig.eventData,\n        filters: searchConfig.filters,\n        hits: searchConfig.hits\n      };\n\n      metrics._request('search', requestBody, captureQueryID);\n    }\n  }; // To register a click\n\n\n  metrics.click = function (clickConfig, callback) {\n    validateQuery(clickConfig.query, clickConfig.queryID);\n    validateClickObjects(clickConfig.objects); // just to avoid the flow type error\n\n    if (metrics._request) {\n      var requestBody = {\n        click_on: clickConfig.objects,\n        click_type: clickConfig.isSuggestionClick ? 'suggestion' : 'result',\n        query: clickConfig.query,\n        query_id: clickConfig.queryID,\n        event_data: clickConfig.eventData\n      };\n\n      metrics._request('click', requestBody, callback);\n    }\n  }; // To register a conversion\n\n\n  metrics.conversion = function (conversionConfig, callback) {\n    validateQuery(conversionConfig.query, conversionConfig.queryID);\n    validateConversionObjects(conversionConfig.objects); // just to avoid the flow type error\n\n    if (metrics._request) {\n      var requestBody = {\n        conversion_on: conversionConfig.objects,\n        query: conversionConfig.query,\n        query_id: conversionConfig.queryID,\n        event_data: conversionConfig.eventData\n      };\n\n      metrics._request('conversion', requestBody, callback);\n    }\n  }; // Sets the userID\n\n\n  metrics.setUserID = function (userID) {\n    metrics.userID = userID;\n  }; // Sets the global events\n\n\n  metrics.setGlobalEventData = function (globalEvents) {\n    metrics.globalEventData = globalEvents;\n  }; // Sets the headers\n\n\n  metrics.setHeaders = function (headers) {\n    metrics.headers = headers;\n  };\n\n  return metrics;\n}\n\nvar index = {\n  init: initClient\n};\n\nexport default index;\n","// @flow\n\nexport const highlightResults = (result: Object): Object => {\n  const data = { ...result };\n  if (data.highlight) {\n    Object.keys(data.highlight).forEach(highlightItem => {\n      const highlightValue = data.highlight[highlightItem][0];\n      data._source = { ...data._source, [highlightItem]: highlightValue };\n    });\n  }\n  return data;\n};\n\nexport const parseHits = (hits: Array<Object>): Array<Object> => {\n  let results: Array<Object> = [];\n  if (hits) {\n    results = [...hits].map(item => {\n      const streamProps = {};\n\n      if (item._updated) {\n        streamProps._updated = item._updated;\n      } else if (item._deleted) {\n        streamProps._deleted = item._deleted;\n      }\n\n      const data = highlightResults(item);\n      const result = Object.keys(data)\n        .filter(key => key !== '_source')\n        .reduce(\n          (obj: { [key: string]: any }, key: string) => {\n            // eslint-disable-next-line\n            obj[key] = data[key];\n            return obj;\n          },\n          {\n            ...data._source,\n            ...streamProps\n          }\n        );\n      return result;\n    });\n  }\n  return results;\n};\n\n// flattens a nested array\nexport const flatten = (arr: Array<any>) =>\n  arr.reduce(\n    (flat, toFlatten): Array<any> =>\n      flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten),\n    []\n  );\n\n// helper function to extract suggestions\nexport const extractSuggestion = (val: any) => {\n  if (typeof val === 'object') {\n    if (Array.isArray(val)) {\n      return flatten(val);\n    }\n    return null;\n  }\n  return val;\n};\n\nexport const getSuggestions = (\n  fields: Array<string> = [],\n  suggestions: Array<Object>,\n  currentValue: string = ''\n) => {\n  let suggestionsList = [];\n  let labelsList = [];\n\n  const populateSuggestionsList = (val, parsedSource, source) => {\n    // check if the suggestion includes the current value\n    // and not already included in other suggestions\n    const isWordMatch = currentValue\n      .trim()\n      .split(' ')\n      .some(term =>\n        String(val)\n          .toLowerCase()\n          .includes(term)\n      );\n    if ((isWordMatch && !labelsList.includes(val)) || source._promoted) {\n      const defaultOption = {\n        label: val,\n        value: val,\n        source\n      };\n\n      labelsList = [...labelsList, val];\n      suggestionsList = [...suggestionsList, defaultOption];\n    }\n  };\n\n  const parseField = (parsedSource, field = '', source = parsedSource) => {\n    if (typeof parsedSource === 'object') {\n      const fieldNodes = field.split('.');\n      const label = parsedSource[fieldNodes[0]];\n      if (label) {\n        if (fieldNodes.length > 1) {\n          // nested fields of the 'foo.bar.zoo' variety\n          const children = field.substring(fieldNodes[0].length + 1);\n          if (Array.isArray(label)) {\n            label.forEach(arrayItem => {\n              parseField(arrayItem, children, source);\n            });\n          } else {\n            parseField(label, children, source);\n          }\n        } else {\n          const val = extractSuggestion(label);\n          if (val) {\n            if (Array.isArray(val)) {\n              val.forEach(suggestion =>\n                populateSuggestionsList(suggestion, parsedSource, source)\n              );\n            } else {\n              populateSuggestionsList(val, parsedSource, source);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  suggestions.forEach(item => {\n    const { _score, _index, _type, _id } = item;\n\n    const source = {\n      ...item,\n      _id,\n      _index,\n      _score,\n      _type\n    };\n    fields.forEach(field => {\n      parseField(source, field);\n    });\n  });\n\n  return suggestionsList;\n};\n\nexport function parseCompAggToHits(\n  aggFieldName: string,\n  buckets?: Array<Object> = []\n): Array<Object> {\n  return buckets.map(bucket => {\n    // eslint-disable-next-line camelcase\n    const { doc_count, key, [aggFieldName]: hitsData } = bucket;\n    return {\n      _doc_count: doc_count,\n      _key: key[aggFieldName],\n      ...hitsData.hits.hits[0]\n    };\n  });\n}\n","// @flow\n\nimport { parseHits } from './utils';\n\nclass Results {\n  // An array of results obtained from the applied query.\n  data: Array<Object>;\n\n  // Raw response returned by ES query\n  raw: Object;\n\n  // Results parser\n  parseResults: (\n    results: Array<Object>,\n    sourceData?: Array<Object>\n  ) => Array<Object>;\n\n  constructor(data: Array<Object>) {\n    this.data = data || [];\n  }\n\n  // Total number of results found\n  get numberOfResults() {\n    // calculate from raw response\n    if (this.raw && this.raw.hits) {\n      return typeof this.raw.hits.total === 'object'\n        ? this.raw.hits.total.value\n        : this.raw.hits.total;\n    }\n    return 0;\n  }\n\n  // Total time taken by request (in ms)\n  get time() {\n    // calculate from raw response\n    if (this.raw) {\n      return this.raw.took;\n    }\n    return 0;\n  }\n\n  // no of hidden results found\n  get hidden() {\n    if (this.raw && this.raw.hits) {\n      return this.raw.hits.hidden || 0;\n    }\n    return 0;\n  }\n\n  // no of promoted results found\n  get promoted() {\n    if (this.raw && this.raw.promoted) {\n      return this.raw.promoted.length;\n    }\n    return 0;\n  }\n\n  // An array of promoted results obtained from the applied query.\n  get promotedData() {\n    if (this.raw && this.raw.promoted) {\n      return this.raw.promoted || [];\n    }\n    return [];\n  }\n\n  // An object of raw response as-is from elasticsearch query\n  get rawData() {\n    return this.raw || {};\n  }\n\n  // object of custom data applied through queryRules\n  // only works when `enableAppbase=true`\n  get customData() {\n    if (this.raw && this.raw.customData) {\n      return this.raw.customData || {};\n    }\n    return {};\n  }\n\n  setRaw = (rawResponse: Object) => {\n    // set response\n    this.raw = rawResponse;\n    if (rawResponse.hits && rawResponse.hits.hits) {\n      this.setData(rawResponse.hits.hits);\n    }\n  };\n\n  // Method to set data explicitly\n  setData(data: Object) {\n    // parse hits\n    let filteredResults = parseHits(data);\n    // filter results & remove duplicates if any\n    if (this.promotedData.length) {\n      const ids = this.promotedData.map(item => item._id).filter(Boolean);\n      if (ids) {\n        filteredResults = filteredResults.filter(\n          item => !ids.includes(item._id)\n        );\n      }\n\n      filteredResults = [\n        ...this.promotedData.map(dataItem => ({\n          ...dataItem,\n          _promoted: true\n        })),\n        ...filteredResults\n      ];\n    }\n\n    // set data\n    if (this.parseResults) {\n      this.data = this.parseResults(filteredResults, data);\n    } else {\n      this.data = filteredResults;\n    }\n  }\n}\n\nexport default Results;\n","// @flow\n\nimport type { Observer } from './types';\n\nexport default class Observable {\n  observers: Array<Observer>;\n\n  constructor() {\n    this.observers = [];\n  }\n\n  subscribe(fn: Function, propertiesToSubscribe?: string | Array<string>) {\n    this.observers.push({\n      callback: fn,\n      properties: propertiesToSubscribe\n    });\n  }\n\n  unsubscribe(fn: Function) {\n    if (fn) {\n      this.observers = this.observers.filter(item => {\n        if (item.callback !== fn) {\n          return item;\n        }\n        return null;\n      });\n    } else {\n      this.observers = [];\n    }\n  }\n\n  next(o: any, property: string, thisObj: any) {\n    var scope = thisObj || window;\n    this.observers.forEach(item => {\n      // filter by subscribed properties\n      if (item.properties === undefined) {\n        item.callback.call(scope, o);\n      } else if (\n        item.properties instanceof Array &&\n        item.properties.length &&\n        item.properties.includes(property)\n      ) {\n        item.callback.call(scope, o);\n      } else if (\n        typeof item.properties === 'string' &&\n        item.properties &&\n        item.properties === property\n      ) {\n        item.callback.call(scope, o);\n      }\n    });\n  }\n}\n","// @flow\n\nimport { parseCompAggToHits } from './utils';\n\nclass CompositeAggregationResults {\n  // An array of composite aggregations obtained from the applied aggs in options.\n  data: Array<Object>;\n\n  // useful when loading data of greater size\n  afterKey: Object;\n\n  // Raw aggregations returned by ES query\n  raw: Object;\n\n  constructor(data?: Array<Object>) {\n    this.data = data || [];\n  }\n\n  // An object of raw response as-is from elasticsearch query\n  get rawData() {\n    return this.raw || {};\n  }\n\n  setRaw(rawResponse: Object) {\n    // set response\n    this.raw = rawResponse;\n    if (rawResponse.after_key) this.setAfterKey(rawResponse.after_key);\n  }\n\n  setAfterKey(key: Object) {\n    this.afterKey = key;\n  }\n\n  // Method to set data explicitly\n  setData(aggField: string, data: Object) {\n    // parse aggregation buckets\n    this.data = parseCompAggToHits(aggField, data);\n  }\n}\n\nexport default CompositeAggregationResults;\n","// @flow\n\nimport fetch from 'cross-fetch';\nimport AppbaseAnalytics from '@appbaseio/analytics';\nimport Results from './Results';\nimport Observable from './observable';\nimport { getSuggestions } from './utils';\nimport type {\n  AppbaseConfig,\n  AppbaseSettings,\n  DataField,\n  MicStatusField,\n  Options,\n  QueryFormat,\n  RequestStatus,\n  SortOption,\n  Suggestion,\n  Option,\n  SearchBaseConfig\n} from './types';\nimport CompositeAggregationResults from './CompositeAggregationResults';\n\n// mic constants\nconst MIC_STATUS = {\n  inactive: 'INACTIVE',\n  active: 'ACTIVE',\n  denied: 'DENIED'\n};\n\nconst REQUEST_STATUS = {\n  inactive: 'INACTIVE',\n  pending: 'PENDING',\n  error: 'ERROR'\n};\n\nconst defaultOptions: Options = {\n  triggerQuery: true,\n  triggerSuggestionsQuery: false,\n  stateChanges: true\n};\n\nconst defaultOption = {\n  stateChanges: true\n};\n\nclass Searchbase {\n  static defaultQuery: (\n    value: string,\n    options: {\n      dataField: string | Array<string | DataField>,\n      searchOperators?: boolean,\n      queryFormat?: QueryFormat,\n      fuzziness?: string | number,\n      nestedField?: string\n    }\n  ) => Object;\n\n  static shouldQuery: (\n    value: string,\n    dataFields: Array<string | DataField>,\n    options?: {\n      searchOperators?: boolean,\n      queryFormat?: QueryFormat,\n      fuzziness?: string | number\n    }\n  ) => Object;\n\n  static highlightQuery: (\n    highlight: boolean,\n    highlightFields: string | Array<string>,\n    dataFields: string | Array<string | DataField>\n  ) => Object;\n\n  static compositeAggsQuery: (aggregationField: string, size: number) => Object;\n\n  static generateQueryOptions: (options: {\n    size?: number,\n    from?: number,\n    aggregationField?: string,\n    includeFields?: Array<string>,\n    excludeFields?: Array<string>,\n    sortOptions?: Array<SortOption>,\n    sortBy?: string,\n    sortByField?: string\n  }) => Object;\n\n  // es index name\n  index: string;\n\n  // es url\n  url: string;\n\n  // use rs v3 api\n  enableAppbase: boolean;\n\n  // get query suggestions from `.suggestions` index\n  enableQuerySuggestions: boolean;\n\n  // auth credentials if any\n  credentials: string;\n\n  // to enable the recording of analytics\n  appbaseConfig: AppbaseConfig;\n\n  // input value i.e query term\n  value: string;\n\n  // custom headers object\n  headers: Object;\n\n  // suggestions\n  suggestions: Results;\n\n  // query suggestions\n  querySuggestions: Results;\n\n  // composite aggregations\n  aggregationData: CompositeAggregationResults;\n\n  // suggestions query error\n  suggestionsError: any;\n\n  // results\n  results: Results;\n\n  // results query error\n  error: any;\n\n  // state changes subject\n  stateChanges: Observable;\n\n  // request status\n  requestStatus: RequestStatus;\n\n  // suggestions request status\n  suggestionsRequestStatus: RequestStatus;\n\n  // following are the es query options\n\n  nestedField: string;\n\n  queryFormat: QueryFormat;\n\n  searchOperators: boolean;\n\n  size: number;\n\n  from: number;\n\n  fuzziness: string | number;\n\n  sortBy: string;\n\n  sortByField: string;\n\n  dataField: string | Array<string | DataField>;\n\n  aggregationField: string;\n\n  includeFields: Array<string>;\n\n  excludeFields: Array<string>;\n\n  sortOptions: Array<SortOption>;\n\n  highlight: boolean;\n\n  highlightField: string | Array<string>;\n\n  /* ------------- change events -------------------------------- */\n\n  // called when value changes\n  onValueChange: (next: string, prev: string) => void;\n\n  // called when results change\n  onResults: (next: string, prev: string) => void;\n\n  // called when suggestions change\n  onSuggestions: (next: string, prev: string) => void;\n\n  // called when query suggestions change\n  onQuerySuggestions: (next: string, prev: string) => void;\n\n  // called when composite aggregations change\n  onAggregationData: (next: Array<Object>, prev: Array<Object>) => void;\n\n  // called when there is an error while fetching results\n  onError: (error: any) => void;\n\n  // called when there is an error while fetching suggestions\n  onSuggestionsError: (error: any) => void;\n\n  // called when request status changes\n  onRequestStatusChange: (next: string, prev: string) => void;\n\n  // called when suggestions request status changes\n  onSuggestionsRequestStatusChange: (next: string, prev: string) => void;\n\n  // called when query changes\n  onQueryChange: (next: string, prev: string) => void;\n\n  // called when suggestions query changes\n  onSuggestionsQueryChange: (next: string, prev: string) => void;\n\n  // called when mic status changes\n  onMicStatusChange: (next: string, prev: string) => void;\n\n  /* ---- callbacks to create the side effects while querying ----- */\n\n  transformQuery: (query: Object) => Promise<Object>;\n\n  transformSuggestionsQuery: (query: Object) => Promise<Object>;\n\n  transformRequest: (requestOptions: Object) => Promise<Object>;\n\n  transformResponse: (response: any) => Promise<any>;\n\n  beforeValueChange: (value: string) => Promise<any>;\n\n  /* ------ Private properties only for the internal use ----------- */\n\n  // counterpart of the query\n  _query: Object;\n\n  // counterpart of the suggestions query\n  _suggestionsQuery: Object;\n\n  _queryOptions: Object;\n\n  // mic status\n  _micStatus: MicStatusField;\n\n  // mic instance\n  _micInstance: any;\n\n  // analytics instance\n  _analyticsInstance: Object;\n\n  // query search ID\n  _queryId: string;\n\n  constructor({\n    index,\n    url,\n    enableAppbase,\n    enableQuerySuggestions,\n    credentials,\n    appbaseConfig,\n    headers,\n    value,\n    suggestions,\n    querySuggestions,\n    results,\n    fuzziness,\n    searchOperators,\n    queryFormat,\n    size,\n    from,\n    dataField,\n    aggregationField,\n    includeFields,\n    excludeFields,\n    transformQuery,\n    transformSuggestionsQuery,\n    transformRequest,\n    transformResponse,\n    beforeValueChange,\n    sortBy,\n    nestedField,\n    sortOptions,\n    sortByField,\n    highlight,\n    highlightField\n  }: SearchBaseConfig) {\n    if (!index) {\n      throw new Error('Please provide a valid index.');\n    }\n    if (!url) {\n      throw new Error('Please provide a valid url.');\n    }\n    if (!(enableAppbase || dataField)) {\n      throw new Error('Please provide a valid data field.');\n    }\n    this.index = index;\n    this.url = url;\n    this.enableAppbase = enableAppbase || false;\n    this.enableQuerySuggestions = enableQuerySuggestions || false;\n    this.appbaseConfig = appbaseConfig;\n    this._analyticsInstance = AppbaseAnalytics.init({\n      index,\n      url,\n      credentials\n    });\n    this.dataField = dataField;\n    this.aggregationField = aggregationField;\n    this.credentials = credentials || '';\n    this.nestedField = nestedField;\n    this.queryFormat = queryFormat || 'or';\n    this.fuzziness = fuzziness || 0;\n    this.searchOperators = searchOperators || false;\n    this.size = Number(size) || 10;\n    this.from = Number(from) || 0;\n    this.sortBy = sortBy;\n    this.includeFields = includeFields || ['*'];\n    this.excludeFields = excludeFields || [];\n    this.sortOptions = sortOptions || null;\n    this.sortByField = sortByField;\n    this.highlight = highlight;\n    this.highlightField = highlightField;\n\n    this.requestStatus = REQUEST_STATUS.inactive;\n    this.suggestionsRequestStatus = REQUEST_STATUS.inactive;\n\n    this.transformRequest = transformRequest || null;\n    this.transformResponse = transformResponse || null;\n    this.transformQuery = transformQuery || null;\n    this.transformSuggestionsQuery = transformSuggestionsQuery || null;\n    this.beforeValueChange = beforeValueChange || null;\n\n    // Initialize the state changes observable\n    this.stateChanges = new Observable();\n\n    // Initialize the results\n    this.suggestions = new Results(suggestions);\n    // Add suggestions parser\n    this.suggestions.parseResults = this._parseSuggestions;\n\n    // Initialize query suggestions\n    this.querySuggestions = new Results(querySuggestions);\n    // Add suggestions parser\n    this.querySuggestions.parseResults = this._parseQuerySuggestions;\n\n    this.results = new Results(results);\n\n    // composite aggs instance\n    this.aggregationData = new CompositeAggregationResults();\n\n    // Initialize headers\n    this.headers = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    };\n    if (this.credentials) {\n      this.headers = {\n        ...this.headers,\n        Authorization: `Basic ${btoa(this.credentials)}`\n      };\n    }\n    if (headers) {\n      this.setHeaders(headers, {\n        stateChanges: false\n      });\n    }\n\n    if (value) {\n      this.setValue(value, {\n        stateChanges: true\n      });\n    } else {\n      this.value = '';\n    }\n  }\n\n  // getters\n  get micStatus() {\n    return this._micStatus;\n  }\n\n  get micInstance() {\n    return this._micInstance;\n  }\n\n  get micActive() {\n    return this._micStatus === MIC_STATUS.active;\n  }\n\n  get micInactive() {\n    return this._micStatus === MIC_STATUS.inactive;\n  }\n\n  get micDenied() {\n    return this._micStatus === MIC_STATUS.denied;\n  }\n\n  get query() {\n    return this._query;\n  }\n\n  get suggestionsQuery() {\n    return this._suggestionsQuery;\n  }\n\n  get requestPending() {\n    return this.requestStatus === REQUEST_STATUS.pending;\n  }\n\n  get suggestionsRequestPending() {\n    return this.suggestionsRequestStatus === REQUEST_STATUS.pending;\n  }\n\n  // Method to subscribe the state changes\n  subscribeToStateChanges(\n    fn: Function,\n    propertiesToSubscribe?: string | Array<string>\n  ) {\n    this.stateChanges.subscribe(fn, propertiesToSubscribe);\n  }\n\n  // Method to unsubscribe the state changes\n  unsubscribeToStateChanges(fn?: Function) {\n    this.stateChanges.unsubscribe(fn);\n  }\n\n  // Method to set the custom headers\n  setHeaders(headers: Object, options?: Options = defaultOptions): void {\n    const prev = this.headers;\n    this.headers = {\n      ...this.headers,\n      ...headers\n    };\n    this._applyOptions(options, 'headers', prev, this.headers);\n  }\n\n  // Method to set the size option\n  setSize(size: number, options?: Options = defaultOptions): void {\n    const prev = this.size;\n    this.size = size;\n    this._applyOptions(options, 'size', prev, this.size);\n  }\n\n  // Method to set the from option\n  setFrom(from: number, options?: Options = defaultOptions): void {\n    const prev = this.from;\n    this.from = from;\n    this._applyOptions(options, 'from', prev, this.from);\n  }\n\n  // Method to set the fuzziness option\n  setFuzziness(\n    fuzziness: number | string,\n    options?: Options = defaultOptions\n  ): void {\n    const prev = this.fuzziness;\n    this.fuzziness = fuzziness;\n    this._applyOptions(options, 'fuzziness', prev, this.fuzziness);\n  }\n\n  // Method to set the includeFields option\n  setIncludeFields(\n    includeFields: Array<string>,\n    options?: Options = defaultOptions\n  ): void {\n    const prev = this.includeFields;\n    this.includeFields = includeFields;\n    this._applyOptions(options, 'includeFields', prev, includeFields);\n  }\n\n  // Method to set the excludeFields option\n  setExcludeFields(\n    excludeFields: Array<string>,\n    options?: Options = defaultOptions\n  ): void {\n    const prev = this.excludeFields;\n    this.excludeFields = excludeFields;\n    this._applyOptions(options, 'excludeFields', prev, excludeFields);\n  }\n\n  // Method to set the sortBy option\n  setSortBy(sortBy: string, options?: Options = defaultOptions): void {\n    const prev = this.sortBy;\n    this.sortBy = sortBy;\n    this._applyOptions(options, 'sortBy', prev, sortBy);\n  }\n\n  // Method to set the sortByField option\n  setSortByField(\n    sortByField: string,\n    options?: Options = defaultOptions\n  ): void {\n    const prev = this.sortByField;\n    this.sortByField = sortByField;\n    this._applyOptions(options, 'sortByField', prev, sortByField);\n  }\n\n  // Method to set the nestedField option\n  setNestedField(\n    nestedField: string,\n    options?: Options = defaultOptions\n  ): void {\n    const prev = this.nestedField;\n    this.nestedField = nestedField;\n    this._applyOptions(options, 'nestedField', prev, nestedField);\n  }\n\n  // Method to set the dataField option\n  setDataField(\n    dataField: string | Array<string | DataField>,\n    options?: Options = defaultOptions\n  ): void {\n    const prev = this.dataField;\n    this.dataField = dataField;\n    this._applyOptions(options, 'dataField', prev, dataField);\n  }\n\n  // Method to set the custom results\n  setResults(results: Array<Object>, options?: Option = defaultOption): void {\n    if (results) {\n      const prev = this.results;\n      this.results = new Results(results);\n      this._applyOptions(\n        {\n          stateChanges: options.stateChanges\n        },\n        'results',\n        prev,\n        this.results\n      );\n    }\n  }\n\n  // Method to set the custom suggestions\n  setSuggestions(\n    suggestions: Array<Suggestion>,\n    options?: Option = defaultOption\n  ): void {\n    if (suggestions) {\n      const prev = this.suggestions;\n      this.suggestions = new Results(suggestions);\n      this.suggestions.parseResults = this._parseSuggestions;\n      this._applyOptions(\n        {\n          stateChanges: options.stateChanges\n        },\n        'suggestions',\n        prev,\n        this.suggestions\n      );\n    }\n  }\n\n  // Method to set the value\n  setValue(value: string, options?: Options = defaultOptions): void {\n    const performUpdate = () => {\n      const prev = this.value;\n      this.value = value;\n      this._applyOptions(options, 'value', prev, this.value);\n    };\n    if (this.beforeValueChange) {\n      this.beforeValueChange(value)\n        .then(performUpdate)\n        .catch(e => {\n          console.warn('beforeValueChange rejected the promise with ', e);\n        });\n    } else {\n      performUpdate();\n    }\n  }\n\n  // mic event\n  onMicClick = (micOptions: Object = {}, options: Options = defaultOptions) => {\n    const prevStatus = this._micStatus;\n    if (typeof window !== 'undefined') {\n      window.SpeechRecognition =\n        window.webkitSpeechRecognition || window.SpeechRecognition || null;\n    }\n    if (\n      window &&\n      window.SpeechRecognition &&\n      prevStatus !== MIC_STATUS.denied\n    ) {\n      if (prevStatus === MIC_STATUS.active) {\n        this._setMicStatus(MIC_STATUS.inactive, options);\n      }\n      const { SpeechRecognition } = window;\n      if (this._micInstance) {\n        this._stopMic();\n        return;\n      }\n      this._micInstance = new SpeechRecognition();\n      this._micInstance.continuous = true;\n      this._micInstance.interimResults = true;\n      Object.assign(this._micInstance, micOptions);\n      this._micInstance.start();\n      this._micInstance.onstart = () => {\n        this._setMicStatus(MIC_STATUS.active, options);\n      };\n      this._micInstance.onresult = ({ results }) => {\n        if (results && results[0] && results[0].isFinal) {\n          this._stopMic();\n        }\n        this._handleVoiceResults({ results }, options);\n      };\n      this._micInstance.onerror = e => {\n        if (e.error === 'no-speech' || e.error === 'audio-capture') {\n          this._setMicStatus(MIC_STATUS.inactive, options);\n        } else if (e.error === 'not-allowed') {\n          this._setMicStatus(MIC_STATUS.denied, options);\n        }\n        console.error(e);\n      };\n    }\n  };\n\n  // Method to execute the query\n  triggerQuery(options?: Option = defaultOption): Promise<any> {\n    const handleError = err => {\n      this._setError(err, {\n        stateChanges: options.stateChanges\n      });\n      console.error(err);\n      return Promise.reject(err);\n    };\n    try {\n      this._updateQuery();\n      this._setRequestStatus(REQUEST_STATUS.pending);\n      const transformQuery = this.transformQuery\n        ? this.transformQuery(this.query)\n        : new Promise(res => res(this.query));\n      return transformQuery\n        .then(finalQuery => {\n          this._fetchRequest(finalQuery)\n            .then(results => {\n              this._setRequestStatus(REQUEST_STATUS.inactive);\n              const prev = this.results;\n              let rawResults = results;\n              if (this.enableAppbase) rawResults = results.SearchResult;\n              this.results.setRaw(rawResults);\n              this._applyOptions(\n                {\n                  stateChanges: options.stateChanges\n                },\n                'results',\n                prev,\n                this.results\n              );\n              return Promise.resolve(rawResults);\n            })\n            .catch(handleError);\n        })\n        .catch(handleError);\n    } catch (err) {\n      return handleError(err);\n    }\n  }\n\n  // Method to execute the suggestions query\n  triggerSuggestionsQuery(options?: Option = defaultOption): Promise<any> {\n    const handleError = err => {\n      this._setSuggestionsError(err, {\n        stateChanges: options.stateChanges\n      });\n      console.error(err);\n      return Promise.reject(err);\n    };\n\n    try {\n      this._updateSuggestionsQuery();\n      this._setSuggestionsRequestStatus(REQUEST_STATUS.pending);\n      const transformSuggestionsQuery = this.transformSuggestionsQuery\n        ? this.transformSuggestionsQuery(this.suggestionsQuery)\n        : new Promise(res => res(this.suggestionsQuery));\n      return transformSuggestionsQuery\n        .then(finalQuery => {\n          this._fetchRequest(finalQuery)\n            .then(suggestions => {\n              let rawSuggestions = suggestions;\n              if (this.enableAppbase) rawSuggestions = suggestions.DataSearch;\n              if (this.enableAppbase && this.enableQuerySuggestions) {\n                this._fetchRequest(this.getSuggestionsQuery(), true)\n                  .then(rawQuerySuggestions => {\n                    this._setSuggestionsRequestStatus(REQUEST_STATUS.inactive);\n                    this._handleQuerySuggestionsResponse(\n                      rawQuerySuggestions,\n                      options\n                    );\n                  })\n                  .catch(handleError);\n              } else this._setSuggestionsRequestStatus(REQUEST_STATUS.inactive);\n              if (rawSuggestions.aggregations) {\n                this._handleCompositeAggsResponse(\n                  this.aggregationField,\n                  rawSuggestions.aggregations,\n                  options\n                );\n              }\n              const prev = this.suggestions;\n              this.suggestions.setRaw(rawSuggestions);\n              this._applyOptions(\n                {\n                  stateChanges: options.stateChanges\n                },\n                'suggestions',\n                prev,\n                this.suggestions\n              );\n              return Promise.resolve(rawSuggestions);\n            })\n            .catch(handleError);\n        })\n        .catch(handleError);\n    } catch (err) {\n      return handleError(err);\n    }\n  }\n\n  getSuggestionsQuery() {\n    return {\n      query: [\n        {\n          id: 'DataSearch__suggestions',\n          dataField: ['key', 'key.autosuggest', 'key.search'],\n          searchOperators: this.searchOperators,\n          size: 5,\n          value: this.value,\n          defaultQuery: {\n            sort: [\n              {\n                count: {\n                  order: 'desc'\n                }\n              }\n            ]\n          }\n        }\n      ]\n    };\n  }\n\n  /*\n   methods to record analytics\n  */\n\n  // use this methods to record a search click event\n  recordClick = (objects: Object, isSuggestionClick: boolean = false): void => {\n    if (this._analyticsInstance && this._queryId) {\n      this._analyticsInstance.click({\n        queryID: this._queryId,\n        objects,\n        isSuggestionClick\n      });\n    }\n  };\n\n  // use this methods to record a search conversion\n  recordConversions = (objects: Array<string>) => {\n    if (this._analyticsInstance && this._queryId) {\n      this._analyticsInstance.conversion({\n        queryID: this._queryId,\n        objects\n      });\n    }\n  };\n\n  /* -------- Private methods only for the internal use -------- */\n  // mic\n  _handleVoiceResults = (\n    { results }: Object,\n    options?: Options = defaultOptions\n  ) => {\n    if (\n      results &&\n      results[0] &&\n      results[0].isFinal &&\n      results[0][0] &&\n      results[0][0].transcript &&\n      results[0][0].transcript.trim()\n    ) {\n      this.setValue(results[0][0].transcript.trim(), options);\n    }\n  };\n\n  _stopMic = () => {\n    if (this._micInstance) {\n      this._micInstance.stop();\n      this._micInstance = null;\n      this._setMicStatus(MIC_STATUS.inactive);\n    }\n  };\n\n  _setMicStatus = (\n    status: MicStatusField,\n    options: Options = defaultOptions\n  ) => {\n    const prevStatus = this._micStatus;\n    this._micStatus = status;\n    this._applyOptions(options, 'micStatus', prevStatus, this._micStatus);\n  };\n\n  _handleCompositeAggsResponse(\n    aggregationField: string,\n    aggsResponse: Object,\n    options?: Options = defaultOptions\n  ) {\n    const prev = this.aggregationData;\n    this.aggregationData.setRaw(aggsResponse[aggregationField]);\n    this.aggregationData.setData(\n      aggregationField,\n      aggsResponse[aggregationField].buckets\n    );\n    this._applyOptions(\n      { stateChanges: options.stateChanges },\n      'aggregations',\n      prev,\n      this.aggregationData\n    );\n  }\n\n  _handleTransformResponse(res: any): Promise<any> {\n    if (\n      this.transformResponse &&\n      typeof this.transformResponse === 'function'\n    ) {\n      return this.transformResponse(res);\n    }\n    return new Promise(resolve => resolve(res));\n  }\n\n  _handleTransformRequest(requestOptions: any): Promise<any> {\n    if (this.transformRequest && typeof this.transformRequest === 'function') {\n      return this.transformRequest(requestOptions);\n    }\n    return new Promise(resolve => resolve(requestOptions));\n  }\n\n  _handleQuerySuggestionsResponse(\n    rawQuerySuggestions: Object,\n    options: Option\n  ) {\n    const prev = this.querySuggestions;\n    const querySuggestions =\n      rawQuerySuggestions && rawQuerySuggestions.DataSearch__suggestions;\n    this.querySuggestions.setRaw(querySuggestions);\n    this._applyOptions(\n      {\n        stateChanges: options.stateChanges\n      },\n      'querySuggestions',\n      prev,\n      this.querySuggestions\n    );\n  }\n\n  _fetchRequest(\n    requestBody: Object,\n    isQuerySuggestionsAPI: boolean = false\n  ): Promise<*> {\n    const requestOptions = {\n      method: 'POST',\n      body: JSON.stringify(requestBody),\n      headers: {\n        ...this.headers\n      }\n    };\n\n    return new Promise((resolve, reject) => {\n      this._handleTransformRequest(requestOptions)\n        .then(finalRequestOptions => {\n          // set timestamp in request\n          const timestamp = Date.now();\n\n          let suffix = '_search';\n          if (this.enableAppbase) suffix = '_reactivesearch.v3';\n          const index = isQuerySuggestionsAPI ? '.suggestions' : this.index;\n          return fetch(`${this.url}/${index}/${suffix}`, finalRequestOptions)\n            .then(res => {\n              const responseHeaders = res.headers;\n\n              // set search id\n              if (res.headers) {\n                this._queryId = res.headers.get('X-Search-Id') || null;\n              }\n\n              if (res.status >= 500) {\n                return reject(res);\n              }\n              if (res.status >= 400) {\n                return reject(res);\n              }\n              return res.json().then(data => {\n                this._handleTransformResponse(data)\n                  .then(transformedData => {\n                    if (\n                      transformedData &&\n                      Object.prototype.hasOwnProperty.call(\n                        transformedData,\n                        'error'\n                      )\n                    ) {\n                      reject(transformedData);\n                    }\n                    const response = {\n                      ...transformedData,\n                      _timestamp: timestamp,\n                      _headers: responseHeaders\n                    };\n                    return resolve(response);\n                  })\n                  .catch(e => {\n                    console.warn(\n                      'transformResponse rejected the promise with ',\n                      e\n                    );\n                    return reject(e);\n                  });\n              });\n            })\n            .catch(e => reject(e));\n        })\n        .catch(e => {\n          console.warn('transformRequest rejected the promise with ', e);\n          return reject(e);\n        });\n    });\n  }\n\n  _setSuggestionsError(\n    suggestionsError: any,\n    options?: Options = defaultOptions\n  ) {\n    this._setSuggestionsRequestStatus(REQUEST_STATUS.error);\n    const prev = this.suggestionsError;\n    this.suggestionsError = suggestionsError;\n    this._applyOptions(\n      options,\n      'suggestionsError',\n      prev,\n      this.suggestionsError\n    );\n  }\n\n  _setError(error: any, options?: Options = defaultOptions) {\n    this._setRequestStatus(REQUEST_STATUS.error);\n    const prev = this.error;\n    this.error = error;\n    this._applyOptions(options, 'error', prev, this.error);\n  }\n\n  _setRequestStatus(requestStatus: RequestStatus) {\n    const prev = this.requestStatus;\n    this.requestStatus = requestStatus;\n    this._applyOptions(\n      {\n        stateChanges: true\n      },\n      'requestStatus',\n      prev,\n      this.requestStatus\n    );\n  }\n\n  _setSuggestionsRequestStatus(suggestionsRequestStatus: RequestStatus) {\n    const prev = this.suggestionsRequestStatus;\n    this.suggestionsRequestStatus = suggestionsRequestStatus;\n    this._applyOptions(\n      {\n        stateChanges: true\n      },\n      'suggestionsRequestStatus',\n      prev,\n      this.suggestionsRequestStatus\n    );\n  }\n\n  // Method to set the default query value\n  _updateQuery(query?: Object, queryOptions?: Object): void {\n    let prevQuery;\n    if (this.enableAppbase) {\n      prevQuery = { ...this._query };\n      this._query = {\n        query: [\n          { ...this.getAppbaseSuggestionsQuery(), execute: false },\n          this.getAppbaseResultQuery()\n        ],\n        settings: this.getAppbaseSettings()\n      };\n    } else prevQuery = this.getPreviousQuery(query, queryOptions);\n    this._applyOptions(\n      {\n        stateChanges: false\n      },\n      'query',\n      prevQuery,\n      this._query\n    );\n  }\n\n  getAppbaseSettings(): AppbaseSettings {\n    const {\n      recordAnalytics,\n      customEvents,\n      enableQueryRules,\n      userId\n    } = this.appbaseConfig;\n    return { recordAnalytics, customEvents, enableQueryRules, userId };\n  }\n\n  getAppbaseResultQuery(): {|\n    dataField: Array<string>,\n    excludeFields: Array<string>,\n    from: number,\n    id: string,\n    includeFields: Array<string>,\n    react: {| and: string |},\n    size: number,\n    sortBy: string\n  |} {\n    return {\n      id: 'SearchResult',\n      dataField: this.getDataFields(),\n      from: this.from,\n      size: this.size,\n      sortBy: this.sortBy,\n      includeFields: this.includeFields,\n      excludeFields: this.excludeFields,\n      react: { and: 'DataSearch' }\n    };\n  }\n\n  getPreviousQuery(query?: Object, queryOptions?: Object) {\n    // Set default query here\n    const finalQueryOptions = Searchbase.generateQueryOptions({\n      excludeFields: this.excludeFields,\n      includeFields: this.includeFields,\n      size: this.size,\n      from: this.from,\n      sortBy: this.sortBy,\n      sortByField: this.sortByField,\n      sortOptions: this.sortOptions\n    });\n    /**\n     * First priority goes to the custom query set by user otherwise execute the default query\n     * If none of the two exists execute the match_all\n     */\n    const finalQuery = query ||\n      Searchbase.defaultQuery(this.value, {\n        dataField: this.dataField,\n        searchOperators: this.searchOperators,\n        queryFormat: this.queryFormat,\n        fuzziness: this.fuzziness,\n        nestedField: this.nestedField\n      }) || {\n        match_all: {}\n      };\n    const prevQuery = this._query;\n    this._query = {\n      query: finalQuery,\n      ...Searchbase.highlightQuery(\n        this.highlight,\n        this.highlightField,\n        this.dataField\n      ),\n      ...finalQueryOptions,\n      // Overrides the default options by the user defined options\n      ...queryOptions\n    };\n    return prevQuery;\n  }\n\n  _updateSuggestionsQuery(query?: Object, queryOptions?: Object): void {\n    let prevQuery;\n    if (this.enableAppbase) {\n      prevQuery = { ...this._suggestionsQuery };\n      this._suggestionsQuery = {\n        query: [this.getAppbaseSuggestionsQuery()],\n        settings: this.getAppbaseSettings()\n      };\n    } else prevQuery = this.getPreviousSuggestionsQuery(query, queryOptions);\n    this._applyOptions(\n      {\n        stateChanges: false\n      },\n      'suggestionsQuery',\n      prevQuery,\n      this._suggestionsQuery\n    );\n  }\n\n  getAppbaseSuggestionsQuery(): {|\n    aggregationField: string,\n    dataField: Array<string>,\n    excludeFields: Array<string>,\n    from: number,\n    fuzziness: number | string,\n    highlight: boolean,\n    highlightField: string | Array<string>,\n    id: string,\n    includeFields: Array<string>,\n    nestedField: string,\n    queryFormat: any,\n    searchOperators: boolean,\n    size: number,\n    sortBy: string,\n    value: string\n  |} {\n    return {\n      id: 'DataSearch',\n      dataField: this.getDataFields(),\n      value: this.value,\n      queryFormat: this.queryFormat,\n      nestedField: this.nestedField,\n      from: this.from,\n      size: this.size,\n      sortBy: this.sortBy,\n      aggregationField: this.aggregationField,\n      includeFields: this.includeFields,\n      excludeFields: this.excludeFields,\n      fuzziness: this.fuzziness,\n      searchOperators: this.searchOperators,\n      highlight: this.highlight,\n      highlightField: this.highlightField\n    };\n  }\n\n  getPreviousSuggestionsQuery(query?: Object, queryOptions?: Object) {\n    // Set default suggestions query here\n    const finalQueryOptions = Searchbase.generateQueryOptions({\n      aggregationField: this.aggregationField,\n      size: this.size\n    });\n    /**\n     * First priority goes to the custom query set by user otherwise execute the default query\n     * If none of the two exists execute the match_all\n     */\n    const finalQuery = query ||\n      Searchbase.defaultQuery(this.value, {\n        dataField: this.dataField,\n        searchOperators: this.searchOperators,\n        queryFormat: this.queryFormat,\n        fuzziness: this.fuzziness,\n        nestedField: this.nestedField\n      }) || {\n        match_all: {}\n      };\n    const prevQuery = { ...this._suggestionsQuery };\n    this._suggestionsQuery = {\n      query: finalQuery,\n      ...Searchbase.highlightQuery(\n        this.highlight,\n        this.highlightField,\n        this.dataField\n      ),\n      ...finalQueryOptions,\n      // Overrides the default options by the user defined options\n      ...queryOptions\n    };\n    return prevQuery;\n  }\n\n  _parseSuggestions = (\n    suggestions: Array<Object>,\n    sourceSuggestions?: Array<Object>\n  ): Array<Object> => {\n    let fields = this.getDataFields();\n    if (\n      fields.length === 0 &&\n      sourceSuggestions &&\n      Array.isArray(sourceSuggestions) &&\n      sourceSuggestions.length > 0 &&\n      sourceSuggestions[0] &&\n      sourceSuggestions[0]._source\n    ) {\n      // Extract fields from _source\n      fields = Object.keys(sourceSuggestions[0]._source);\n    }\n    return getSuggestions(fields, suggestions, this.value).slice(0, this.size);\n  };\n\n  _parseQuerySuggestions = (suggestions: Array<Object>): Array<Object> => {\n    const fields = ['key', 'key.autosuggest', 'key.search'];\n    return getSuggestions(fields, suggestions, this.value);\n  };\n\n  getDataFields(): Array<string> {\n    let fields: Array<string> = [];\n    if (this.dataField === 'string') {\n      fields = [this.dataField];\n    } else if (Array.isArray(this.dataField)) {\n      this.dataField.forEach((dataField: string | DataField) => {\n        if (typeof dataField === 'object') {\n          fields.push(dataField.field);\n        } else {\n          fields.push(dataField);\n        }\n      });\n    }\n    return fields;\n  }\n\n  // Method to apply the changed based on set options\n  _applyOptions(\n    options: Options,\n    key: string,\n    prevValue: any,\n    nextValue: any\n  ): void {\n    // Trigger mic events\n    if (key === 'micStatus' && this.onMicStatusChange) {\n      this.onMicStatusChange(nextValue, prevValue);\n    }\n    // Trigger events\n    if (key === 'query' && this.onQueryChange) {\n      this.onQueryChange(nextValue, prevValue);\n    }\n    if (key === 'suggestionsQuery' && this.onSuggestionsQueryChange) {\n      this.onSuggestionsQueryChange(nextValue, prevValue);\n    }\n    if (key === 'value' && this.onValueChange) {\n      this.onValueChange(nextValue, prevValue);\n    }\n    if (key === 'error' && this.onError) {\n      this.onError(nextValue);\n    }\n    if (key === 'suggestionsError' && this.onSuggestionsError) {\n      this.onSuggestionsError(nextValue);\n    }\n    if (key === 'results' && this.onResults) {\n      this.onResults(nextValue, prevValue);\n    }\n    if (key === 'suggestions' && this.onSuggestions) {\n      this.onSuggestions(nextValue, prevValue);\n    }\n    if (key === 'querySuggestions' && this.onQuerySuggestions) {\n      this.onQuerySuggestions(nextValue, prevValue);\n    }\n    if (key === 'aggregations' && this.onAggregationData) {\n      this.onAggregationData(nextValue, prevValue);\n    }\n    if (key === 'requestStatus' && this.onRequestStatusChange) {\n      this.onRequestStatusChange(nextValue, prevValue);\n    }\n    if (\n      key === 'suggestionsRequestStatus' &&\n      this.onSuggestionsRequestStatusChange\n    ) {\n      this.onSuggestionsRequestStatusChange(nextValue, prevValue);\n    }\n    if (options.triggerQuery) {\n      this.triggerQuery();\n    }\n    if (options.triggerSuggestionsQuery) {\n      this.triggerSuggestionsQuery();\n    }\n    if (options.stateChanges !== false) {\n      this.stateChanges.next(\n        {\n          [key]: {\n            prev: prevValue,\n            next: nextValue\n          }\n        },\n        key\n      );\n    }\n  }\n}\n\n/* ------------------ Static methods ------------------------------ */\n\n// function to generate the default query DSL\nSearchbase.defaultQuery = (value, options) => {\n  let finalQuery = null;\n  let fields;\n\n  if (value) {\n    if (Array.isArray(options.dataField)) {\n      fields = options.dataField;\n    } else {\n      fields = [options.dataField];\n    }\n\n    if (options.searchOperators) {\n      finalQuery = {\n        simple_query_string: Searchbase.shouldQuery(value, fields, options)\n      };\n    } else {\n      finalQuery = {\n        bool: {\n          should: Searchbase.shouldQuery(value, fields, options),\n          minimum_should_match: '1'\n        }\n      };\n    }\n  }\n\n  if (value === '') {\n    finalQuery = null;\n  }\n\n  if (finalQuery && options.nestedField) {\n    finalQuery = {\n      nested: {\n        path: options.nestedField,\n        query: finalQuery\n      }\n    };\n  }\n\n  return finalQuery;\n};\n\n// helper function of default query\nSearchbase.shouldQuery = (\n  value,\n  dataFields,\n  options = {\n    searchOperators: false,\n    queryFormat: 'or',\n    fuzziness: 0\n  }\n) => {\n  const fields = dataFields.map((dataField: string | DataField) => {\n    if (typeof dataField === 'object') {\n      return `${dataField.field}${\n        dataField.weight ? `^${dataField.weight}` : ''\n      }`;\n    }\n    return dataField;\n  });\n\n  if (options.searchOperators) {\n    return {\n      query: value,\n      fields,\n      default_operator: options.queryFormat\n    };\n  }\n\n  if (options.queryFormat === 'and') {\n    return [\n      {\n        multi_match: {\n          query: value,\n          fields,\n          type: 'cross_fields',\n          operator: 'and'\n        }\n      },\n      {\n        multi_match: {\n          query: value,\n          fields,\n          type: 'phrase',\n          operator: 'and'\n        }\n      }\n    ];\n  }\n\n  return [\n    {\n      multi_match: {\n        query: value,\n        fields,\n        type: 'best_fields',\n        operator: 'or',\n        fuzziness: options.fuzziness\n      }\n    },\n    {\n      multi_match: {\n        query: value,\n        fields,\n        type: 'phrase',\n        operator: 'or'\n      }\n    }\n  ];\n};\n\n// helper function to generate highlight query\nSearchbase.highlightQuery = (highlight, highlightFields, dataFields) => {\n  if (!highlight) return null;\n  const fields = {};\n  const highlightField = highlightFields || dataFields;\n  const flatHighlightedFields =\n    typeof highlightFields === 'string' ? [highlightFields] : highlightFields;\n\n  if (typeof highlightField === 'string') {\n    fields[highlightField] = {};\n  } else if (Array.isArray(highlightField)) {\n    highlightField.forEach(item => {\n      if (typeof item === 'object') fields[item.field] = {};\n      else fields[item] = {};\n    });\n  }\n\n  return {\n    highlight: {\n      pre_tags: ['<mark>'],\n      post_tags: ['</mark>'],\n      fields,\n      ...(flatHighlightedFields && { require_field_match: false })\n    }\n  };\n};\n\n// helper function to generate composite aggregations query\nSearchbase.compositeAggsQuery = (aggregationField, size) => ({\n  aggs: {\n    [aggregationField]: {\n      composite: {\n        sources: [\n          {\n            [aggregationField]: {\n              terms: {\n                field: aggregationField\n              }\n            }\n          }\n        ],\n        size\n      },\n      aggs: {\n        [aggregationField]: {\n          top_hits: { size: 1 }\n        }\n      }\n    }\n  }\n});\n\n// function to generate the query DSL options\nSearchbase.generateQueryOptions = options => {\n  const finalOptions = {};\n  if (options.size !== undefined) {\n    finalOptions.size = options.size;\n  }\n  if (options.from !== undefined) {\n    finalOptions.from = options.from;\n  }\n  if (options.includeFields || options.excludeFields) {\n    const source = {};\n    if (options.includeFields) {\n      source.includes = options.includeFields;\n    }\n    if (options.excludeFields) {\n      source.excludes = options.excludeFields;\n    }\n    finalOptions._source = source;\n  }\n\n  if (options.sortOptions) {\n    finalOptions.sort = [\n      {\n        [options.sortOptions[0].dataField]: {\n          order: options.sortOptions[0].sortBy\n        }\n      }\n    ];\n  } else if (options.sortBy && options.sortByField) {\n    finalOptions.sort = [\n      {\n        [options.sortByField]: {\n          order: options.sortBy\n        }\n      }\n    ];\n  }\n  if (options.aggregationField) {\n    finalOptions.aggs = Searchbase.compositeAggsQuery(\n      options.aggregationField,\n      options.size || 0\n    ).aggs;\n  }\n  return finalOptions;\n};\n\nexport default Searchbase;\n"],"names":["__self__","root","F","fetch","DOMException","prototype","self","this","irrelevant","exports","support","searchParams","iterable","Symbol","blob","Blob","e","formData","arrayBuffer","isDataView","obj","DataView","isPrototypeOf","viewClasses","isArrayBufferView","ArrayBuffer","isView","indexOf","Object","toString","call","normalizeName","name","String","test","TypeError","toLowerCase","normalizeValue","value","iteratorFor","items","iterator","next","shift","done","undefined","Headers","headers","map","forEach","append","Array","isArray","header","getOwnPropertyNames","oldValue","get","has","hasOwnProperty","set","callback","thisArg","keys","push","values","entries","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","error","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","length","i","fromCharCode","join","bufferClone","slice","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","type","rejected","Error","then","text","decode","json","JSON","parse","methods","normalizeMethod","method","upcased","toUpperCase","Request","input","options","url","credentials","mode","signal","referrer","clone","form","trim","split","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","preProcessedHeaders","line","parts","key","Response","bodyInit","status","ok","statusText","response","redirectStatuses","redirect","RangeError","location","err","message","stack","create","constructor","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","module","_extends","btoa","highlightResults","data","highlight","highlightItem","highlightValue","_source","parseHits","hits","results","item","streamProps","_updated","_deleted","filter","reduce","flatten","arr","flat","toFlatten","concat","extractSuggestion","val","getSuggestions","fields","suggestions","currentValue","suggestionsList","labelsList","populateSuggestionsList","parsedSource","source","isWordMatch","some","term","includes","_promoted","defaultOption","label","parseField","field","fieldNodes","children","substring","arrayItem","suggestion","_score","_index","_type","_id","parseCompAggToHits","aggFieldName","buckets","bucket","doc_count","hitsData","_doc_count","_key","Results","rawResponse","raw","setData","filteredResults","promotedData","ids","Boolean","dataItem","parseResults","total","took","hidden","promoted","customData","Observable","observers","subscribe","fn","propertiesToSubscribe","properties","unsubscribe","o","property","thisObj","scope","window","CompositeAggregationResults","setRaw","after_key","setAfterKey","afterKey","aggField","MIC_STATUS","inactive","active","denied","REQUEST_STATUS","pending","defaultOptions","triggerQuery","triggerSuggestionsQuery","stateChanges","Searchbase","index","enableAppbase","enableQuerySuggestions","appbaseConfig","querySuggestions","fuzziness","searchOperators","queryFormat","size","from","dataField","aggregationField","includeFields","excludeFields","transformQuery","transformSuggestionsQuery","transformRequest","transformResponse","beforeValueChange","sortBy","nestedField","sortOptions","sortByField","highlightField","micOptions","prevStatus","_micStatus","SpeechRecognition","webkitSpeechRecognition","_setMicStatus","_micInstance","_stopMic","continuous","interimResults","assign","start","onstart","onresult","isFinal","_handleVoiceResults","console","objects","isSuggestionClick","_analyticsInstance","_queryId","click","queryID","conversion","transcript","setValue","stop","_applyOptions","sourceSuggestions","getDataFields","AppbaseAnalytics","Number","requestStatus","suggestionsRequestStatus","_parseSuggestions","_parseQuerySuggestions","aggregationData","Accept","Authorization","setHeaders","subscribeToStateChanges","unsubscribeToStateChanges","prev","setSize","setFrom","setFuzziness","setIncludeFields","setExcludeFields","setSortBy","setSortByField","setNestedField","setDataField","setResults","setSuggestions","performUpdate","warn","handleError","_setError","_updateQuery","_setRequestStatus","query","res","finalQuery","_fetchRequest","rawResults","SearchResult","_setSuggestionsError","_updateSuggestionsQuery","_setSuggestionsRequestStatus","suggestionsQuery","rawSuggestions","DataSearch","getSuggestionsQuery","rawQuerySuggestions","_handleQuerySuggestionsResponse","aggregations","_handleCompositeAggsResponse","id","defaultQuery","sort","count","order","aggsResponse","_handleTransformResponse","_handleTransformRequest","requestOptions","DataSearch__suggestions","requestBody","isQuerySuggestionsAPI","stringify","finalRequestOptions","timestamp","Date","now","suffix","responseHeaders","transformedData","_timestamp","_headers","suggestionsError","queryOptions","prevQuery","_query","getAppbaseSuggestionsQuery","execute","getAppbaseResultQuery","settings","getAppbaseSettings","getPreviousQuery","recordAnalytics","customEvents","enableQueryRules","userId","react","and","finalQueryOptions","generateQueryOptions","match_all","highlightQuery","_suggestionsQuery","getPreviousSuggestionsQuery","prevValue","nextValue","onMicStatusChange","onQueryChange","onSuggestionsQueryChange","onValueChange","onError","onSuggestionsError","onResults","onSuggestions","onQuerySuggestions","onAggregationData","onRequestStatusChange","onSuggestionsRequestStatusChange","simple_query_string","shouldQuery","bool","should","minimum_should_match","nested","path","dataFields","weight","default_operator","multi_match","operator","highlightFields","flatHighlightedFields","pre_tags","post_tags","require_field_match","compositeAggsQuery","aggs","composite","sources","terms","top_hits","finalOptions","excludes"],"mappings":"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"}