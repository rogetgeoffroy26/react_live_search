{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _Base = require('../../styles/Base');\n\nvar _Base2 = _interopRequireDefault(_Base);\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar URLParamsProvider = function (_Component) {\n  _inherits(URLParamsProvider, _Component);\n\n  function URLParamsProvider() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, URLParamsProvider);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.init = function () {\n      _this.searchString = _this.props.getSearchParams ? _this.props.getSearchParams() : window.location.search;\n      _this.params = new URLSearchParams(_this.searchString);\n      _this.currentSelectedState = _this.props.selectedValues || {};\n    }, _this.checkForURLParamsChange = function () {\n      // we only compare the search string (window.location.search by default)\n      // to see if the route has changed (or) not. This handles the following usecase:\n      // search on homepage -> route changes -> search results page with same search query\n      if (window) {\n        var searchString = _this.props.getSearchParams ? _this.props.getSearchParams() : window.location.search;\n\n        if (searchString !== _this.searchString) {\n          var event = void 0;\n\n          if (typeof Event === 'function') {\n            event = new Event('popstate');\n          } else {\n            // Correctly fire popstate event on IE11 to prevent app crash.\n            event = document.createEvent('Event');\n            event.initEvent('popstate', true, true);\n          }\n\n          window.dispatchEvent(event);\n        }\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  URLParamsProvider.prototype.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this.init();\n\n    window.onpopstate = function () {\n      _this2.init();\n\n      var activeComponents = Array.from(_this2.params.keys()); // remove inactive components from selectedValues\n\n      Object.keys(_this2.currentSelectedState).filter(function (item) {\n        return !activeComponents.includes(item);\n      }).forEach(function (component) {\n        _this2.props.setValue(component, null);\n      }); // update active components in selectedValues\n\n      Array.from(_this2.params.entries()).forEach(function (item) {\n        try {\n          var component = item[0],\n              value = item[1];\n\n          var _ref = _this2.props.selectedValues[component] || {\n            label: component\n          },\n              label = _ref.label,\n              showFilter = _ref.showFilter,\n              URLParams = _ref.URLParams;\n\n          _this2.props.setValue(component, JSON.parse(value), label, showFilter, URLParams);\n        } catch (e) {// Do not set value if JSON parsing fails.\n        }\n      });\n    };\n  };\n\n  URLParamsProvider.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this3 = this; // this ensures the url params change are handled\n    // when the url changes, which enables us to\n    // make `onpopstate` event handler work with history.pushState updates\n\n\n    this.checkForURLParamsChange();\n    this.currentSelectedState = this.props.selectedValues;\n\n    if (!(0, _helper.isEqual)(this.props.selectedValues, prevProps.selectedValues)) {\n      this.searchString = this.props.getSearchParams ? this.props.getSearchParams() : window.location.search;\n      this.params = new URLSearchParams(this.searchString);\n      var currentComponents = Object.keys(this.props.selectedValues);\n      var urlComponents = Array.from(this.params.keys());\n      currentComponents.filter(function (component) {\n        return _this3.props.selectedValues[component].URLParams;\n      }).forEach(function (component) {\n        // prevents empty history pollution on initial load\n        if (_this3.hasValidValue(_this3.props.selectedValues[component]) || _this3.hasValidValue(prevProps.selectedValues[component])) {\n          var selectedValues = _this3.props.selectedValues[component];\n          var prevValues = prevProps.selectedValues[component];\n\n          if (selectedValues.URLParams) {\n            if (selectedValues.category) {\n              _this3.setURL(component, _this3.getValue({\n                category: selectedValues.category,\n                value: selectedValues.value\n              }));\n            } else {\n              var currentValue = _this3.getValue(selectedValues.value);\n\n              var prevValue = prevValues && _this3.getValue(prevValues.value);\n              /*\n              \tPush to history only if values are different because setting url on\n              \tsame value will lead to 2 same entries in URL history which would cause\n              \trepeatation on pressing back button.\n              */\n\n\n              if (prevValue !== currentValue) {\n                _this3.setURL(component, _this3.getValue(selectedValues.value));\n              }\n            }\n          } else {\n            _this3.params.delete(component);\n\n            _this3.pushToHistory();\n          }\n        } else if (!_this3.hasValidValue(_this3.props.selectedValues[component]) && urlComponents.includes(component)) {\n          // doesn't have a valid value, but the url has a (stale) valid value set\n          _this3.params.delete(component);\n\n          _this3.pushToHistory();\n        }\n      }); // remove unmounted components\n\n      Object.keys(this.props.selectedValues).filter(function (component) {\n        return !currentComponents.includes(component);\n      }).forEach(function (component) {\n        _this3.params.delete(component);\n\n        _this3.pushToHistory();\n      });\n\n      if (!currentComponents.length) {\n        Array.from(this.params.keys()).forEach(function (item) {\n          _this3.params.delete(item);\n        });\n        this.pushToHistory();\n      }\n    }\n\n    if (!(0, _helper.isEqual)(this.props.headers, prevProps.headers)) {\n      this.props.setHeaders(this.props.headers);\n    }\n  };\n\n  URLParamsProvider.prototype.hasValidValue = function hasValidValue(component) {\n    if (!component) return false;\n    if (Array.isArray(component.value)) return !!component.value.length;\n    return !!component.value;\n  };\n\n  URLParamsProvider.prototype.getValue = function getValue(value) {\n    var _this4 = this;\n\n    if (Array.isArray(value) && value.length) {\n      return value.map(function (item) {\n        return _this4.getValue(item);\n      });\n    } else if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {\n      // TODO: support for NestedList\n      if (value.location) return value;\n      if (value.category) return value;\n      return value.label || value.key || null;\n    }\n\n    return value;\n  };\n\n  URLParamsProvider.prototype.setURL = function setURL(component, value) {\n    this.searchString = this.props.getSearchParams ? this.props.getSearchParams() : window.location.search;\n    this.params = new URLSearchParams(this.searchString);\n\n    if (!value || typeof value === 'string' && value.trim() === '' || Array.isArray(value) && value.length === 0) {\n      this.params.delete(component);\n      this.pushToHistory();\n    } else {\n      var data = JSON.stringify(this.getValue(value));\n\n      if (data !== this.params.get(component)) {\n        this.params.set(component, data);\n        this.pushToHistory();\n      }\n    }\n  };\n\n  URLParamsProvider.prototype.pushToHistory = function pushToHistory() {\n    var paramsSting = this.params.toString() ? '?' + this.params.toString() : '';\n    var base = window.location.href.split('?')[0];\n    var newURL = '' + base + paramsSting;\n\n    if (this.props.setSearchParams) {\n      this.props.setSearchParams(newURL);\n    } else if (window.history.pushState) {\n      window.history.pushState({\n        path: newURL\n      }, '', newURL);\n    }\n\n    this.init();\n  };\n\n  URLParamsProvider.prototype.render = function render() {\n    return _react2.default.createElement(_Base2.default, {\n      as: this.props.as,\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.children);\n  };\n\n  return URLParamsProvider;\n}(_react.Component);\n\nURLParamsProvider.propTypes = {\n  setHeaders: _types2.default.func,\n  setValue: _types2.default.func,\n  selectedValues: _types2.default.selectedValues,\n  // component props\n  children: _types2.default.children,\n  as: _types2.default.string,\n  headers: _types2.default.headers,\n  style: _types2.default.style,\n  className: _types2.default.string,\n  getSearchParams: _types2.default.func,\n  setSearchParams: _types2.default.func\n};\nURLParamsProvider.defaultProps = {\n  style: {},\n  className: null,\n  as: 'div'\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    selectedValues: state.selectedValues\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setHeaders: function setHeaders(headers) {\n      return dispatch((0, _actions.setHeaders)(headers));\n    },\n    setValue: function setValue(component, value, label, showFilter, URLParams) {\n      return dispatch((0, _actions.setValue)(component, value, label, showFilter, URLParams));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n  return _react2.default.createElement(URLParamsProvider, _extends({\n    ref: props.myForwardedRef\n  }, props));\n}); // eslint-disable-next-line\n\nexports.default = _react2.default.forwardRef(function (props, ref) {\n  return _react2.default.createElement(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});","map":{"version":3,"sources":["/Users/rogetgeoffroy/Desktop/Folders/react_js_folder/react-live-search-app/live-search/node_modules/@appbaseio/reactivesearch/lib/components/basic/URLParamsProvider.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_typeof","Symbol","iterator","obj","constructor","_react","require","_react2","_interopRequireDefault","_actions","_types","_types2","_helper","_Base","_Base2","_utils","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","value","enumerable","writable","configurable","setPrototypeOf","__proto__","URLParamsProvider","_Component","_temp","_this","_ret","_len","args","Array","_key","apply","concat","init","searchString","props","getSearchParams","window","location","search","params","URLSearchParams","currentSelectedState","selectedValues","checkForURLParamsChange","event","Event","document","createEvent","initEvent","dispatchEvent","componentDidMount","_this2","onpopstate","activeComponents","from","keys","filter","item","includes","forEach","component","setValue","entries","_ref","label","showFilter","URLParams","JSON","parse","e","componentDidUpdate","prevProps","_this3","isEqual","currentComponents","urlComponents","hasValidValue","prevValues","category","setURL","getValue","currentValue","prevValue","delete","pushToHistory","headers","setHeaders","isArray","_this4","map","trim","data","stringify","get","set","paramsSting","toString","base","href","split","newURL","setSearchParams","history","pushState","path","render","createElement","as","style","className","children","Component","propTypes","func","string","defaultProps","mapStateToProps","state","mapDispatchtoProps","dispatch","ConnectedComponent","connect","ref","myForwardedRef","forwardRef"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _Base = require('../../styles/Base');\n\nvar _Base2 = _interopRequireDefault(_Base);\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar URLParamsProvider = function (_Component) {\n\t_inherits(URLParamsProvider, _Component);\n\n\tfunction URLParamsProvider() {\n\t\tvar _temp, _this, _ret;\n\n\t\t_classCallCheck(this, URLParamsProvider);\n\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\targs[_key] = arguments[_key];\n\t\t}\n\n\t\treturn _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.init = function () {\n\t\t\t_this.searchString = _this.props.getSearchParams ? _this.props.getSearchParams() : window.location.search;\n\t\t\t_this.params = new URLSearchParams(_this.searchString);\n\t\t\t_this.currentSelectedState = _this.props.selectedValues || {};\n\t\t}, _this.checkForURLParamsChange = function () {\n\t\t\t// we only compare the search string (window.location.search by default)\n\t\t\t// to see if the route has changed (or) not. This handles the following usecase:\n\t\t\t// search on homepage -> route changes -> search results page with same search query\n\t\t\tif (window) {\n\t\t\t\tvar searchString = _this.props.getSearchParams ? _this.props.getSearchParams() : window.location.search;\n\n\t\t\t\tif (searchString !== _this.searchString) {\n\t\t\t\t\tvar event = void 0;\n\t\t\t\t\tif (typeof Event === 'function') {\n\t\t\t\t\t\tevent = new Event('popstate');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Correctly fire popstate event on IE11 to prevent app crash.\n\t\t\t\t\t\tevent = document.createEvent('Event');\n\t\t\t\t\t\tevent.initEvent('popstate', true, true);\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.dispatchEvent(event);\n\t\t\t\t}\n\t\t\t}\n\t\t}, _temp), _possibleConstructorReturn(_this, _ret);\n\t}\n\n\tURLParamsProvider.prototype.componentDidMount = function componentDidMount() {\n\t\tvar _this2 = this;\n\n\t\tthis.init();\n\n\t\twindow.onpopstate = function () {\n\t\t\t_this2.init();\n\t\t\tvar activeComponents = Array.from(_this2.params.keys());\n\n\t\t\t// remove inactive components from selectedValues\n\t\t\tObject.keys(_this2.currentSelectedState).filter(function (item) {\n\t\t\t\treturn !activeComponents.includes(item);\n\t\t\t}).forEach(function (component) {\n\t\t\t\t_this2.props.setValue(component, null);\n\t\t\t});\n\n\t\t\t// update active components in selectedValues\n\t\t\tArray.from(_this2.params.entries()).forEach(function (item) {\n\t\t\t\ttry {\n\t\t\t\t\tvar component = item[0],\n\t\t\t\t\t    value = item[1];\n\n\t\t\t\t\tvar _ref = _this2.props.selectedValues[component] || { label: component },\n\t\t\t\t\t    label = _ref.label,\n\t\t\t\t\t    showFilter = _ref.showFilter,\n\t\t\t\t\t    URLParams = _ref.URLParams;\n\n\t\t\t\t\t_this2.props.setValue(component, JSON.parse(value), label, showFilter, URLParams);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// Do not set value if JSON parsing fails.\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t};\n\n\tURLParamsProvider.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this3 = this;\n\n\t\t// this ensures the url params change are handled\n\t\t// when the url changes, which enables us to\n\t\t// make `onpopstate` event handler work with history.pushState updates\n\t\tthis.checkForURLParamsChange();\n\n\t\tthis.currentSelectedState = this.props.selectedValues;\n\t\tif (!(0, _helper.isEqual)(this.props.selectedValues, prevProps.selectedValues)) {\n\t\t\tthis.searchString = this.props.getSearchParams ? this.props.getSearchParams() : window.location.search;\n\t\t\tthis.params = new URLSearchParams(this.searchString);\n\t\t\tvar currentComponents = Object.keys(this.props.selectedValues);\n\t\t\tvar urlComponents = Array.from(this.params.keys());\n\n\t\t\tcurrentComponents.filter(function (component) {\n\t\t\t\treturn _this3.props.selectedValues[component].URLParams;\n\t\t\t}).forEach(function (component) {\n\t\t\t\t// prevents empty history pollution on initial load\n\t\t\t\tif (_this3.hasValidValue(_this3.props.selectedValues[component]) || _this3.hasValidValue(prevProps.selectedValues[component])) {\n\t\t\t\t\tvar selectedValues = _this3.props.selectedValues[component];\n\t\t\t\t\tvar prevValues = prevProps.selectedValues[component];\n\t\t\t\t\tif (selectedValues.URLParams) {\n\t\t\t\t\t\tif (selectedValues.category) {\n\t\t\t\t\t\t\t_this3.setURL(component, _this3.getValue({\n\t\t\t\t\t\t\t\tcategory: selectedValues.category,\n\t\t\t\t\t\t\t\tvalue: selectedValues.value\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar currentValue = _this3.getValue(selectedValues.value);\n\t\t\t\t\t\t\tvar prevValue = prevValues && _this3.getValue(prevValues.value);\n\n\t\t\t\t\t\t\t/*\n       \tPush to history only if values are different because setting url on\n       \tsame value will lead to 2 same entries in URL history which would cause\n       \trepeatation on pressing back button.\n       */\n\n\t\t\t\t\t\t\tif (prevValue !== currentValue) {\n\t\t\t\t\t\t\t\t_this3.setURL(component, _this3.getValue(selectedValues.value));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this3.params.delete(component);\n\t\t\t\t\t\t_this3.pushToHistory();\n\t\t\t\t\t}\n\t\t\t\t} else if (!_this3.hasValidValue(_this3.props.selectedValues[component]) && urlComponents.includes(component)) {\n\t\t\t\t\t// doesn't have a valid value, but the url has a (stale) valid value set\n\t\t\t\t\t_this3.params.delete(component);\n\t\t\t\t\t_this3.pushToHistory();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// remove unmounted components\n\t\t\tObject.keys(this.props.selectedValues).filter(function (component) {\n\t\t\t\treturn !currentComponents.includes(component);\n\t\t\t}).forEach(function (component) {\n\t\t\t\t_this3.params.delete(component);\n\t\t\t\t_this3.pushToHistory();\n\t\t\t});\n\n\t\t\tif (!currentComponents.length) {\n\t\t\t\tArray.from(this.params.keys()).forEach(function (item) {\n\t\t\t\t\t_this3.params.delete(item);\n\t\t\t\t});\n\t\t\t\tthis.pushToHistory();\n\t\t\t}\n\t\t}\n\n\t\tif (!(0, _helper.isEqual)(this.props.headers, prevProps.headers)) {\n\t\t\tthis.props.setHeaders(this.props.headers);\n\t\t}\n\t};\n\n\tURLParamsProvider.prototype.hasValidValue = function hasValidValue(component) {\n\t\tif (!component) return false;\n\t\tif (Array.isArray(component.value)) return !!component.value.length;\n\t\treturn !!component.value;\n\t};\n\n\tURLParamsProvider.prototype.getValue = function getValue(value) {\n\t\tvar _this4 = this;\n\n\t\tif (Array.isArray(value) && value.length) {\n\t\t\treturn value.map(function (item) {\n\t\t\t\treturn _this4.getValue(item);\n\t\t\t});\n\t\t} else if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {\n\t\t\t// TODO: support for NestedList\n\t\t\tif (value.location) return value;\n\t\t\tif (value.category) return value;\n\t\t\treturn value.label || value.key || null;\n\t\t}\n\t\treturn value;\n\t};\n\n\tURLParamsProvider.prototype.setURL = function setURL(component, value) {\n\t\tthis.searchString = this.props.getSearchParams ? this.props.getSearchParams() : window.location.search;\n\t\tthis.params = new URLSearchParams(this.searchString);\n\t\tif (!value || typeof value === 'string' && value.trim() === '' || Array.isArray(value) && value.length === 0) {\n\t\t\tthis.params.delete(component);\n\t\t\tthis.pushToHistory();\n\t\t} else {\n\t\t\tvar data = JSON.stringify(this.getValue(value));\n\t\t\tif (data !== this.params.get(component)) {\n\t\t\t\tthis.params.set(component, data);\n\t\t\t\tthis.pushToHistory();\n\t\t\t}\n\t\t}\n\t};\n\n\tURLParamsProvider.prototype.pushToHistory = function pushToHistory() {\n\t\tvar paramsSting = this.params.toString() ? '?' + this.params.toString() : '';\n\t\tvar base = window.location.href.split('?')[0];\n\t\tvar newURL = '' + base + paramsSting;\n\n\t\tif (this.props.setSearchParams) {\n\t\t\tthis.props.setSearchParams(newURL);\n\t\t} else if (window.history.pushState) {\n\t\t\twindow.history.pushState({ path: newURL }, '', newURL);\n\t\t}\n\t\tthis.init();\n\t};\n\n\tURLParamsProvider.prototype.render = function render() {\n\t\treturn _react2.default.createElement(\n\t\t\t_Base2.default,\n\t\t\t{ as: this.props.as, style: this.props.style, className: this.props.className },\n\t\t\tthis.props.children\n\t\t);\n\t};\n\n\treturn URLParamsProvider;\n}(_react.Component);\n\nURLParamsProvider.propTypes = {\n\tsetHeaders: _types2.default.func,\n\tsetValue: _types2.default.func,\n\tselectedValues: _types2.default.selectedValues,\n\t// component props\n\tchildren: _types2.default.children,\n\tas: _types2.default.string,\n\theaders: _types2.default.headers,\n\tstyle: _types2.default.style,\n\tclassName: _types2.default.string,\n\tgetSearchParams: _types2.default.func,\n\tsetSearchParams: _types2.default.func\n};\n\nURLParamsProvider.defaultProps = {\n\tstyle: {},\n\tclassName: null,\n\tas: 'div'\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n\treturn {\n\t\tselectedValues: state.selectedValues\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetHeaders: function setHeaders(headers) {\n\t\t\treturn dispatch((0, _actions.setHeaders)(headers));\n\t\t},\n\t\tsetValue: function setValue(component, value, label, showFilter, URLParams) {\n\t\t\treturn dispatch((0, _actions.setValue)(component, value, label, showFilter, URLParams));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n\treturn _react2.default.createElement(URLParamsProvider, _extends({ ref: props.myForwardedRef }, props));\n});\n\n// eslint-disable-next-line\nexports.default = _react2.default.forwardRef(function (props, ref) {\n\treturn _react2.default.createElement(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});"]},"metadata":{},"sourceType":"script"}