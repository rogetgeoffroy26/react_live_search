{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _InputIcon = require('../../styles/InputIcon');\n\nvar _InputIcon2 = _interopRequireDefault(_InputIcon);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _utils = require('../../utils');\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/** @jsx jsx */\n\n\nvar DataSearch = function (_Component) {\n  _inherits(DataSearch, _Component);\n\n  function DataSearch(props) {\n    _classCallCheck(this, DataSearch);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var currentValue = props.selectedValue || props.value || props.defaultValue || '';\n    _this.state = {\n      currentValue: currentValue,\n      suggestions: [],\n      isOpen: false\n    };\n    _this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n    /**\n     * To regulate the query execution based on the input handler,\n     * the component query will only get executed when it sets to `true`.\n     * */\n\n    _this.isPending = false;\n    _this.queryOptions = _this.getBasicQueryOptions(); // Set custom and default queries in store\n\n    (0, _helper.updateCustomQuery)(props.componentId, props, currentValue);\n    (0, _helper.updateDefaultQuery)(props.componentId, props, currentValue);\n\n    if (props.highlight) {\n      var queryOptions = DataSearch.highlightQuery(props) || {};\n\n      if (props.customHighlight && typeof props.customHighlight === 'function') {\n        props.setCustomHighlightOptions(props.componentId, props.customHighlight(props));\n      }\n\n      _this.queryOptions = _extends({}, queryOptions, _this.getBasicQueryOptions());\n      props.setQueryOptions(props.componentId, queryOptions);\n    } else {\n      props.setQueryOptions(props.componentId, _this.queryOptions);\n    }\n\n    var hasMounted = false;\n    var cause = null;\n\n    if (currentValue) {\n      if (props.onChange) {\n        props.onChange(currentValue, _this.triggerQuery);\n      }\n\n      _this.setValue(currentValue, true, props, cause, hasMounted);\n    }\n\n    return _this;\n  }\n\n  DataSearch.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['highlight', 'dataField', 'highlightField', 'aggregationField'], function () {\n      var queryOptions = DataSearch.highlightQuery(_this2.props) || {};\n\n      if (_this2.props.customHighlight && typeof _this2.props.customHighlight === 'function') {\n        _this2.props.setCustomHighlightOptions(_this2.props.componentId, _this2.props.customHighlight(_this2.props));\n      }\n\n      _this2.queryOptions = _extends({}, queryOptions, _this2.getBasicQueryOptions());\n\n      _this2.props.setQueryOptions(_this2.props.componentId, queryOptions);\n    }); // Treat defaultQuery and customQuery as reactive props\n\n    if (!(0, _utils.isQueryIdentical)(this.state.currentValue, this.props, prevProps, 'defaultQuery')) {\n      this.updateDefaultQuery(this.state.currentValue, this.props);\n      this.updateQuery(this.state.currentValue, this.props);\n    }\n\n    if (!(0, _utils.isQueryIdentical)(this.state.currentValue, this.props, prevProps, 'customQuery')) {\n      this.updateQuery(this.state.currentValue, this.props);\n    }\n\n    if (Array.isArray(this.props.suggestions) && this.state.currentValue.trim().length) {\n      // shallow check allows us to set suggestions even if the next set\n      // of suggestions are same as the current one\n      if (this.props.suggestions !== prevProps.suggestions) {\n        if (this.props.onSuggestions) {\n          this.props.onSuggestions(this.props.suggestions);\n        } // eslint-disable-next-line\n\n\n        this.setState({\n          suggestions: this.onSuggestions(this.props.suggestions)\n        });\n      }\n    }\n\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['fieldWeights', 'fuzziness', 'queryFormat', 'dataField', 'nestedField', 'searchOperators'], function () {\n      _this2.updateQuery(_this2.state.currentValue, _this2.props);\n    });\n\n    if (this.props.value !== prevProps.value) {\n      this.setValue(this.props.value, true, this.props, undefined, undefined, false);\n    } else if ( // since, selectedValue will be updated when currentValue changes,\n    // we must only check for the changes introduced by\n    // clear action from SelectedFilters component in which case,\n    // the currentValue will never match the updated selectedValue\n    this.props.selectedValue !== prevProps.selectedValue && this.state.currentValue !== this.props.selectedValue) {\n      var _props = this.props,\n          value = _props.value,\n          onChange = _props.onChange;\n\n      if (value === undefined) {\n        this.setValue(this.props.selectedValue || '', true, this.props);\n      } else if (onChange) {\n        // value prop exists\n        onChange(this.props.selectedValue || '', this.triggerQuery);\n      } else {\n        // value prop exists and onChange is not defined:\n        // we need to put the current value back into the store\n        // if the clear action was triggered by interacting with\n        // selected-filters component\n        this.isPending = false;\n        this.setValue(this.state.currentValue, true, this.props);\n      }\n    }\n  }; // returns size and aggs property\n\n\n  DataSearch.prototype.shouldMicRender = function shouldMicRender(showVoiceSearch) {\n    // checks for SSR\n    if (typeof window === 'undefined') return false;\n    return showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n  };\n\n  DataSearch.prototype.render = function render() {\n    var _this3 = this;\n\n    var currentValue = this.state.currentValue;\n    var suggestionsList = this.parsedSuggestions;\n    var _props2 = this.props,\n        theme = _props2.theme,\n        themePreset = _props2.themePreset,\n        size = _props2.size;\n    return (0, _core.jsx)(_Container2.default, {\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.title && (0, _core.jsx)(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), this.props.defaultSuggestions || this.props.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n      id: this.props.componentId + '-downshift',\n      onChange: this.onSuggestionSelected,\n      onStateChange: this.handleStateChange,\n      isOpen: this.state.isOpen,\n      itemToString: function itemToString(i) {\n        return i;\n      },\n      render: function render(_ref) {\n        var getRootProps = _ref.getRootProps,\n            getInputProps = _ref.getInputProps,\n            getItemProps = _ref.getItemProps,\n            isOpen = _ref.isOpen,\n            highlightedIndex = _ref.highlightedIndex,\n            rest = _objectWithoutProperties(_ref, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex']);\n\n        return (0, _core.jsx)('div', getRootProps({\n          css: _Input.suggestionsContainer\n        }, {\n          suppressRefError: true\n        }), (0, _core.jsx)(_Input2.default, _extends({\n          'aria-label': _this3.props.componentId,\n          id: _this3.props.componentId + '-input',\n          showIcon: _this3.props.showIcon,\n          showClear: _this3.props.showClear,\n          iconPosition: _this3.props.iconPosition,\n          ref: function ref(c) {\n            _this3._inputRef = c;\n          }\n        }, getInputProps({\n          className: (0, _helper.getClassName)(_this3.props.innerClass, 'input'),\n          placeholder: _this3.props.placeholder,\n          value: _this3.state.currentValue === null ? '' : _this3.state.currentValue,\n          onChange: _this3.onInputChange,\n          onBlur: _this3.withTriggerQuery(_this3.props.onBlur),\n          onFocus: _this3.handleFocus,\n          onKeyPress: _this3.withTriggerQuery(_this3.props.onKeyPress),\n          onKeyDown: function onKeyDown(e) {\n            return _this3.handleKeyDown(e, highlightedIndex);\n          },\n          onKeyUp: _this3.withTriggerQuery(_this3.props.onKeyUp)\n        }), {\n          themePreset: themePreset\n        })), _this3.renderIcons(), _this3.hasCustomRenderer && _this3.getComponent(_extends({\n          getInputProps: getInputProps,\n          getItemProps: getItemProps,\n          isOpen: isOpen,\n          highlightedIndex: highlightedIndex\n        }, rest)), _this3.renderLoader(), _this3.renderError(), !_this3.hasCustomRenderer && isOpen && suggestionsList.length ? (0, _core.jsx)('ul', {\n          css: (0, _Input.suggestions)(themePreset, theme),\n          className: (0, _helper.getClassName)(_this3.props.innerClass, 'list')\n        }, (0, _utils.hasQuerySuggestionsRenderer)(_this3.props) ? _this3.getComponent(_extends({\n          getInputProps: getInputProps,\n          getItemProps: getItemProps,\n          isOpen: isOpen,\n          highlightedIndex: highlightedIndex\n        }, rest), true) : _this3.topSuggestions.map(function (sugg, index) {\n          return (0, _core.jsx)('li', _extends({}, getItemProps({\n            item: sugg\n          }), {\n            key: index + 1 + '-' + sugg.value,\n            style: {\n              backgroundColor: _this3.getBackgroundColor(highlightedIndex, index)\n            }\n          }), (0, _core.jsx)(_SuggestionItem2.default, {\n            currentValue: currentValue,\n            suggestion: sugg\n          }));\n        }), suggestionsList.slice(0, size).map(function (item, index) {\n          return (0, _core.jsx)('li', _extends({}, getItemProps({\n            item: item\n          }), {\n            key: index + _this3.topSuggestions.length + 1 + '-' + item.value,\n            style: {\n              backgroundColor: _this3.getBackgroundColor(highlightedIndex, index + _this3.topSuggestions.length)\n            }\n          }), (0, _core.jsx)(_SuggestionItem2.default, {\n            currentValue: currentValue,\n            suggestion: item\n          }));\n        })) : _this3.renderNoSuggestion(suggestionsList));\n      }\n    }, this.props.downShiftProps)) : (0, _core.jsx)('div', {\n      css: _Input.suggestionsContainer\n    }, (0, _core.jsx)(_Input2.default, {\n      'aria-label': this.props.componentId,\n      className: (0, _helper.getClassName)(this.props.innerClass, 'input') || null,\n      placeholder: this.props.placeholder,\n      value: this.state.currentValue ? this.state.currentValue : '',\n      onChange: this.onInputChange,\n      onBlur: this.withTriggerQuery(this.props.onBlur),\n      onFocus: this.withTriggerQuery(this.props.onFocus),\n      onKeyPress: this.withTriggerQuery(this.props.onKeyPress),\n      onKeyDown: this.withTriggerQuery(this.props.onKeyDown),\n      onKeyUp: this.withTriggerQuery(this.props.onKeyUp),\n      autoFocus: this.props.autoFocus,\n      iconPosition: this.props.iconPosition,\n      showIcon: this.props.showIcon,\n      showClear: this.props.showClear,\n      themePreset: themePreset\n    }), this.renderIcons()));\n  };\n\n  _createClass(DataSearch, [{\n    key: 'stats',\n    get: function get() {\n      return (0, _helper.getResultStats)(this.props);\n    }\n  }, {\n    key: 'parsedSuggestions',\n    get: function get() {\n      var suggestionsList = [];\n      var currentValue = this.state.currentValue;\n      var defaultSuggestions = this.props.defaultSuggestions;\n\n      if (!currentValue && defaultSuggestions && defaultSuggestions.length) {\n        suggestionsList = defaultSuggestions;\n      } else if (currentValue) {\n        suggestionsList = this.state.suggestions;\n      }\n\n      return (0, _helper.withClickIds)(suggestionsList);\n    }\n  }, {\n    key: 'hasCustomRenderer',\n    get: function get() {\n      return (0, _utils.hasCustomRenderer)(this.props);\n    }\n  }, {\n    key: 'topSuggestions',\n    get: function get() {\n      var _props3 = this.props,\n          enableQuerySuggestions = _props3.enableQuerySuggestions,\n          querySuggestions = _props3.querySuggestions,\n          showDistinctSuggestions = _props3.showDistinctSuggestions;\n      var currentValue = this.state.currentValue;\n      return enableQuerySuggestions ? (0, _helper.getTopSuggestions)(querySuggestions, currentValue, showDistinctSuggestions) : [];\n    }\n  }]);\n\n  return DataSearch;\n}(_react.Component);\n\nDataSearch.highlightQuery = function (props) {\n  if (props.customHighlight) {\n    return props.customHighlight(props);\n  }\n\n  if (!props.highlight) {\n    return null;\n  }\n\n  var fields = {};\n  var highlightField = props.highlightField ? props.highlightField : props.dataField;\n\n  if (typeof highlightField === 'string') {\n    fields[highlightField] = {};\n  } else if (Array.isArray(highlightField)) {\n    highlightField.forEach(function (item) {\n      fields[item] = {};\n    });\n  }\n\n  return {\n    highlight: _extends({\n      pre_tags: ['<mark>'],\n      post_tags: ['</mark>'],\n      fields: fields\n    }, props.highlightField && {\n      require_field_match: false\n    })\n  };\n};\n\nDataSearch.defaultQuery = function (value, props) {\n  var finalQuery = null;\n  var fields = void 0;\n\n  if (value) {\n    if (Array.isArray(props.dataField)) {\n      fields = props.dataField;\n    } else {\n      fields = [props.dataField];\n    }\n\n    if (props.queryString) {\n      finalQuery = {\n        query_string: DataSearch.shouldQuery(value, fields, props)\n      };\n    } else if (props.searchOperators) {\n      finalQuery = {\n        simple_query_string: DataSearch.shouldQuery(value, fields, props)\n      };\n    } else {\n      finalQuery = {\n        bool: {\n          should: DataSearch.shouldQuery(value, fields, props),\n          minimum_should_match: '1'\n        }\n      };\n    }\n  }\n\n  if (value === '') {\n    finalQuery = null;\n  }\n\n  if (finalQuery && props.nestedField) {\n    finalQuery = {\n      nested: {\n        path: props.nestedField,\n        query: finalQuery\n      }\n    };\n  }\n\n  return finalQuery;\n};\n\nDataSearch.shouldQuery = function (value, dataFields, props) {\n  var fields = dataFields.map(function (field, index) {\n    return '' + field + (Array.isArray(props.fieldWeights) && props.fieldWeights[index] ? '^' + props.fieldWeights[index] : '');\n  });\n\n  if (props.searchOperators || props.queryString) {\n    return {\n      query: value,\n      fields: fields,\n      default_operator: props.queryFormat\n    };\n  }\n\n  if (props.queryFormat === 'and') {\n    return [{\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'cross_fields',\n        operator: 'and'\n      }\n    }, {\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'phrase',\n        operator: 'and'\n      }\n    }];\n  }\n\n  return [{\n    multi_match: {\n      query: value,\n      fields: fields,\n      type: 'best_fields',\n      operator: 'or',\n      fuzziness: props.fuzziness ? props.fuzziness : 0\n    }\n  }, {\n    multi_match: {\n      query: value,\n      fields: fields,\n      type: 'phrase',\n      operator: 'or'\n    }\n  }];\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.getBasicQueryOptions = function () {\n    var aggregationField = _this4.props.aggregationField;\n    var queryOptions = (0, _helper.getQueryOptions)(_this4.props);\n\n    if (aggregationField) {\n      queryOptions.aggs = (0, _helper.getCompositeAggsQuery)({}, _this4.props, null, true).aggs;\n    }\n\n    return queryOptions;\n  };\n\n  this.onSuggestions = function (results) {\n    return (0, _helper.handleOnSuggestions)(results, _this4.state.currentValue, _this4.props);\n  };\n\n  this.setValue = function (value) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.props;\n    var cause = arguments[3];\n    var hasMounted = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var toggleIsOpen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n\n    var performUpdate = function performUpdate() {\n      if (hasMounted) {\n        _this4.setState({\n          currentValue: value,\n          suggestions: []\n        }, function () {\n          if (isDefaultValue) {\n            if (_this4.props.autosuggest) {\n              if (toggleIsOpen) {\n                _this4.setState({\n                  isOpen: false\n                });\n              }\n\n              _this4.updateDefaultQuery(value, props);\n            } // in case of strict selection only SUGGESTION_SELECT should be able\n            // to set the query otherwise the value should reset\n\n\n            if (props.strictSelection) {\n              if (cause === _causes2.default.SUGGESTION_SELECT || value === '') {\n                _this4.updateQuery(value, props);\n              } else {\n                _this4.setValue('', true);\n              }\n            } else {\n              _this4.updateQuery(value, props);\n            }\n          } else {\n            // debounce for handling text while typing\n            _this4.handleTextChange(value);\n          }\n\n          if (props.onValueChange) props.onValueChange(value); // Set the already fetched suggestions if query is same as used last to fetch the hits\n\n          if (value === props.lastUsedQuery) {\n            _this4.setState({\n              suggestions: _this4.onSuggestions(_this4.props.suggestions)\n            }); // invoke on suggestions\n\n\n            if (_this4.props.onSuggestions) {\n              _this4.props.onSuggestions(_this4.props.suggestions);\n            }\n          }\n        });\n      } else {\n        if (_this4.props.autosuggest) {\n          _this4.updateDefaultQuery(value, props);\n        }\n\n        _this4.updateQuery(value, props);\n\n        if (props.onValueChange) props.onValueChange(value);\n      }\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n  };\n\n  this.handleTextChange = (0, _helper.debounce)(function (value) {\n    if (_this4.props.autosuggest) {\n      _this4.updateDefaultQuery(value, _this4.props);\n    } else {\n      _this4.updateQuery(value, _this4.props);\n    }\n  }, this.props.debounce);\n\n  this.updateDefaultQuery = function (value, props) {\n    var defaultQuery = props.defaultQuery;\n    var defaultQueryOptions = void 0;\n    var query = DataSearch.defaultQuery(value, props);\n\n    if (defaultQuery) {\n      var defaultQueryTobeSet = defaultQuery(value, props) || {};\n\n      if (defaultQueryTobeSet.query) {\n        query = defaultQueryTobeSet.query;\n      }\n\n      defaultQueryOptions = (0, _helper.getOptionsFromQuery)(defaultQueryTobeSet); // Update calculated default query in store\n\n      (0, _helper.updateDefaultQuery)(props.componentId, props, value);\n    }\n\n    props.setSuggestionsSearchValue(value);\n    props.setQueryOptions(_this4.internalComponent, _extends({}, _this4.queryOptions, defaultQueryOptions));\n    props.updateQuery({\n      componentId: _this4.internalComponent,\n      query: query,\n      value: value,\n      componentType: _constants.componentTypes.dataSearch\n    });\n  };\n\n  this.updateQuery = function (value, props) {\n    var customQuery = props.customQuery,\n        filterLabel = props.filterLabel,\n        showFilter = props.showFilter,\n        URLParams = props.URLParams;\n    var customQueryOptions = void 0;\n    var query = DataSearch.defaultQuery(value, props);\n\n    if (customQuery) {\n      var customQueryTobeSet = customQuery(value, props) || {};\n      var queryTobeSet = customQueryTobeSet.query;\n\n      if (queryTobeSet) {\n        query = queryTobeSet;\n      }\n\n      customQueryOptions = (0, _helper.getOptionsFromQuery)(customQueryTobeSet);\n      (0, _helper.updateCustomQuery)(props.componentId, props, value);\n    } // query options should be applied to the source component,\n    // not on internal component, hence using `this.props.componentId` here\n\n\n    props.setQueryOptions(props.componentId, _extends({}, _this4.queryOptions, customQueryOptions));\n\n    if (!_this4.isPending) {\n      props.updateQuery({\n        componentId: props.componentId,\n        query: query,\n        value: value,\n        label: filterLabel,\n        showFilter: showFilter,\n        URLParams: URLParams,\n        componentType: _constants.componentTypes.dataSearch\n      });\n    }\n  };\n\n  this.handleFocus = function (event) {\n    _this4.setState({\n      isOpen: true\n    });\n\n    if (_this4.props.onFocus) {\n      _this4.props.onFocus(event, _this4.triggerQuery);\n    }\n  };\n\n  this.clearValue = function () {\n    _this4.isPending = false;\n    var onChange = _this4.props.onChange;\n\n    _this4.setValue('', true);\n\n    if (onChange) {\n      onChange('', _this4.triggerQuery);\n    }\n\n    _this4.onValueSelected(null, _causes2.default.CLEAR_VALUE);\n  };\n\n  this.handleKeyDown = function (event, highlightedIndex) {\n    var _props4 = _this4.props,\n        value = _props4.value,\n        onChange = _props4.onChange;\n\n    if (value !== undefined && onChange) {\n      _this4.isPending = true;\n    } // if a suggestion was selected, delegate the handling\n    // to suggestion handler\n\n\n    if (event.key === 'Enter' && highlightedIndex === null) {\n      _this4.setValue(event.target.value, true);\n\n      _this4.onValueSelected(event.target.value, _causes2.default.ENTER_PRESS);\n    }\n\n    if (_this4.props.onKeyDown) {\n      _this4.props.onKeyDown(event, _this4.triggerQuery);\n    }\n  };\n\n  this.onInputChange = function (e) {\n    var inputValue = e.target.value;\n\n    if (!_this4.state.isOpen) {\n      _this4.setState({\n        isOpen: true\n      });\n    }\n\n    var _props5 = _this4.props,\n        value = _props5.value,\n        onChange = _props5.onChange;\n\n    if (value === undefined) {\n      _this4.setValue(inputValue);\n    } else if (onChange) {\n      _this4.isPending = true; // handle caret position in controlled components\n\n      (0, _utils.handleCaretPosition)(e);\n      onChange(inputValue, _this4.triggerQuery, e);\n    }\n  };\n\n  this.triggerQuery = function () {\n    _this4.isPending = false;\n\n    _this4.setValue(_this4.props.value, true, _this4.props);\n  };\n\n  this.onSuggestionSelected = function (suggestion) {\n    var _props6 = _this4.props,\n        value = _props6.value,\n        onChange = _props6.onChange;\n\n    _this4.setState({\n      isOpen: false\n    });\n\n    if (value === undefined) {\n      _this4.setValue(suggestion.value, true, _this4.props, _causes2.default.SUGGESTION_SELECT);\n    } else if (onChange) {\n      _this4.isPending = false;\n      onChange(suggestion.value, _this4.triggerQuery);\n    } // Record analytics for selected suggestions\n\n\n    _this4.triggerClickAnalytics(suggestion._click_id); // onValueSelected is user interaction driven:\n    // it should be triggered irrespective of controlled (or)\n    // uncontrolled component behavior\n\n\n    _this4.onValueSelected(suggestion.value, _causes2.default.SUGGESTION_SELECT, suggestion.source);\n  };\n\n  this.onValueSelected = function () {\n    for (var _len = arguments.length, cause = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      cause[_key - 1] = arguments[_key];\n    }\n\n    var currentValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this4.state.currentValue;\n    var onValueSelected = _this4.props.onValueSelected;\n\n    if (onValueSelected) {\n      onValueSelected.apply(undefined, [currentValue].concat(cause));\n    }\n  };\n\n  this.handleStateChange = function (changes) {\n    var isOpen = changes.isOpen,\n        type = changes.type;\n\n    if (type === _downshift2.default.stateChangeTypes.mouseUp) {\n      _this4.setState({\n        isOpen: isOpen\n      });\n    }\n  };\n\n  this.getBackgroundColor = function (highlightedIndex, index) {\n    var isDark = _this4.props.themePreset === 'dark';\n\n    if (isDark) {\n      return highlightedIndex === index ? '#555' : '#424242';\n    }\n\n    return highlightedIndex === index ? '#eee' : '#fff';\n  };\n\n  this.handleSearchIconClick = function () {\n    var currentValue = _this4.state.currentValue;\n\n    if (currentValue.trim()) {\n      _this4.isPending = false;\n\n      _this4.setValue(currentValue, true);\n\n      _this4.onValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n    }\n  };\n\n  this.handleVoiceResults = function (_ref2) {\n    var results = _ref2.results;\n    var autosuggest = _this4.props.autosuggest;\n\n    if (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n      _this4.isPending = false;\n\n      _this4.setValue(results[0][0].transcript.trim(), !autosuggest);\n\n      if (autosuggest) {\n        _this4._inputRef.focus();\n\n        _this4.setState({\n          isOpen: true\n        });\n      }\n    }\n  };\n\n  this.renderIcon = function () {\n    if (_this4.props.showIcon) {\n      return _this4.props.icon || (0, _core.jsx)(_SearchSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  this.renderCancelIcon = function () {\n    if (_this4.props.showClear) {\n      return _this4.props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  this.renderIcons = function () {\n    var currentValue = _this4.state.currentValue;\n    var _props7 = _this4.props,\n        showIcon = _props7.showIcon,\n        showClear = _props7.showClear,\n        renderMic = _props7.renderMic,\n        getMicInstance = _props7.getMicInstance,\n        showVoiceSearch = _props7.showVoiceSearch,\n        iconPosition = _props7.iconPosition,\n        innerClass = _props7.innerClass;\n    return (0, _core.jsx)('div', null, _this4.state.currentValue && showClear && (0, _core.jsx)(_InputIcon2.default, {\n      onClick: _this4.clearValue,\n      iconPosition: 'right',\n      clearIcon: iconPosition === 'right',\n      showIcon: showIcon,\n      isClearIcon: true\n    }, _this4.renderCancelIcon()), _this4.shouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n      getInstance: getMicInstance,\n      render: renderMic,\n      iconPosition: iconPosition,\n      onResult: _this4.handleVoiceResults,\n      className: (0, _helper.getClassName)(innerClass, 'mic') || null,\n      applyClearStyle: !!currentValue && showClear,\n      showIcon: showIcon\n    }), (0, _core.jsx)(_InputIcon2.default, {\n      onClick: _this4.handleSearchIconClick,\n      iconPosition: iconPosition,\n      showIcon: showIcon\n    }, _this4.renderIcon()));\n  };\n\n  this.renderNoSuggestion = function () {\n    var finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var _props8 = _this4.props,\n        themePreset = _props8.themePreset,\n        theme = _props8.theme,\n        isLoading = _props8.isLoading,\n        renderNoSuggestion = _props8.renderNoSuggestion,\n        innerClass = _props8.innerClass,\n        error = _props8.error,\n        renderError = _props8.renderError;\n    var _state = _this4.state,\n        isOpen = _state.isOpen,\n        currentValue = _state.currentValue;\n\n    if (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        themePreset: themePreset,\n        theme: theme,\n        innerClassName: 'noSuggestion'\n      }, typeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion);\n    }\n\n    return null;\n  };\n\n  this.renderLoader = function () {\n    var _props9 = _this4.props,\n        loader = _props9.loader,\n        isLoading = _props9.isLoading,\n        themePreset = _props9.themePreset,\n        theme = _props9.theme,\n        innerClass = _props9.innerClass;\n    var currentValue = _this4.state.currentValue;\n\n    if (isLoading && loader && currentValue) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'loader',\n        theme: theme,\n        themePreset: themePreset\n      }, loader);\n    }\n\n    return null;\n  };\n\n  this.renderError = function () {\n    var _props10 = _this4.props,\n        error = _props10.error,\n        renderError = _props10.renderError,\n        themePreset = _props10.themePreset,\n        theme = _props10.theme,\n        isLoading = _props10.isLoading,\n        innerClass = _props10.innerClass;\n    var currentValue = _this4.state.currentValue;\n\n    if (error && renderError && currentValue && !isLoading) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'error',\n        theme: theme,\n        themePreset: themePreset\n      }, (0, _utils.isFunction)(renderError) ? renderError(error) : renderError);\n    }\n\n    return null;\n  };\n\n  this.getComponent = function () {\n    var downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var isQuerySuggestionsRender = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var _props11 = _this4.props,\n        error = _props11.error,\n        isLoading = _props11.isLoading,\n        aggregationData = _props11.aggregationData,\n        promotedResults = _props11.promotedResults,\n        customData = _props11.customData,\n        rawData = _props11.rawData;\n    var currentValue = _this4.state.currentValue;\n    var data = {\n      error: error,\n      loading: isLoading,\n      downshiftProps: downshiftProps,\n      data: _this4.parsedSuggestions,\n      promotedData: promotedResults || [],\n      customData: customData || {},\n      aggregationData: aggregationData || [],\n      rawData: rawData,\n      value: currentValue,\n      triggerClickAnalytics: _this4.triggerClickAnalytics,\n      resultStats: _this4.stats,\n      querySuggestions: _this4.topSuggestions\n    };\n\n    if (isQuerySuggestionsRender) {\n      return (0, _utils.getQuerySuggestionsComponent)({\n        downshiftProps: downshiftProps,\n        data: _this4.topSuggestions,\n        value: currentValue,\n        loading: isLoading,\n        error: error\n      }, _this4.props);\n    }\n\n    return (0, _utils.getComponent)(data, _this4.props);\n  };\n\n  this.triggerClickAnalytics = function (searchPosition, documentId) {\n    var docId = documentId;\n\n    if (!docId) {\n      var hitData = _this4.parsedSuggestions.find(function (hit) {\n        return hit._click_id === searchPosition;\n      });\n\n      if (hitData && hitData.source && hitData.source._id) {\n        docId = hitData.source._id;\n      }\n    }\n\n    _this4.props.triggerAnalytics(searchPosition, docId);\n  };\n\n  this.withTriggerQuery = function (func) {\n    if (func) {\n      return function (e) {\n        return func(e, _this4.triggerQuery);\n      };\n    }\n\n    return undefined;\n  };\n};\n\nDataSearch.propTypes = {\n  setQueryOptions: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  options: _types2.default.options,\n  selectedValue: _types2.default.selectedValue,\n  suggestions: _types2.default.suggestions,\n  rawData: _types2.default.rawData,\n  aggregationData: _types2.default.aggregationData,\n  setCustomQuery: _types2.default.funcRequired,\n  setDefaultQuery: _types2.default.funcRequired,\n  setCustomHighlightOptions: _types2.default.funcRequired,\n  setSuggestionsSearchValue: _types2.default.funcRequired,\n  triggerAnalytics: _types2.default.funcRequired,\n  error: _types2.default.title,\n  isLoading: _types2.default.bool,\n  config: _types2.default.props,\n  lastUsedQuery: _types2.default.string,\n  // component props\n  autoFocus: _types2.default.bool,\n  autosuggest: _types2.default.bool,\n  enableSynonyms: _types2.default.bool,\n  enableQuerySuggestions: _types2.default.bool,\n  queryString: _types2.default.bool,\n  beforeValueChange: _types2.default.func,\n  className: _types2.default.string,\n  clearIcon: _types2.default.children,\n  componentId: _types2.default.stringRequired,\n  customHighlight: _types2.default.func,\n  customQuery: _types2.default.func,\n  defaultQuery: _types2.default.func,\n  dataField: _types2.default.dataFieldValidator,\n  aggregationField: _types2.default.string,\n  size: _types2.default.number,\n  debounce: _types2.default.number,\n  defaultValue: _types2.default.string,\n  value: _types2.default.string,\n  defaultSuggestions: _types2.default.suggestions,\n  promotedResults: _types2.default.hits,\n  customData: _types2.default.title,\n  downShiftProps: _types2.default.props,\n  children: _types2.default.func,\n  excludeFields: _types2.default.excludeFields,\n  fieldWeights: _types2.default.fieldWeights,\n  filterLabel: _types2.default.string,\n  fuzziness: _types2.default.fuzziness,\n  highlight: _types2.default.bool,\n  highlightField: _types2.default.stringOrArray,\n  icon: _types2.default.children,\n  iconPosition: _types2.default.iconPosition,\n  innerClass: _types2.default.style,\n  includeFields: _types2.default.includeFields,\n  loader: _types2.default.title,\n  nestedField: _types2.default.string,\n  onError: _types2.default.func,\n  onBlur: _types2.default.func,\n  onFocus: _types2.default.func,\n  onKeyDown: _types2.default.func,\n  onKeyPress: _types2.default.func,\n  onKeyUp: _types2.default.func,\n  onQueryChange: _types2.default.func,\n  onSuggestions: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  onValueSelected: _types2.default.func,\n  placeholder: _types2.default.string,\n  queryFormat: _types2.default.queryFormatSearch,\n  querySuggestions: _types2.default.hits,\n  react: _types2.default.react,\n  render: _types2.default.func,\n  renderQuerySuggestions: _types2.default.func,\n  renderError: _types2.default.title,\n  parseSuggestion: _types2.default.func,\n  renderNoSuggestion: _types2.default.title,\n  showClear: _types2.default.bool,\n  showDistinctSuggestions: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  showIcon: _types2.default.bool,\n  showVoiceSearch: _types2.default.bool,\n  style: _types2.default.style,\n  title: _types2.default.title,\n  theme: _types2.default.style,\n  themePreset: _types2.default.themePreset,\n  URLParams: _types2.default.bool,\n  strictSelection: _types2.default.bool,\n  searchOperators: _types2.default.bool,\n  // Mic props\n  getMicInstance: _types2.default.func,\n  renderMic: _types2.default.func\n};\nDataSearch.defaultProps = {\n  autosuggest: true,\n  className: null,\n  debounce: 0,\n  downShiftProps: {},\n  enableSynonyms: true,\n  enableQuerySuggestions: false,\n  excludeFields: [],\n  iconPosition: 'left',\n  includeFields: ['*'],\n  placeholder: 'Search',\n  queryFormat: 'or',\n  showFilter: true,\n  showIcon: true,\n  showVoiceSearch: false,\n  style: {},\n  URLParams: false,\n  showClear: false,\n  showDistinctSuggestions: true,\n  strictSelection: false,\n  searchOperators: false,\n  size: 10\n}; // Add componentType for SSR\n\nDataSearch.componentType = _constants.componentTypes.dataSearch;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    suggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n    rawData: state.rawData[props.componentId],\n    aggregationData: state.compositeAggregations[props.componentId],\n    themePreset: state.config.themePreset,\n    isLoading: state.isLoading[props.componentId] || false,\n    error: state.error[props.componentId],\n    config: state.config,\n    promotedResults: state.promotedResults[props.componentId],\n    customData: state.customData[props.componentId],\n    time: state.hits[props.componentId] && state.hits[props.componentId].time || 0,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n    querySuggestions: state.querySuggestions[props.componentId],\n    lastUsedQuery: state.queryToHits[props.componentId]\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setCustomHighlightOptions: function setCustomHighlightOptions(component, options) {\n      return dispatch((0, _actions.setCustomHighlightOptions)(component, options));\n    },\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    setDefaultQuery: function setDefaultQuery(component, query) {\n      return dispatch((0, _actions.setDefaultQuery)(component, query));\n    },\n    setSuggestionsSearchValue: function setSuggestionsSearchValue(value) {\n      return dispatch((0, _actions.setSuggestionsSearchValue)(value));\n    },\n    setQueryOptions: function setQueryOptions(component, props) {\n      return dispatch((0, _actions.setQueryOptions)(component, props));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    triggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n      return dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return (0, _core.jsx)(_ComponentWrapper2.default, _extends({}, props, {\n    internalComponent: true,\n    componentType: _constants.componentTypes.dataSearch\n  }), function () {\n    return (0, _core.jsx)(DataSearch, _extends({\n      ref: props.myForwardedRef\n    }, props));\n  });\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, DataSearch);\nForwardRefComponent.name = 'DataSearch';\nexports.default = ForwardRefComponent;","map":{"version":3,"sources":["/Users/rogetgeoffroy/Desktop/Folders/react_js_folder/react-live-search-app/live-search/node_modules/@appbaseio/reactivesearch/lib/components/search/DataSearch.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_core","require","_react","_react2","_interopRequireDefault","_downshift","_downshift2","_emotionTheming","_actions","_hoistNonReactStatics","_hoistNonReactStatics2","_helper","_transform","_constants","_types","_types2","_causes","_causes2","_Title","_Title2","_Input","_Input2","_SearchSvg","_SearchSvg2","_CancelSvg","_CancelSvg2","_InputIcon","_InputIcon2","_Container","_Container2","_utils","_SuggestionItem","_SuggestionItem2","_SuggestionWrapper","_SuggestionWrapper2","_Mic","_Mic2","_ComponentWrapper","_ComponentWrapper2","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","DataSearch","_Component","_this","_initialiseProps","currentValue","selectedValue","defaultValue","state","suggestions","isOpen","internalComponent","getInternalComponentID","componentId","isPending","queryOptions","getBasicQueryOptions","updateCustomQuery","updateDefaultQuery","highlight","highlightQuery","customHighlight","setCustomHighlightOptions","setQueryOptions","hasMounted","cause","onChange","triggerQuery","setValue","componentDidUpdate","prevProps","_this2","checkSomePropChange","isQueryIdentical","updateQuery","Array","isArray","trim","onSuggestions","setState","undefined","_props","shouldMicRender","showVoiceSearch","window","webkitSpeechRecognition","SpeechRecognition","render","_this3","suggestionsList","parsedSuggestions","_props2","theme","themePreset","size","jsx","style","className","title","getClassName","innerClass","defaultSuggestions","autosuggest","id","onSuggestionSelected","onStateChange","handleStateChange","itemToString","_ref","getRootProps","getInputProps","getItemProps","highlightedIndex","rest","css","suggestionsContainer","suppressRefError","showIcon","showClear","iconPosition","ref","c","_inputRef","placeholder","onInputChange","onBlur","withTriggerQuery","onFocus","handleFocus","onKeyPress","onKeyDown","e","handleKeyDown","onKeyUp","renderIcons","hasCustomRenderer","getComponent","renderLoader","renderError","hasQuerySuggestionsRenderer","topSuggestions","map","sugg","index","item","backgroundColor","getBackgroundColor","suggestion","slice","renderNoSuggestion","downShiftProps","autoFocus","get","getResultStats","withClickIds","_props3","enableQuerySuggestions","querySuggestions","showDistinctSuggestions","getTopSuggestions","Component","fields","highlightField","dataField","forEach","pre_tags","post_tags","require_field_match","defaultQuery","finalQuery","queryString","query_string","shouldQuery","searchOperators","simple_query_string","bool","should","minimum_should_match","nestedField","nested","path","query","dataFields","field","fieldWeights","default_operator","queryFormat","multi_match","type","operator","fuzziness","_this4","aggregationField","getQueryOptions","aggs","getCompositeAggsQuery","results","handleOnSuggestions","isDefaultValue","toggleIsOpen","performUpdate","strictSelection","SUGGESTION_SELECT","handleTextChange","onValueChange","lastUsedQuery","checkValueChange","beforeValueChange","debounce","defaultQueryOptions","defaultQueryTobeSet","getOptionsFromQuery","setSuggestionsSearchValue","componentType","componentTypes","dataSearch","customQuery","filterLabel","showFilter","URLParams","customQueryOptions","customQueryTobeSet","queryTobeSet","label","event","clearValue","onValueSelected","CLEAR_VALUE","_props4","ENTER_PRESS","inputValue","_props5","handleCaretPosition","_props6","triggerClickAnalytics","_click_id","_len","_key","apply","concat","changes","stateChangeTypes","mouseUp","isDark","handleSearchIconClick","SEARCH_ICON_CLICK","handleVoiceResults","_ref2","isFinal","transcript","focus","renderIcon","icon","renderCancelIcon","clearIcon","_props7","renderMic","getMicInstance","onClick","isClearIcon","getInstance","onResult","applyClearStyle","finalSuggestionsList","_props8","isLoading","error","_state","innerClassName","_props9","loader","_props10","isFunction","downshiftProps","isQuerySuggestionsRender","_props11","aggregationData","promotedResults","customData","rawData","data","loading","promotedData","resultStats","stats","getQuerySuggestionsComponent","searchPosition","documentId","docId","hitData","find","hit","_id","triggerAnalytics","func","propTypes","funcRequired","options","setCustomQuery","setDefaultQuery","config","string","enableSynonyms","children","stringRequired","dataFieldValidator","number","hits","excludeFields","stringOrArray","includeFields","onError","onQueryChange","queryFormatSearch","react","renderQuerySuggestions","parseSuggestion","defaultProps","mapStateToProps","selectedValues","compositeAggregations","time","total","hidden","queryToHits","mapDispatchtoProps","dispatch","component","updateQueryObject","recordSuggestionClick","ConnectedComponent","connect","withTheme","myForwardedRef","ForwardRefComponent","forwardRef","name"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;;AAEA,IAAIC,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,SAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,SAAOL,MAAP;AAAgB,CAAhQ;;AAEA,IAAIS,YAAY,GAAG,YAAY;AAAE,WAASC,gBAAT,CAA0BV,MAA1B,EAAkCW,KAAlC,EAAyC;AAAE,SAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGU,KAAK,CAACR,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;AAAE,UAAIW,UAAU,GAAGD,KAAK,CAACV,CAAD,CAAtB;AAA2BW,MAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,MAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,UAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4BjB,MAAAA,MAAM,CAACkB,cAAP,CAAsBhB,MAAtB,EAA8BY,UAAU,CAACP,GAAzC,EAA8CO,UAA9C;AAA4D;AAAE;;AAAC,SAAO,UAAUK,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,QAAID,UAAJ,EAAgBR,gBAAgB,CAACO,WAAW,CAACX,SAAb,EAAwBY,UAAxB,CAAhB;AAAqD,QAAIC,WAAJ,EAAiBT,gBAAgB,CAACO,WAAD,EAAcE,WAAd,CAAhB;AAA4C,WAAOF,WAAP;AAAqB,GAAhN;AAAmN,CAA9hB,EAAnB;;AAEA,IAAIG,KAAK,GAAGC,OAAO,CAAC,eAAD,CAAnB;;AAEA,IAAIC,MAAM,GAAGD,OAAO,CAAC,OAAD,CAApB;;AAEA,IAAIE,OAAO,GAAGC,sBAAsB,CAACF,MAAD,CAApC;;AAEA,IAAIG,UAAU,GAAGJ,OAAO,CAAC,WAAD,CAAxB;;AAEA,IAAIK,WAAW,GAAGF,sBAAsB,CAACC,UAAD,CAAxC;;AAEA,IAAIE,eAAe,GAAGN,OAAO,CAAC,iBAAD,CAA7B;;AAEA,IAAIO,QAAQ,GAAGP,OAAO,CAAC,qCAAD,CAAtB;;AAEA,IAAIQ,qBAAqB,GAAGR,OAAO,CAAC,yBAAD,CAAnC;;AAEA,IAAIS,sBAAsB,GAAGN,sBAAsB,CAACK,qBAAD,CAAnD;;AAEA,IAAIE,OAAO,GAAGV,OAAO,CAAC,0CAAD,CAArB;;AAEA,IAAIW,UAAU,GAAGX,OAAO,CAAC,6CAAD,CAAxB;;AAEA,IAAIY,UAAU,GAAGZ,OAAO,CAAC,6CAAD,CAAxB;;AAEA,IAAIa,MAAM,GAAGb,OAAO,CAAC,yCAAD,CAApB;;AAEA,IAAIc,OAAO,GAAGX,sBAAsB,CAACU,MAAD,CAApC;;AAEA,IAAIE,OAAO,GAAGf,OAAO,CAAC,0CAAD,CAArB;;AAEA,IAAIgB,QAAQ,GAAGb,sBAAsB,CAACY,OAAD,CAArC;;AAEA,IAAIE,MAAM,GAAGjB,OAAO,CAAC,oBAAD,CAApB;;AAEA,IAAIkB,OAAO,GAAGf,sBAAsB,CAACc,MAAD,CAApC;;AAEA,IAAIE,MAAM,GAAGnB,OAAO,CAAC,oBAAD,CAApB;;AAEA,IAAIoB,OAAO,GAAGjB,sBAAsB,CAACgB,MAAD,CAApC;;AAEA,IAAIE,UAAU,GAAGrB,OAAO,CAAC,qBAAD,CAAxB;;AAEA,IAAIsB,WAAW,GAAGnB,sBAAsB,CAACkB,UAAD,CAAxC;;AAEA,IAAIE,UAAU,GAAGvB,OAAO,CAAC,qBAAD,CAAxB;;AAEA,IAAIwB,WAAW,GAAGrB,sBAAsB,CAACoB,UAAD,CAAxC;;AAEA,IAAIE,UAAU,GAAGzB,OAAO,CAAC,wBAAD,CAAxB;;AAEA,IAAI0B,WAAW,GAAGvB,sBAAsB,CAACsB,UAAD,CAAxC;;AAEA,IAAIE,UAAU,GAAG3B,OAAO,CAAC,wBAAD,CAAxB;;AAEA,IAAI4B,WAAW,GAAGzB,sBAAsB,CAACwB,UAAD,CAAxC;;AAEA,IAAIE,MAAM,GAAG7B,OAAO,CAAC,aAAD,CAApB;;AAEA,IAAI8B,eAAe,GAAG9B,OAAO,CAAC,yBAAD,CAA7B;;AAEA,IAAI+B,gBAAgB,GAAG5B,sBAAsB,CAAC2B,eAAD,CAA7C;;AAEA,IAAIE,kBAAkB,GAAGhC,OAAO,CAAC,4BAAD,CAAhC;;AAEA,IAAIiC,mBAAmB,GAAG9B,sBAAsB,CAAC6B,kBAAD,CAAhD;;AAEA,IAAIE,IAAI,GAAGlC,OAAO,CAAC,cAAD,CAAlB;;AAEA,IAAImC,KAAK,GAAGhC,sBAAsB,CAAC+B,IAAD,CAAlC;;AAEA,IAAIE,iBAAiB,GAAGpC,OAAO,CAAC,2BAAD,CAA/B;;AAEA,IAAIqC,kBAAkB,GAAGlC,sBAAsB,CAACiC,iBAAD,CAA/C;;AAEA,SAASjC,sBAAT,CAAgCmC,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAAC/D,UAAX,GAAwB+D,GAAxB,GAA8B;AAAEC,IAAAA,OAAO,EAAED;AAAX,GAArC;AAAwD;;AAE/F,SAASE,wBAAT,CAAkCF,GAAlC,EAAuCG,IAAvC,EAA6C;AAAE,MAAI9D,MAAM,GAAG,EAAb;;AAAiB,OAAK,IAAIC,CAAT,IAAc0D,GAAd,EAAmB;AAAE,QAAIG,IAAI,CAACC,OAAL,CAAa9D,CAAb,KAAmB,CAAvB,EAA0B;AAAU,QAAI,CAACH,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCmD,GAArC,EAA0C1D,CAA1C,CAAL,EAAmD;AAAUD,IAAAA,MAAM,CAACC,CAAD,CAAN,GAAY0D,GAAG,CAAC1D,CAAD,CAAf;AAAqB;;AAAC,SAAOD,MAAP;AAAgB;;AAE5N,SAASgE,eAAT,CAAyBC,QAAzB,EAAmChD,WAAnC,EAAgD;AAAE,MAAI,EAAEgD,QAAQ,YAAYhD,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIiD,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,0BAAT,CAAoCC,IAApC,EAA0C5D,IAA1C,EAAgD;AAAE,MAAI,CAAC4D,IAAL,EAAW;AAAE,UAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAO7D,IAAI,KAAK,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAJ,GAAmEA,IAAnE,GAA0E4D,IAAjF;AAAwF;;AAEhP,SAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,UAAM,IAAIN,SAAJ,CAAc,6DAA6D,OAAOM,UAAlF,CAAN;AAAsG;;AAACD,EAAAA,QAAQ,CAACjE,SAAT,GAAqBR,MAAM,CAAC2E,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAAClE,SAAvC,EAAkD;AAAEoE,IAAAA,WAAW,EAAE;AAAEC,MAAAA,KAAK,EAAEJ,QAAT;AAAmB1D,MAAAA,UAAU,EAAE,KAA/B;AAAsCE,MAAAA,QAAQ,EAAE,IAAhD;AAAsDD,MAAAA,YAAY,EAAE;AAApE;AAAf,GAAlD,CAArB;AAAqK,MAAI0D,UAAJ,EAAgB1E,MAAM,CAAC8E,cAAP,GAAwB9E,MAAM,CAAC8E,cAAP,CAAsBL,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,QAAQ,CAACM,SAAT,GAAqBL,UAA3F;AAAwG;AAAC;;;AAG/e,IAAIM,UAAU,GAAG,UAAUC,UAAV,EAAsB;AACtCT,EAAAA,SAAS,CAACQ,UAAD,EAAaC,UAAb,CAAT;;AAEA,WAASD,UAAT,CAAoBnE,KAApB,EAA2B;AAC1BqD,IAAAA,eAAe,CAAC,IAAD,EAAOc,UAAP,CAAf;;AAEA,QAAIE,KAAK,GAAGb,0BAA0B,CAAC,IAAD,EAAOY,UAAU,CAACvE,IAAX,CAAgB,IAAhB,EAAsBG,KAAtB,CAAP,CAAtC;;AAEAsE,IAAAA,gBAAgB,CAACzE,IAAjB,CAAsBwE,KAAtB;;AAEA,QAAIE,YAAY,GAAGvE,KAAK,CAACwE,aAAN,IAAuBxE,KAAK,CAACgE,KAA7B,IAAsChE,KAAK,CAACyE,YAA5C,IAA4D,EAA/E;AAEAJ,IAAAA,KAAK,CAACK,KAAN,GAAc;AACbH,MAAAA,YAAY,EAAEA,YADD;AAEbI,MAAAA,WAAW,EAAE,EAFA;AAGbC,MAAAA,MAAM,EAAE;AAHK,KAAd;AAKAP,IAAAA,KAAK,CAACQ,iBAAN,GAA0B,CAAC,GAAGxD,UAAU,CAACyD,sBAAf,EAAuC9E,KAAK,CAAC+E,WAA7C,CAA1B;AACA;;;;;AAIAV,IAAAA,KAAK,CAACW,SAAN,GAAkB,KAAlB;AACAX,IAAAA,KAAK,CAACY,YAAN,GAAqBZ,KAAK,CAACa,oBAAN,EAArB,CApB0B,CAqB1B;;AACA,KAAC,GAAG9D,OAAO,CAAC+D,iBAAZ,EAA+BnF,KAAK,CAAC+E,WAArC,EAAkD/E,KAAlD,EAAyDuE,YAAzD;AACA,KAAC,GAAGnD,OAAO,CAACgE,kBAAZ,EAAgCpF,KAAK,CAAC+E,WAAtC,EAAmD/E,KAAnD,EAA0DuE,YAA1D;;AACA,QAAIvE,KAAK,CAACqF,SAAV,EAAqB;AACpB,UAAIJ,YAAY,GAAGd,UAAU,CAACmB,cAAX,CAA0BtF,KAA1B,KAAoC,EAAvD;;AACA,UAAIA,KAAK,CAACuF,eAAN,IAAyB,OAAOvF,KAAK,CAACuF,eAAb,KAAiC,UAA9D,EAA0E;AACzEvF,QAAAA,KAAK,CAACwF,yBAAN,CAAgCxF,KAAK,CAAC+E,WAAtC,EAAmD/E,KAAK,CAACuF,eAAN,CAAsBvF,KAAtB,CAAnD;AACA;;AACDqE,MAAAA,KAAK,CAACY,YAAN,GAAqB/F,QAAQ,CAAC,EAAD,EAAK+F,YAAL,EAAmBZ,KAAK,CAACa,oBAAN,EAAnB,CAA7B;AACAlF,MAAAA,KAAK,CAACyF,eAAN,CAAsBzF,KAAK,CAAC+E,WAA5B,EAAyCE,YAAzC;AACA,KAPD,MAOO;AACNjF,MAAAA,KAAK,CAACyF,eAAN,CAAsBzF,KAAK,CAAC+E,WAA5B,EAAyCV,KAAK,CAACY,YAA/C;AACA;;AAED,QAAIS,UAAU,GAAG,KAAjB;AACA,QAAIC,KAAK,GAAG,IAAZ;;AAEA,QAAIpB,YAAJ,EAAkB;AACjB,UAAIvE,KAAK,CAAC4F,QAAV,EAAoB;AACnB5F,QAAAA,KAAK,CAAC4F,QAAN,CAAerB,YAAf,EAA6BF,KAAK,CAACwB,YAAnC;AACA;;AACDxB,MAAAA,KAAK,CAACyB,QAAN,CAAevB,YAAf,EAA6B,IAA7B,EAAmCvE,KAAnC,EAA0C2F,KAA1C,EAAiDD,UAAjD;AACA;;AACD,WAAOrB,KAAP;AACA;;AAEDF,EAAAA,UAAU,CAACxE,SAAX,CAAqBoG,kBAArB,GAA0C,SAASA,kBAAT,CAA4BC,SAA5B,EAAuC;AAChF,QAAIC,MAAM,GAAG,IAAb;;AAEA,KAAC,GAAG7E,OAAO,CAAC8E,mBAAZ,EAAiC,KAAKlG,KAAtC,EAA6CgG,SAA7C,EAAwD,CAAC,WAAD,EAAc,WAAd,EAA2B,gBAA3B,EAA6C,kBAA7C,CAAxD,EAA0H,YAAY;AACrI,UAAIf,YAAY,GAAGd,UAAU,CAACmB,cAAX,CAA0BW,MAAM,CAACjG,KAAjC,KAA2C,EAA9D;;AACA,UAAIiG,MAAM,CAACjG,KAAP,CAAauF,eAAb,IAAgC,OAAOU,MAAM,CAACjG,KAAP,CAAauF,eAApB,KAAwC,UAA5E,EAAwF;AACvFU,QAAAA,MAAM,CAACjG,KAAP,CAAawF,yBAAb,CAAuCS,MAAM,CAACjG,KAAP,CAAa+E,WAApD,EAAiEkB,MAAM,CAACjG,KAAP,CAAauF,eAAb,CAA6BU,MAAM,CAACjG,KAApC,CAAjE;AACA;;AACDiG,MAAAA,MAAM,CAAChB,YAAP,GAAsB/F,QAAQ,CAAC,EAAD,EAAK+F,YAAL,EAAmBgB,MAAM,CAACf,oBAAP,EAAnB,CAA9B;;AACAe,MAAAA,MAAM,CAACjG,KAAP,CAAayF,eAAb,CAA6BQ,MAAM,CAACjG,KAAP,CAAa+E,WAA1C,EAAuDE,YAAvD;AACA,KAPD,EAHgF,CAYhF;;AACA,QAAI,CAAC,CAAC,GAAG1C,MAAM,CAAC4D,gBAAX,EAA6B,KAAKzB,KAAL,CAAWH,YAAxC,EAAsD,KAAKvE,KAA3D,EAAkEgG,SAAlE,EAA6E,cAA7E,CAAL,EAAmG;AAClG,WAAKZ,kBAAL,CAAwB,KAAKV,KAAL,CAAWH,YAAnC,EAAiD,KAAKvE,KAAtD;AACA,WAAKoG,WAAL,CAAiB,KAAK1B,KAAL,CAAWH,YAA5B,EAA0C,KAAKvE,KAA/C;AACA;;AAED,QAAI,CAAC,CAAC,GAAGuC,MAAM,CAAC4D,gBAAX,EAA6B,KAAKzB,KAAL,CAAWH,YAAxC,EAAsD,KAAKvE,KAA3D,EAAkEgG,SAAlE,EAA6E,aAA7E,CAAL,EAAkG;AACjG,WAAKI,WAAL,CAAiB,KAAK1B,KAAL,CAAWH,YAA5B,EAA0C,KAAKvE,KAA/C;AACA;;AAED,QAAIqG,KAAK,CAACC,OAAN,CAAc,KAAKtG,KAAL,CAAW2E,WAAzB,KAAyC,KAAKD,KAAL,CAAWH,YAAX,CAAwBgC,IAAxB,GAA+B/G,MAA5E,EAAoF;AACnF;AACA;AACA,UAAI,KAAKQ,KAAL,CAAW2E,WAAX,KAA2BqB,SAAS,CAACrB,WAAzC,EAAsD;AACrD,YAAI,KAAK3E,KAAL,CAAWwG,aAAf,EAA8B;AAC7B,eAAKxG,KAAL,CAAWwG,aAAX,CAAyB,KAAKxG,KAAL,CAAW2E,WAApC;AACA,SAHoD,CAIrD;;;AACA,aAAK8B,QAAL,CAAc;AACb9B,UAAAA,WAAW,EAAE,KAAK6B,aAAL,CAAmB,KAAKxG,KAAL,CAAW2E,WAA9B;AADA,SAAd;AAGA;AACD;;AAED,KAAC,GAAGvD,OAAO,CAAC8E,mBAAZ,EAAiC,KAAKlG,KAAtC,EAA6CgG,SAA7C,EAAwD,CAAC,cAAD,EAAiB,WAAjB,EAA8B,aAA9B,EAA6C,WAA7C,EAA0D,aAA1D,EAAyE,iBAAzE,CAAxD,EAAqJ,YAAY;AAChKC,MAAAA,MAAM,CAACG,WAAP,CAAmBH,MAAM,CAACvB,KAAP,CAAaH,YAAhC,EAA8C0B,MAAM,CAACjG,KAArD;AACA,KAFD;;AAGA,QAAI,KAAKA,KAAL,CAAWgE,KAAX,KAAqBgC,SAAS,CAAChC,KAAnC,EAA0C;AACzC,WAAK8B,QAAL,CAAc,KAAK9F,KAAL,CAAWgE,KAAzB,EAAgC,IAAhC,EAAsC,KAAKhE,KAA3C,EAAkD0G,SAAlD,EAA6DA,SAA7D,EAAwE,KAAxE;AACA,KAFD,MAEO,KACP;AACA;AACA;AACA;AACA,SAAK1G,KAAL,CAAWwE,aAAX,KAA6BwB,SAAS,CAACxB,aAAvC,IAAwD,KAAKE,KAAL,CAAWH,YAAX,KAA4B,KAAKvE,KAAL,CAAWwE,aALxF,EAKuG;AAC7G,UAAImC,MAAM,GAAG,KAAK3G,KAAlB;AAAA,UACIgE,KAAK,GAAG2C,MAAM,CAAC3C,KADnB;AAAA,UAEI4B,QAAQ,GAAGe,MAAM,CAACf,QAFtB;;AAIA,UAAI5B,KAAK,KAAK0C,SAAd,EAAyB;AACxB,aAAKZ,QAAL,CAAc,KAAK9F,KAAL,CAAWwE,aAAX,IAA4B,EAA1C,EAA8C,IAA9C,EAAoD,KAAKxE,KAAzD;AACA,OAFD,MAEO,IAAI4F,QAAJ,EAAc;AACpB;AACAA,QAAAA,QAAQ,CAAC,KAAK5F,KAAL,CAAWwE,aAAX,IAA4B,EAA7B,EAAiC,KAAKqB,YAAtC,CAAR;AACA,OAHM,MAGA;AACN;AACA;AACA;AACA;AACA,aAAKb,SAAL,GAAiB,KAAjB;AACA,aAAKc,QAAL,CAAc,KAAKpB,KAAL,CAAWH,YAAzB,EAAuC,IAAvC,EAA6C,KAAKvE,KAAlD;AACA;AACD;AACD,GAjED,CAlDsC,CAqHtC;;;AAGAmE,EAAAA,UAAU,CAACxE,SAAX,CAAqBiH,eAArB,GAAuC,SAASA,eAAT,CAAyBC,eAAzB,EAA0C;AAChF;AACA,QAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC,OAAO,KAAP;AACnC,WAAOD,eAAe,KAAKC,MAAM,CAACC,uBAAP,IAAkCD,MAAM,CAACE,iBAA9C,CAAtB;AACA,GAJD;;AAMA7C,EAAAA,UAAU,CAACxE,SAAX,CAAqBsH,MAArB,GAA8B,SAASA,MAAT,GAAkB;AAC/C,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAI3C,YAAY,GAAG,KAAKG,KAAL,CAAWH,YAA9B;AAEA,QAAI4C,eAAe,GAAG,KAAKC,iBAA3B;AACA,QAAIC,OAAO,GAAG,KAAKrH,KAAnB;AAAA,QACIsH,KAAK,GAAGD,OAAO,CAACC,KADpB;AAAA,QAEIC,WAAW,GAAGF,OAAO,CAACE,WAF1B;AAAA,QAGIC,IAAI,GAAGH,OAAO,CAACG,IAHnB;AAKA,WAAO,CAAC,GAAG/G,KAAK,CAACgH,GAAV,EACNnF,WAAW,CAACW,OADN,EAEN;AAAEyE,MAAAA,KAAK,EAAE,KAAK1H,KAAL,CAAW0H,KAApB;AAA2BC,MAAAA,SAAS,EAAE,KAAK3H,KAAL,CAAW2H;AAAjD,KAFM,EAGN,KAAK3H,KAAL,CAAW4H,KAAX,IAAoB,CAAC,GAAGnH,KAAK,CAACgH,GAAV,EACnB7F,OAAO,CAACqB,OADW,EAEnB;AAAE0E,MAAAA,SAAS,EAAE,CAAC,GAAGvG,OAAO,CAACyG,YAAZ,EAA0B,KAAK7H,KAAL,CAAW8H,UAArC,EAAiD,OAAjD,KAA6D;AAA1E,KAFmB,EAGnB,KAAK9H,KAAL,CAAW4H,KAHQ,CAHd,EAQN,KAAK5H,KAAL,CAAW+H,kBAAX,IAAiC,KAAK/H,KAAL,CAAWgI,WAA5C,GAA0D,CAAC,GAAGvH,KAAK,CAACgH,GAAV,EAAe1G,WAAW,CAACkC,OAA3B,EAAoC/D,QAAQ,CAAC;AACtG+I,MAAAA,EAAE,EAAE,KAAKjI,KAAL,CAAW+E,WAAX,GAAyB,YADyE;AAEtGa,MAAAA,QAAQ,EAAE,KAAKsC,oBAFuF;AAGtGC,MAAAA,aAAa,EAAE,KAAKC,iBAHkF;AAItGxD,MAAAA,MAAM,EAAE,KAAKF,KAAL,CAAWE,MAJmF;AAKtGyD,MAAAA,YAAY,EAAE,SAASA,YAAT,CAAsB/I,CAAtB,EAAyB;AACtC,eAAOA,CAAP;AACA,OAPqG;AAQtG2H,MAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBqB,IAAhB,EAAsB;AAC7B,YAAIC,YAAY,GAAGD,IAAI,CAACC,YAAxB;AAAA,YACIC,aAAa,GAAGF,IAAI,CAACE,aADzB;AAAA,YAEIC,YAAY,GAAGH,IAAI,CAACG,YAFxB;AAAA,YAGI7D,MAAM,GAAG0D,IAAI,CAAC1D,MAHlB;AAAA,YAII8D,gBAAgB,GAAGJ,IAAI,CAACI,gBAJ5B;AAAA,YAKIC,IAAI,GAAGzF,wBAAwB,CAACoF,IAAD,EAAO,CAAC,cAAD,EAAiB,eAAjB,EAAkC,cAAlC,EAAkD,QAAlD,EAA4D,kBAA5D,CAAP,CALnC;;AAOA,eAAO,CAAC,GAAG7H,KAAK,CAACgH,GAAV,EACN,KADM,EAENc,YAAY,CAAC;AAAEK,UAAAA,GAAG,EAAE/G,MAAM,CAACgH;AAAd,SAAD,EAAuC;AAAEC,UAAAA,gBAAgB,EAAE;AAApB,SAAvC,CAFN,EAGN,CAAC,GAAGrI,KAAK,CAACgH,GAAV,EAAe3F,OAAO,CAACmB,OAAvB,EAAgC/D,QAAQ,CAAC;AACxC,wBAAcgI,MAAM,CAAClH,KAAP,CAAa+E,WADa;AAExCkD,UAAAA,EAAE,EAAEf,MAAM,CAAClH,KAAP,CAAa+E,WAAb,GAA2B,QAFS;AAGxCgE,UAAAA,QAAQ,EAAE7B,MAAM,CAAClH,KAAP,CAAa+I,QAHiB;AAIxCC,UAAAA,SAAS,EAAE9B,MAAM,CAAClH,KAAP,CAAagJ,SAJgB;AAKxCC,UAAAA,YAAY,EAAE/B,MAAM,CAAClH,KAAP,CAAaiJ,YALa;AAMxCC,UAAAA,GAAG,EAAE,SAASA,GAAT,CAAaC,CAAb,EAAgB;AACpBjC,YAAAA,MAAM,CAACkC,SAAP,GAAmBD,CAAnB;AACA;AARuC,SAAD,EASrCX,aAAa,CAAC;AAChBb,UAAAA,SAAS,EAAE,CAAC,GAAGvG,OAAO,CAACyG,YAAZ,EAA0BX,MAAM,CAAClH,KAAP,CAAa8H,UAAvC,EAAmD,OAAnD,CADK;AAEhBuB,UAAAA,WAAW,EAAEnC,MAAM,CAAClH,KAAP,CAAaqJ,WAFV;AAGhBrF,UAAAA,KAAK,EAAEkD,MAAM,CAACxC,KAAP,CAAaH,YAAb,KAA8B,IAA9B,GAAqC,EAArC,GAA0C2C,MAAM,CAACxC,KAAP,CAAaH,YAH9C;AAIhBqB,UAAAA,QAAQ,EAAEsB,MAAM,CAACoC,aAJD;AAKhBC,UAAAA,MAAM,EAAErC,MAAM,CAACsC,gBAAP,CAAwBtC,MAAM,CAAClH,KAAP,CAAauJ,MAArC,CALQ;AAMhBE,UAAAA,OAAO,EAAEvC,MAAM,CAACwC,WANA;AAOhBC,UAAAA,UAAU,EAAEzC,MAAM,CAACsC,gBAAP,CAAwBtC,MAAM,CAAClH,KAAP,CAAa2J,UAArC,CAPI;AAQhBC,UAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBC,CAAnB,EAAsB;AAChC,mBAAO3C,MAAM,CAAC4C,aAAP,CAAqBD,CAArB,EAAwBnB,gBAAxB,CAAP;AACA,WAVe;AAWhBqB,UAAAA,OAAO,EAAE7C,MAAM,CAACsC,gBAAP,CAAwBtC,MAAM,CAAClH,KAAP,CAAa+J,OAArC;AAXO,SAAD,CATwB,EAqBpC;AACHxC,UAAAA,WAAW,EAAEA;AADV,SArBoC,CAAxC,CAHM,EA2BNL,MAAM,CAAC8C,WAAP,EA3BM,EA4BN9C,MAAM,CAAC+C,iBAAP,IAA4B/C,MAAM,CAACgD,YAAP,CAAoBhL,QAAQ,CAAC;AACxDsJ,UAAAA,aAAa,EAAEA,aADyC;AAExDC,UAAAA,YAAY,EAAEA,YAF0C;AAGxD7D,UAAAA,MAAM,EAAEA,MAHgD;AAIxD8D,UAAAA,gBAAgB,EAAEA;AAJsC,SAAD,EAKrDC,IALqD,CAA5B,CA5BtB,EAkCNzB,MAAM,CAACiD,YAAP,EAlCM,EAmCNjD,MAAM,CAACkD,WAAP,EAnCM,EAoCN,CAAClD,MAAM,CAAC+C,iBAAR,IAA6BrF,MAA7B,IAAuCuC,eAAe,CAAC3H,MAAvD,GAAgE,CAAC,GAAGiB,KAAK,CAACgH,GAAV,EAC/D,IAD+D,EAE/D;AACCmB,UAAAA,GAAG,EAAE,CAAC,GAAG/G,MAAM,CAAC8C,WAAX,EAAwB4C,WAAxB,EAAqCD,KAArC,CADN;AAECK,UAAAA,SAAS,EAAE,CAAC,GAAGvG,OAAO,CAACyG,YAAZ,EAA0BX,MAAM,CAAClH,KAAP,CAAa8H,UAAvC,EAAmD,MAAnD;AAFZ,SAF+D,EAM/D,CAAC,GAAGvF,MAAM,CAAC8H,2BAAX,EAAwCnD,MAAM,CAAClH,KAA/C,IAAwDkH,MAAM,CAACgD,YAAP,CAAoBhL,QAAQ,CAAC;AACpFsJ,UAAAA,aAAa,EAAEA,aADqE;AAEpFC,UAAAA,YAAY,EAAEA,YAFsE;AAGpF7D,UAAAA,MAAM,EAAEA,MAH4E;AAIpF8D,UAAAA,gBAAgB,EAAEA;AAJkE,SAAD,EAKjFC,IALiF,CAA5B,EAK9C,IAL8C,CAAxD,GAKkBzB,MAAM,CAACoD,cAAP,CAAsBC,GAAtB,CAA0B,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AAClE,iBAAO,CAAC,GAAGhK,KAAK,CAACgH,GAAV,EACN,IADM,EAENvI,QAAQ,CAAC,EAAD,EAAKuJ,YAAY,CAAC;AAAEiC,YAAAA,IAAI,EAAEF;AAAR,WAAD,CAAjB,EAAmC;AAC1C9K,YAAAA,GAAG,EAAE+K,KAAK,GAAG,CAAR,GAAY,GAAZ,GAAkBD,IAAI,CAACxG,KADc;AAE1C0D,YAAAA,KAAK,EAAE;AACNiD,cAAAA,eAAe,EAAEzD,MAAM,CAAC0D,kBAAP,CAA0BlC,gBAA1B,EAA4C+B,KAA5C;AADX;AAFmC,WAAnC,CAFF,EAQN,CAAC,GAAGhK,KAAK,CAACgH,GAAV,EAAehF,gBAAgB,CAACQ,OAAhC,EAAyC;AACxCsB,YAAAA,YAAY,EAAEA,YAD0B;AAExCsG,YAAAA,UAAU,EAAEL;AAF4B,WAAzC,CARM,CAAP;AAaA,SAdiB,CAX6C,EA0B/DrD,eAAe,CAAC2D,KAAhB,CAAsB,CAAtB,EAAyBtD,IAAzB,EAA+B+C,GAA/B,CAAmC,UAAUG,IAAV,EAAgBD,KAAhB,EAAuB;AACzD,iBAAO,CAAC,GAAGhK,KAAK,CAACgH,GAAV,EACN,IADM,EAENvI,QAAQ,CAAC,EAAD,EAAKuJ,YAAY,CAAC;AAAEiC,YAAAA,IAAI,EAAEA;AAAR,WAAD,CAAjB,EAAmC;AAC1ChL,YAAAA,GAAG,EAAE+K,KAAK,GAAGvD,MAAM,CAACoD,cAAP,CAAsB9K,MAA9B,GAAuC,CAAvC,GAA2C,GAA3C,GAAiDkL,IAAI,CAAC1G,KADjB;AAE1C0D,YAAAA,KAAK,EAAE;AACNiD,cAAAA,eAAe,EAAEzD,MAAM,CAAC0D,kBAAP,CAA0BlC,gBAA1B,EAA4C+B,KAAK,GAAGvD,MAAM,CAACoD,cAAP,CAAsB9K,MAA1E;AADX;AAFmC,WAAnC,CAFF,EAQN,CAAC,GAAGiB,KAAK,CAACgH,GAAV,EAAehF,gBAAgB,CAACQ,OAAhC,EAAyC;AACxCsB,YAAAA,YAAY,EAAEA,YAD0B;AAExCsG,YAAAA,UAAU,EAAEH;AAF4B,WAAzC,CARM,CAAP;AAaA,SAdD,CA1B+D,CAAhE,GAyCIxD,MAAM,CAAC6D,kBAAP,CAA0B5D,eAA1B,CA7EE,CAAP;AA+EA;AA/FqG,KAAD,EAgGnG,KAAKnH,KAAL,CAAWgL,cAhGwF,CAA5C,CAA1D,GAgGiC,CAAC,GAAGvK,KAAK,CAACgH,GAAV,EAChC,KADgC,EAEhC;AAAEmB,MAAAA,GAAG,EAAE/G,MAAM,CAACgH;AAAd,KAFgC,EAGhC,CAAC,GAAGpI,KAAK,CAACgH,GAAV,EAAe3F,OAAO,CAACmB,OAAvB,EAAgC;AAC/B,oBAAc,KAAKjD,KAAL,CAAW+E,WADM;AAE/B4C,MAAAA,SAAS,EAAE,CAAC,GAAGvG,OAAO,CAACyG,YAAZ,EAA0B,KAAK7H,KAAL,CAAW8H,UAArC,EAAiD,OAAjD,KAA6D,IAFzC;AAG/BuB,MAAAA,WAAW,EAAE,KAAKrJ,KAAL,CAAWqJ,WAHO;AAI/BrF,MAAAA,KAAK,EAAE,KAAKU,KAAL,CAAWH,YAAX,GAA0B,KAAKG,KAAL,CAAWH,YAArC,GAAoD,EAJ5B;AAK/BqB,MAAAA,QAAQ,EAAE,KAAK0D,aALgB;AAM/BC,MAAAA,MAAM,EAAE,KAAKC,gBAAL,CAAsB,KAAKxJ,KAAL,CAAWuJ,MAAjC,CANuB;AAO/BE,MAAAA,OAAO,EAAE,KAAKD,gBAAL,CAAsB,KAAKxJ,KAAL,CAAWyJ,OAAjC,CAPsB;AAQ/BE,MAAAA,UAAU,EAAE,KAAKH,gBAAL,CAAsB,KAAKxJ,KAAL,CAAW2J,UAAjC,CARmB;AAS/BC,MAAAA,SAAS,EAAE,KAAKJ,gBAAL,CAAsB,KAAKxJ,KAAL,CAAW4J,SAAjC,CAToB;AAU/BG,MAAAA,OAAO,EAAE,KAAKP,gBAAL,CAAsB,KAAKxJ,KAAL,CAAW+J,OAAjC,CAVsB;AAW/BkB,MAAAA,SAAS,EAAE,KAAKjL,KAAL,CAAWiL,SAXS;AAY/BhC,MAAAA,YAAY,EAAE,KAAKjJ,KAAL,CAAWiJ,YAZM;AAa/BF,MAAAA,QAAQ,EAAE,KAAK/I,KAAL,CAAW+I,QAbU;AAc/BC,MAAAA,SAAS,EAAE,KAAKhJ,KAAL,CAAWgJ,SAdS;AAe/BzB,MAAAA,WAAW,EAAEA;AAfkB,KAAhC,CAHgC,EAoBhC,KAAKyC,WAAL,EApBgC,CAxG3B,CAAP;AA+HA,GA1ID;;AA4IAlK,EAAAA,YAAY,CAACqE,UAAD,EAAa,CAAC;AACzBzE,IAAAA,GAAG,EAAE,OADoB;AAEzBwL,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AACnB,aAAO,CAAC,GAAG9J,OAAO,CAAC+J,cAAZ,EAA4B,KAAKnL,KAAjC,CAAP;AACA;AAJwB,GAAD,EAKtB;AACFN,IAAAA,GAAG,EAAE,mBADH;AAEFwL,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AACnB,UAAI/D,eAAe,GAAG,EAAtB;AACA,UAAI5C,YAAY,GAAG,KAAKG,KAAL,CAAWH,YAA9B;AACA,UAAIwD,kBAAkB,GAAG,KAAK/H,KAAL,CAAW+H,kBAApC;;AAEA,UAAI,CAACxD,YAAD,IAAiBwD,kBAAjB,IAAuCA,kBAAkB,CAACvI,MAA9D,EAAsE;AACrE2H,QAAAA,eAAe,GAAGY,kBAAlB;AACA,OAFD,MAEO,IAAIxD,YAAJ,EAAkB;AACxB4C,QAAAA,eAAe,GAAG,KAAKzC,KAAL,CAAWC,WAA7B;AACA;;AACD,aAAO,CAAC,GAAGvD,OAAO,CAACgK,YAAZ,EAA0BjE,eAA1B,CAAP;AACA;AAbC,GALsB,EAmBtB;AACFzH,IAAAA,GAAG,EAAE,mBADH;AAEFwL,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AACnB,aAAO,CAAC,GAAG3I,MAAM,CAAC0H,iBAAX,EAA8B,KAAKjK,KAAnC,CAAP;AACA;AAJC,GAnBsB,EAwBtB;AACFN,IAAAA,GAAG,EAAE,gBADH;AAEFwL,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AACnB,UAAIG,OAAO,GAAG,KAAKrL,KAAnB;AAAA,UACIsL,sBAAsB,GAAGD,OAAO,CAACC,sBADrC;AAAA,UAEIC,gBAAgB,GAAGF,OAAO,CAACE,gBAF/B;AAAA,UAGIC,uBAAuB,GAAGH,OAAO,CAACG,uBAHtC;AAIA,UAAIjH,YAAY,GAAG,KAAKG,KAAL,CAAWH,YAA9B;AAEA,aAAO+G,sBAAsB,GAAG,CAAC,GAAGlK,OAAO,CAACqK,iBAAZ,EAA+BF,gBAA/B,EAAiDhH,YAAjD,EAA+DiH,uBAA/D,CAAH,GAA6F,EAA1H;AACA;AAVC,GAxBsB,CAAb,CAAZ;;AAqCA,SAAOrH,UAAP;AACA,CAhTgB,CAgTfxD,MAAM,CAAC+K,SAhTQ,CAAjB;;AAkTAvH,UAAU,CAACmB,cAAX,GAA4B,UAAUtF,KAAV,EAAiB;AAC5C,MAAIA,KAAK,CAACuF,eAAV,EAA2B;AAC1B,WAAOvF,KAAK,CAACuF,eAAN,CAAsBvF,KAAtB,CAAP;AACA;;AACD,MAAI,CAACA,KAAK,CAACqF,SAAX,EAAsB;AACrB,WAAO,IAAP;AACA;;AACD,MAAIsG,MAAM,GAAG,EAAb;AACA,MAAIC,cAAc,GAAG5L,KAAK,CAAC4L,cAAN,GAAuB5L,KAAK,CAAC4L,cAA7B,GAA8C5L,KAAK,CAAC6L,SAAzE;;AAEA,MAAI,OAAOD,cAAP,KAA0B,QAA9B,EAAwC;AACvCD,IAAAA,MAAM,CAACC,cAAD,CAAN,GAAyB,EAAzB;AACA,GAFD,MAEO,IAAIvF,KAAK,CAACC,OAAN,CAAcsF,cAAd,CAAJ,EAAmC;AACzCA,IAAAA,cAAc,CAACE,OAAf,CAAuB,UAAUpB,IAAV,EAAgB;AACtCiB,MAAAA,MAAM,CAACjB,IAAD,CAAN,GAAe,EAAf;AACA,KAFD;AAGA;;AAED,SAAO;AACNrF,IAAAA,SAAS,EAAEnG,QAAQ,CAAC;AACnB6M,MAAAA,QAAQ,EAAE,CAAC,QAAD,CADS;AAEnBC,MAAAA,SAAS,EAAE,CAAC,SAAD,CAFQ;AAGnBL,MAAAA,MAAM,EAAEA;AAHW,KAAD,EAIhB3L,KAAK,CAAC4L,cAAN,IAAwB;AAAEK,MAAAA,mBAAmB,EAAE;AAAvB,KAJR;AADb,GAAP;AAOA,CAzBD;;AA2BA9H,UAAU,CAAC+H,YAAX,GAA0B,UAAUlI,KAAV,EAAiBhE,KAAjB,EAAwB;AACjD,MAAImM,UAAU,GAAG,IAAjB;AACA,MAAIR,MAAM,GAAG,KAAK,CAAlB;;AAEA,MAAI3H,KAAJ,EAAW;AACV,QAAIqC,KAAK,CAACC,OAAN,CAActG,KAAK,CAAC6L,SAApB,CAAJ,EAAoC;AACnCF,MAAAA,MAAM,GAAG3L,KAAK,CAAC6L,SAAf;AACA,KAFD,MAEO;AACNF,MAAAA,MAAM,GAAG,CAAC3L,KAAK,CAAC6L,SAAP,CAAT;AACA;;AAED,QAAI7L,KAAK,CAACoM,WAAV,EAAuB;AACtBD,MAAAA,UAAU,GAAG;AACZE,QAAAA,YAAY,EAAElI,UAAU,CAACmI,WAAX,CAAuBtI,KAAvB,EAA8B2H,MAA9B,EAAsC3L,KAAtC;AADF,OAAb;AAGA,KAJD,MAIO,IAAIA,KAAK,CAACuM,eAAV,EAA2B;AACjCJ,MAAAA,UAAU,GAAG;AACZK,QAAAA,mBAAmB,EAAErI,UAAU,CAACmI,WAAX,CAAuBtI,KAAvB,EAA8B2H,MAA9B,EAAsC3L,KAAtC;AADT,OAAb;AAGA,KAJM,MAIA;AACNmM,MAAAA,UAAU,GAAG;AACZM,QAAAA,IAAI,EAAE;AACLC,UAAAA,MAAM,EAAEvI,UAAU,CAACmI,WAAX,CAAuBtI,KAAvB,EAA8B2H,MAA9B,EAAsC3L,KAAtC,CADH;AAEL2M,UAAAA,oBAAoB,EAAE;AAFjB;AADM,OAAb;AAMA;AACD;;AAED,MAAI3I,KAAK,KAAK,EAAd,EAAkB;AACjBmI,IAAAA,UAAU,GAAG,IAAb;AACA;;AAED,MAAIA,UAAU,IAAInM,KAAK,CAAC4M,WAAxB,EAAqC;AACpCT,IAAAA,UAAU,GAAG;AACZU,MAAAA,MAAM,EAAE;AACPC,QAAAA,IAAI,EAAE9M,KAAK,CAAC4M,WADL;AAEPG,QAAAA,KAAK,EAAEZ;AAFA;AADI,KAAb;AAMA;;AAED,SAAOA,UAAP;AACA,CA3CD;;AA6CAhI,UAAU,CAACmI,WAAX,GAAyB,UAAUtI,KAAV,EAAiBgJ,UAAjB,EAA6BhN,KAA7B,EAAoC;AAC5D,MAAI2L,MAAM,GAAGqB,UAAU,CAACzC,GAAX,CAAe,UAAU0C,KAAV,EAAiBxC,KAAjB,EAAwB;AACnD,WAAO,KAAKwC,KAAL,IAAc5G,KAAK,CAACC,OAAN,CAActG,KAAK,CAACkN,YAApB,KAAqClN,KAAK,CAACkN,YAAN,CAAmBzC,KAAnB,CAArC,GAAiE,MAAMzK,KAAK,CAACkN,YAAN,CAAmBzC,KAAnB,CAAvE,GAAmG,EAAjH,CAAP;AACA,GAFY,CAAb;;AAIA,MAAIzK,KAAK,CAACuM,eAAN,IAAyBvM,KAAK,CAACoM,WAAnC,EAAgD;AAC/C,WAAO;AACNW,MAAAA,KAAK,EAAE/I,KADD;AAEN2H,MAAAA,MAAM,EAAEA,MAFF;AAGNwB,MAAAA,gBAAgB,EAAEnN,KAAK,CAACoN;AAHlB,KAAP;AAKA;;AAED,MAAIpN,KAAK,CAACoN,WAAN,KAAsB,KAA1B,EAAiC;AAChC,WAAO,CAAC;AACPC,MAAAA,WAAW,EAAE;AACZN,QAAAA,KAAK,EAAE/I,KADK;AAEZ2H,QAAAA,MAAM,EAAEA,MAFI;AAGZ2B,QAAAA,IAAI,EAAE,cAHM;AAIZC,QAAAA,QAAQ,EAAE;AAJE;AADN,KAAD,EAOJ;AACFF,MAAAA,WAAW,EAAE;AACZN,QAAAA,KAAK,EAAE/I,KADK;AAEZ2H,QAAAA,MAAM,EAAEA,MAFI;AAGZ2B,QAAAA,IAAI,EAAE,QAHM;AAIZC,QAAAA,QAAQ,EAAE;AAJE;AADX,KAPI,CAAP;AAeA;;AAED,SAAO,CAAC;AACPF,IAAAA,WAAW,EAAE;AACZN,MAAAA,KAAK,EAAE/I,KADK;AAEZ2H,MAAAA,MAAM,EAAEA,MAFI;AAGZ2B,MAAAA,IAAI,EAAE,aAHM;AAIZC,MAAAA,QAAQ,EAAE,IAJE;AAKZC,MAAAA,SAAS,EAAExN,KAAK,CAACwN,SAAN,GAAkBxN,KAAK,CAACwN,SAAxB,GAAoC;AALnC;AADN,GAAD,EAQJ;AACFH,IAAAA,WAAW,EAAE;AACZN,MAAAA,KAAK,EAAE/I,KADK;AAEZ2H,MAAAA,MAAM,EAAEA,MAFI;AAGZ2B,MAAAA,IAAI,EAAE,QAHM;AAIZC,MAAAA,QAAQ,EAAE;AAJE;AADX,GARI,CAAP;AAgBA,CA/CD;;AAiDA,IAAIjJ,gBAAgB,GAAG,SAASA,gBAAT,GAA4B;AAClD,MAAImJ,MAAM,GAAG,IAAb;;AAEA,OAAKvI,oBAAL,GAA4B,YAAY;AACvC,QAAIwI,gBAAgB,GAAGD,MAAM,CAACzN,KAAP,CAAa0N,gBAApC;AAEA,QAAIzI,YAAY,GAAG,CAAC,GAAG7D,OAAO,CAACuM,eAAZ,EAA6BF,MAAM,CAACzN,KAApC,CAAnB;;AACA,QAAI0N,gBAAJ,EAAsB;AACrBzI,MAAAA,YAAY,CAAC2I,IAAb,GAAoB,CAAC,GAAGxM,OAAO,CAACyM,qBAAZ,EAAmC,EAAnC,EAAuCJ,MAAM,CAACzN,KAA9C,EAAqD,IAArD,EAA2D,IAA3D,EAAiE4N,IAArF;AACA;;AACD,WAAO3I,YAAP;AACA,GARD;;AAUA,OAAKuB,aAAL,GAAqB,UAAUsH,OAAV,EAAmB;AACvC,WAAO,CAAC,GAAG1M,OAAO,CAAC2M,mBAAZ,EAAiCD,OAAjC,EAA0CL,MAAM,CAAC/I,KAAP,CAAaH,YAAvD,EAAqEkJ,MAAM,CAACzN,KAA5E,CAAP;AACA,GAFD;;AAIA,OAAK8F,QAAL,GAAgB,UAAU9B,KAAV,EAAiB;AAChC,QAAIgK,cAAc,GAAGzO,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBmH,SAAzC,GAAqDnH,SAAS,CAAC,CAAD,CAA9D,GAAoE,KAAzF;AACA,QAAIS,KAAK,GAAGT,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBmH,SAAzC,GAAqDnH,SAAS,CAAC,CAAD,CAA9D,GAAoEkO,MAAM,CAACzN,KAAvF;AACA,QAAI2F,KAAK,GAAGpG,SAAS,CAAC,CAAD,CAArB;AACA,QAAImG,UAAU,GAAGnG,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBmH,SAAzC,GAAqDnH,SAAS,CAAC,CAAD,CAA9D,GAAoE,IAArF;AACA,QAAI0O,YAAY,GAAG1O,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBmH,SAAzC,GAAqDnH,SAAS,CAAC,CAAD,CAA9D,GAAoE,IAAvF;;AAEA,QAAI2O,aAAa,GAAG,SAASA,aAAT,GAAyB;AAC5C,UAAIxI,UAAJ,EAAgB;AACf+H,QAAAA,MAAM,CAAChH,QAAP,CAAgB;AACflC,UAAAA,YAAY,EAAEP,KADC;AAEfW,UAAAA,WAAW,EAAE;AAFE,SAAhB,EAGG,YAAY;AACd,cAAIqJ,cAAJ,EAAoB;AACnB,gBAAIP,MAAM,CAACzN,KAAP,CAAagI,WAAjB,EAA8B;AAC7B,kBAAIiG,YAAJ,EAAkB;AACjBR,gBAAAA,MAAM,CAAChH,QAAP,CAAgB;AACf7B,kBAAAA,MAAM,EAAE;AADO,iBAAhB;AAGA;;AACD6I,cAAAA,MAAM,CAACrI,kBAAP,CAA0BpB,KAA1B,EAAiChE,KAAjC;AACA,aARkB,CASnB;AACA;;;AACA,gBAAIA,KAAK,CAACmO,eAAV,EAA2B;AAC1B,kBAAIxI,KAAK,KAAKjE,QAAQ,CAACuB,OAAT,CAAiBmL,iBAA3B,IAAgDpK,KAAK,KAAK,EAA9D,EAAkE;AACjEyJ,gBAAAA,MAAM,CAACrH,WAAP,CAAmBpC,KAAnB,EAA0BhE,KAA1B;AACA,eAFD,MAEO;AACNyN,gBAAAA,MAAM,CAAC3H,QAAP,CAAgB,EAAhB,EAAoB,IAApB;AACA;AACD,aAND,MAMO;AACN2H,cAAAA,MAAM,CAACrH,WAAP,CAAmBpC,KAAnB,EAA0BhE,KAA1B;AACA;AACD,WApBD,MAoBO;AACN;AACAyN,YAAAA,MAAM,CAACY,gBAAP,CAAwBrK,KAAxB;AACA;;AACD,cAAIhE,KAAK,CAACsO,aAAV,EAAyBtO,KAAK,CAACsO,aAAN,CAAoBtK,KAApB,EAzBX,CA0Bd;;AACA,cAAIA,KAAK,KAAKhE,KAAK,CAACuO,aAApB,EAAmC;AAClCd,YAAAA,MAAM,CAAChH,QAAP,CAAgB;AACf9B,cAAAA,WAAW,EAAE8I,MAAM,CAACjH,aAAP,CAAqBiH,MAAM,CAACzN,KAAP,CAAa2E,WAAlC;AADE,aAAhB,EADkC,CAIlC;;;AACA,gBAAI8I,MAAM,CAACzN,KAAP,CAAawG,aAAjB,EAAgC;AAC/BiH,cAAAA,MAAM,CAACzN,KAAP,CAAawG,aAAb,CAA2BiH,MAAM,CAACzN,KAAP,CAAa2E,WAAxC;AACA;AACD;AACD,SAvCD;AAwCA,OAzCD,MAyCO;AACN,YAAI8I,MAAM,CAACzN,KAAP,CAAagI,WAAjB,EAA8B;AAC7ByF,UAAAA,MAAM,CAACrI,kBAAP,CAA0BpB,KAA1B,EAAiChE,KAAjC;AACA;;AACDyN,QAAAA,MAAM,CAACrH,WAAP,CAAmBpC,KAAnB,EAA0BhE,KAA1B;;AACA,YAAIA,KAAK,CAACsO,aAAV,EAAyBtO,KAAK,CAACsO,aAAN,CAAoBtK,KAApB;AACzB;AACD,KAjDD;;AAkDA,KAAC,GAAG5C,OAAO,CAACoN,gBAAZ,EAA8BxO,KAAK,CAAC+E,WAApC,EAAiDf,KAAjD,EAAwDhE,KAAK,CAACyO,iBAA9D,EAAiFP,aAAjF;AACA,GA1DD;;AA4DA,OAAKG,gBAAL,GAAwB,CAAC,GAAGjN,OAAO,CAACsN,QAAZ,EAAsB,UAAU1K,KAAV,EAAiB;AAC9D,QAAIyJ,MAAM,CAACzN,KAAP,CAAagI,WAAjB,EAA8B;AAC7ByF,MAAAA,MAAM,CAACrI,kBAAP,CAA0BpB,KAA1B,EAAiCyJ,MAAM,CAACzN,KAAxC;AACA,KAFD,MAEO;AACNyN,MAAAA,MAAM,CAACrH,WAAP,CAAmBpC,KAAnB,EAA0ByJ,MAAM,CAACzN,KAAjC;AACA;AACD,GANuB,EAMrB,KAAKA,KAAL,CAAW0O,QANU,CAAxB;;AAQA,OAAKtJ,kBAAL,GAA0B,UAAUpB,KAAV,EAAiBhE,KAAjB,EAAwB;AACjD,QAAIkM,YAAY,GAAGlM,KAAK,CAACkM,YAAzB;AAEA,QAAIyC,mBAAmB,GAAG,KAAK,CAA/B;AACA,QAAI5B,KAAK,GAAG5I,UAAU,CAAC+H,YAAX,CAAwBlI,KAAxB,EAA+BhE,KAA/B,CAAZ;;AACA,QAAIkM,YAAJ,EAAkB;AACjB,UAAI0C,mBAAmB,GAAG1C,YAAY,CAAClI,KAAD,EAAQhE,KAAR,CAAZ,IAA8B,EAAxD;;AACA,UAAI4O,mBAAmB,CAAC7B,KAAxB,EAA+B;AAC9BA,QAAAA,KAAK,GAAG6B,mBAAmB,CAAC7B,KAA5B;AACA;;AACD4B,MAAAA,mBAAmB,GAAG,CAAC,GAAGvN,OAAO,CAACyN,mBAAZ,EAAiCD,mBAAjC,CAAtB,CALiB,CAMjB;;AACA,OAAC,GAAGxN,OAAO,CAACgE,kBAAZ,EAAgCpF,KAAK,CAAC+E,WAAtC,EAAmD/E,KAAnD,EAA0DgE,KAA1D;AACA;;AACDhE,IAAAA,KAAK,CAAC8O,yBAAN,CAAgC9K,KAAhC;AACAhE,IAAAA,KAAK,CAACyF,eAAN,CAAsBgI,MAAM,CAAC5I,iBAA7B,EAAgD3F,QAAQ,CAAC,EAAD,EAAKuO,MAAM,CAACxI,YAAZ,EAA0B0J,mBAA1B,CAAxD;AACA3O,IAAAA,KAAK,CAACoG,WAAN,CAAkB;AACjBrB,MAAAA,WAAW,EAAE0I,MAAM,CAAC5I,iBADH;AAEjBkI,MAAAA,KAAK,EAAEA,KAFU;AAGjB/I,MAAAA,KAAK,EAAEA,KAHU;AAIjB+K,MAAAA,aAAa,EAAEzN,UAAU,CAAC0N,cAAX,CAA0BC;AAJxB,KAAlB;AAMA,GAtBD;;AAwBA,OAAK7I,WAAL,GAAmB,UAAUpC,KAAV,EAAiBhE,KAAjB,EAAwB;AAC1C,QAAIkP,WAAW,GAAGlP,KAAK,CAACkP,WAAxB;AAAA,QACIC,WAAW,GAAGnP,KAAK,CAACmP,WADxB;AAAA,QAEIC,UAAU,GAAGpP,KAAK,CAACoP,UAFvB;AAAA,QAGIC,SAAS,GAAGrP,KAAK,CAACqP,SAHtB;AAMA,QAAIC,kBAAkB,GAAG,KAAK,CAA9B;AACA,QAAIvC,KAAK,GAAG5I,UAAU,CAAC+H,YAAX,CAAwBlI,KAAxB,EAA+BhE,KAA/B,CAAZ;;AACA,QAAIkP,WAAJ,EAAiB;AAChB,UAAIK,kBAAkB,GAAGL,WAAW,CAAClL,KAAD,EAAQhE,KAAR,CAAX,IAA6B,EAAtD;AACA,UAAIwP,YAAY,GAAGD,kBAAkB,CAACxC,KAAtC;;AACA,UAAIyC,YAAJ,EAAkB;AACjBzC,QAAAA,KAAK,GAAGyC,YAAR;AACA;;AACDF,MAAAA,kBAAkB,GAAG,CAAC,GAAGlO,OAAO,CAACyN,mBAAZ,EAAiCU,kBAAjC,CAArB;AACA,OAAC,GAAGnO,OAAO,CAAC+D,iBAAZ,EAA+BnF,KAAK,CAAC+E,WAArC,EAAkD/E,KAAlD,EAAyDgE,KAAzD;AACA,KAjByC,CAmB1C;AACA;;;AACAhE,IAAAA,KAAK,CAACyF,eAAN,CAAsBzF,KAAK,CAAC+E,WAA5B,EAAyC7F,QAAQ,CAAC,EAAD,EAAKuO,MAAM,CAACxI,YAAZ,EAA0BqK,kBAA1B,CAAjD;;AACA,QAAI,CAAC7B,MAAM,CAACzI,SAAZ,EAAuB;AACtBhF,MAAAA,KAAK,CAACoG,WAAN,CAAkB;AACjBrB,QAAAA,WAAW,EAAE/E,KAAK,CAAC+E,WADF;AAEjBgI,QAAAA,KAAK,EAAEA,KAFU;AAGjB/I,QAAAA,KAAK,EAAEA,KAHU;AAIjByL,QAAAA,KAAK,EAAEN,WAJU;AAKjBC,QAAAA,UAAU,EAAEA,UALK;AAMjBC,QAAAA,SAAS,EAAEA,SANM;AAOjBN,QAAAA,aAAa,EAAEzN,UAAU,CAAC0N,cAAX,CAA0BC;AAPxB,OAAlB;AASA;AACD,GAjCD;;AAmCA,OAAKvF,WAAL,GAAmB,UAAUgG,KAAV,EAAiB;AACnCjC,IAAAA,MAAM,CAAChH,QAAP,CAAgB;AACf7B,MAAAA,MAAM,EAAE;AADO,KAAhB;;AAGA,QAAI6I,MAAM,CAACzN,KAAP,CAAayJ,OAAjB,EAA0B;AACzBgE,MAAAA,MAAM,CAACzN,KAAP,CAAayJ,OAAb,CAAqBiG,KAArB,EAA4BjC,MAAM,CAAC5H,YAAnC;AACA;AACD,GAPD;;AASA,OAAK8J,UAAL,GAAkB,YAAY;AAC7BlC,IAAAA,MAAM,CAACzI,SAAP,GAAmB,KAAnB;AACA,QAAIY,QAAQ,GAAG6H,MAAM,CAACzN,KAAP,CAAa4F,QAA5B;;AAEA6H,IAAAA,MAAM,CAAC3H,QAAP,CAAgB,EAAhB,EAAoB,IAApB;;AACA,QAAIF,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC,EAAD,EAAK6H,MAAM,CAAC5H,YAAZ,CAAR;AACA;;AACD4H,IAAAA,MAAM,CAACmC,eAAP,CAAuB,IAAvB,EAA6BlO,QAAQ,CAACuB,OAAT,CAAiB4M,WAA9C;AACA,GATD;;AAWA,OAAK/F,aAAL,GAAqB,UAAU4F,KAAV,EAAiBhH,gBAAjB,EAAmC;AACvD,QAAIoH,OAAO,GAAGrC,MAAM,CAACzN,KAArB;AAAA,QACIgE,KAAK,GAAG8L,OAAO,CAAC9L,KADpB;AAAA,QAEI4B,QAAQ,GAAGkK,OAAO,CAAClK,QAFvB;;AAIA,QAAI5B,KAAK,KAAK0C,SAAV,IAAuBd,QAA3B,EAAqC;AACpC6H,MAAAA,MAAM,CAACzI,SAAP,GAAmB,IAAnB;AACA,KAPsD,CAQvD;AACA;;;AACA,QAAI0K,KAAK,CAAChQ,GAAN,KAAc,OAAd,IAAyBgJ,gBAAgB,KAAK,IAAlD,EAAwD;AACvD+E,MAAAA,MAAM,CAAC3H,QAAP,CAAgB4J,KAAK,CAACrQ,MAAN,CAAa2E,KAA7B,EAAoC,IAApC;;AACAyJ,MAAAA,MAAM,CAACmC,eAAP,CAAuBF,KAAK,CAACrQ,MAAN,CAAa2E,KAApC,EAA2CtC,QAAQ,CAACuB,OAAT,CAAiB8M,WAA5D;AACA;;AACD,QAAItC,MAAM,CAACzN,KAAP,CAAa4J,SAAjB,EAA4B;AAC3B6D,MAAAA,MAAM,CAACzN,KAAP,CAAa4J,SAAb,CAAuB8F,KAAvB,EAA8BjC,MAAM,CAAC5H,YAArC;AACA;AACD,GAjBD;;AAmBA,OAAKyD,aAAL,GAAqB,UAAUO,CAAV,EAAa;AACjC,QAAImG,UAAU,GAAGnG,CAAC,CAACxK,MAAF,CAAS2E,KAA1B;;AAEA,QAAI,CAACyJ,MAAM,CAAC/I,KAAP,CAAaE,MAAlB,EAA0B;AACzB6I,MAAAA,MAAM,CAAChH,QAAP,CAAgB;AACf7B,QAAAA,MAAM,EAAE;AADO,OAAhB;AAGA;;AAED,QAAIqL,OAAO,GAAGxC,MAAM,CAACzN,KAArB;AAAA,QACIgE,KAAK,GAAGiM,OAAO,CAACjM,KADpB;AAAA,QAEI4B,QAAQ,GAAGqK,OAAO,CAACrK,QAFvB;;AAIA,QAAI5B,KAAK,KAAK0C,SAAd,EAAyB;AACxB+G,MAAAA,MAAM,CAAC3H,QAAP,CAAgBkK,UAAhB;AACA,KAFD,MAEO,IAAIpK,QAAJ,EAAc;AACpB6H,MAAAA,MAAM,CAACzI,SAAP,GAAmB,IAAnB,CADoB,CAEpB;;AACA,OAAC,GAAGzC,MAAM,CAAC2N,mBAAX,EAAgCrG,CAAhC;AACAjE,MAAAA,QAAQ,CAACoK,UAAD,EAAavC,MAAM,CAAC5H,YAApB,EAAkCgE,CAAlC,CAAR;AACA;AACD,GArBD;;AAuBA,OAAKhE,YAAL,GAAoB,YAAY;AAC/B4H,IAAAA,MAAM,CAACzI,SAAP,GAAmB,KAAnB;;AACAyI,IAAAA,MAAM,CAAC3H,QAAP,CAAgB2H,MAAM,CAACzN,KAAP,CAAagE,KAA7B,EAAoC,IAApC,EAA0CyJ,MAAM,CAACzN,KAAjD;AACA,GAHD;;AAKA,OAAKkI,oBAAL,GAA4B,UAAU2C,UAAV,EAAsB;AACjD,QAAIsF,OAAO,GAAG1C,MAAM,CAACzN,KAArB;AAAA,QACIgE,KAAK,GAAGmM,OAAO,CAACnM,KADpB;AAAA,QAEI4B,QAAQ,GAAGuK,OAAO,CAACvK,QAFvB;;AAIA6H,IAAAA,MAAM,CAAChH,QAAP,CAAgB;AACf7B,MAAAA,MAAM,EAAE;AADO,KAAhB;;AAGA,QAAIZ,KAAK,KAAK0C,SAAd,EAAyB;AACxB+G,MAAAA,MAAM,CAAC3H,QAAP,CAAgB+E,UAAU,CAAC7G,KAA3B,EAAkC,IAAlC,EAAwCyJ,MAAM,CAACzN,KAA/C,EAAsD0B,QAAQ,CAACuB,OAAT,CAAiBmL,iBAAvE;AACA,KAFD,MAEO,IAAIxI,QAAJ,EAAc;AACpB6H,MAAAA,MAAM,CAACzI,SAAP,GAAmB,KAAnB;AACAY,MAAAA,QAAQ,CAACiF,UAAU,CAAC7G,KAAZ,EAAmByJ,MAAM,CAAC5H,YAA1B,CAAR;AACA,KAbgD,CAcjD;;;AACA4H,IAAAA,MAAM,CAAC2C,qBAAP,CAA6BvF,UAAU,CAACwF,SAAxC,EAfiD,CAgBjD;AACA;AACA;;;AACA5C,IAAAA,MAAM,CAACmC,eAAP,CAAuB/E,UAAU,CAAC7G,KAAlC,EAAyCtC,QAAQ,CAACuB,OAAT,CAAiBmL,iBAA1D,EAA6EvD,UAAU,CAACpL,MAAxF;AACA,GApBD;;AAsBA,OAAKmQ,eAAL,GAAuB,YAAY;AAClC,SAAK,IAAIU,IAAI,GAAG/Q,SAAS,CAACC,MAArB,EAA6BmG,KAAK,GAAGU,KAAK,CAACiK,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAvB,CAA1C,EAAqEC,IAAI,GAAG,CAAjF,EAAoFA,IAAI,GAAGD,IAA3F,EAAiGC,IAAI,EAArG,EAAyG;AACxG5K,MAAAA,KAAK,CAAC4K,IAAI,GAAG,CAAR,CAAL,GAAkBhR,SAAS,CAACgR,IAAD,CAA3B;AACA;;AAED,QAAIhM,YAAY,GAAGhF,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBmH,SAAzC,GAAqDnH,SAAS,CAAC,CAAD,CAA9D,GAAoEkO,MAAM,CAAC/I,KAAP,CAAaH,YAApG;AACA,QAAIqL,eAAe,GAAGnC,MAAM,CAACzN,KAAP,CAAa4P,eAAnC;;AAEA,QAAIA,eAAJ,EAAqB;AACpBA,MAAAA,eAAe,CAACY,KAAhB,CAAsB9J,SAAtB,EAAiC,CAACnC,YAAD,EAAekM,MAAf,CAAsB9K,KAAtB,CAAjC;AACA;AACD,GAXD;;AAaA,OAAKyC,iBAAL,GAAyB,UAAUsI,OAAV,EAAmB;AAC3C,QAAI9L,MAAM,GAAG8L,OAAO,CAAC9L,MAArB;AAAA,QACI0I,IAAI,GAAGoD,OAAO,CAACpD,IADnB;;AAGA,QAAIA,IAAI,KAAKvM,WAAW,CAACkC,OAAZ,CAAoB0N,gBAApB,CAAqCC,OAAlD,EAA2D;AAC1DnD,MAAAA,MAAM,CAAChH,QAAP,CAAgB;AACf7B,QAAAA,MAAM,EAAEA;AADO,OAAhB;AAGA;AACD,GATD;;AAWA,OAAKgG,kBAAL,GAA0B,UAAUlC,gBAAV,EAA4B+B,KAA5B,EAAmC;AAC5D,QAAIoG,MAAM,GAAGpD,MAAM,CAACzN,KAAP,CAAauH,WAAb,KAA6B,MAA1C;;AACA,QAAIsJ,MAAJ,EAAY;AACX,aAAOnI,gBAAgB,KAAK+B,KAArB,GAA6B,MAA7B,GAAsC,SAA7C;AACA;;AACD,WAAO/B,gBAAgB,KAAK+B,KAArB,GAA6B,MAA7B,GAAsC,MAA7C;AACA,GAND;;AAQA,OAAKqG,qBAAL,GAA6B,YAAY;AACxC,QAAIvM,YAAY,GAAGkJ,MAAM,CAAC/I,KAAP,CAAaH,YAAhC;;AAEA,QAAIA,YAAY,CAACgC,IAAb,EAAJ,EAAyB;AACxBkH,MAAAA,MAAM,CAACzI,SAAP,GAAmB,KAAnB;;AACAyI,MAAAA,MAAM,CAAC3H,QAAP,CAAgBvB,YAAhB,EAA8B,IAA9B;;AACAkJ,MAAAA,MAAM,CAACmC,eAAP,CAAuBrL,YAAvB,EAAqC7C,QAAQ,CAACuB,OAAT,CAAiB8N,iBAAtD;AACA;AACD,GARD;;AAUA,OAAKC,kBAAL,GAA0B,UAAUC,KAAV,EAAiB;AAC1C,QAAInD,OAAO,GAAGmD,KAAK,CAACnD,OAApB;AACA,QAAI9F,WAAW,GAAGyF,MAAM,CAACzN,KAAP,CAAagI,WAA/B;;AAEA,QAAI8F,OAAO,IAAIA,OAAO,CAAC,CAAD,CAAlB,IAAyBA,OAAO,CAAC,CAAD,CAAP,CAAWoD,OAApC,IAA+CpD,OAAO,CAAC,CAAD,CAAP,CAAW,CAAX,CAA/C,IAAgEA,OAAO,CAAC,CAAD,CAAP,CAAW,CAAX,EAAcqD,UAA9E,IAA4FrD,OAAO,CAAC,CAAD,CAAP,CAAW,CAAX,EAAcqD,UAAd,CAAyB5K,IAAzB,EAAhG,EAAiI;AAChIkH,MAAAA,MAAM,CAACzI,SAAP,GAAmB,KAAnB;;AACAyI,MAAAA,MAAM,CAAC3H,QAAP,CAAgBgI,OAAO,CAAC,CAAD,CAAP,CAAW,CAAX,EAAcqD,UAAd,CAAyB5K,IAAzB,EAAhB,EAAiD,CAACyB,WAAlD;;AACA,UAAIA,WAAJ,EAAiB;AAChByF,QAAAA,MAAM,CAACrE,SAAP,CAAiBgI,KAAjB;;AACA3D,QAAAA,MAAM,CAAChH,QAAP,CAAgB;AACf7B,UAAAA,MAAM,EAAE;AADO,SAAhB;AAGA;AACD;AACD,GAdD;;AAgBA,OAAKyM,UAAL,GAAkB,YAAY;AAC7B,QAAI5D,MAAM,CAACzN,KAAP,CAAa+I,QAAjB,EAA2B;AAC1B,aAAO0E,MAAM,CAACzN,KAAP,CAAasR,IAAb,IAAqB,CAAC,GAAG7Q,KAAK,CAACgH,GAAV,EAAezF,WAAW,CAACiB,OAA3B,EAAoC,IAApC,CAA5B;AACA;;AACD,WAAO,IAAP;AACA,GALD;;AAOA,OAAKsO,gBAAL,GAAwB,YAAY;AACnC,QAAI9D,MAAM,CAACzN,KAAP,CAAagJ,SAAjB,EAA4B;AAC3B,aAAOyE,MAAM,CAACzN,KAAP,CAAawR,SAAb,IAA0B,CAAC,GAAG/Q,KAAK,CAACgH,GAAV,EAAevF,WAAW,CAACe,OAA3B,EAAoC,IAApC,CAAjC;AACA;;AACD,WAAO,IAAP;AACA,GALD;;AAOA,OAAK+G,WAAL,GAAmB,YAAY;AAC9B,QAAIzF,YAAY,GAAGkJ,MAAM,CAAC/I,KAAP,CAAaH,YAAhC;AACA,QAAIkN,OAAO,GAAGhE,MAAM,CAACzN,KAArB;AAAA,QACI+I,QAAQ,GAAG0I,OAAO,CAAC1I,QADvB;AAAA,QAEIC,SAAS,GAAGyI,OAAO,CAACzI,SAFxB;AAAA,QAGI0I,SAAS,GAAGD,OAAO,CAACC,SAHxB;AAAA,QAIIC,cAAc,GAAGF,OAAO,CAACE,cAJ7B;AAAA,QAKI9K,eAAe,GAAG4K,OAAO,CAAC5K,eAL9B;AAAA,QAMIoC,YAAY,GAAGwI,OAAO,CAACxI,YAN3B;AAAA,QAOInB,UAAU,GAAG2J,OAAO,CAAC3J,UAPzB;AASA,WAAO,CAAC,GAAGrH,KAAK,CAACgH,GAAV,EACN,KADM,EAEN,IAFM,EAGNgG,MAAM,CAAC/I,KAAP,CAAaH,YAAb,IAA6ByE,SAA7B,IAA0C,CAAC,GAAGvI,KAAK,CAACgH,GAAV,EACzCrF,WAAW,CAACa,OAD6B,EAEzC;AACC2O,MAAAA,OAAO,EAAEnE,MAAM,CAACkC,UADjB;AAEC1G,MAAAA,YAAY,EAAE,OAFf;AAGCuI,MAAAA,SAAS,EAAEvI,YAAY,KAAK,OAH7B;AAICF,MAAAA,QAAQ,EAAEA,QAJX;AAKC8I,MAAAA,WAAW,EAAE;AALd,KAFyC,EASzCpE,MAAM,CAAC8D,gBAAP,EATyC,CAHpC,EAcN9D,MAAM,CAAC7G,eAAP,CAAuBC,eAAvB,KAA2C,CAAC,GAAGpG,KAAK,CAACgH,GAAV,EAAe5E,KAAK,CAACI,OAArB,EAA8B;AACxE6O,MAAAA,WAAW,EAAEH,cAD2D;AAExE1K,MAAAA,MAAM,EAAEyK,SAFgE;AAGxEzI,MAAAA,YAAY,EAAEA,YAH0D;AAIxE8I,MAAAA,QAAQ,EAAEtE,MAAM,CAACuD,kBAJuD;AAKxErJ,MAAAA,SAAS,EAAE,CAAC,GAAGvG,OAAO,CAACyG,YAAZ,EAA0BC,UAA1B,EAAsC,KAAtC,KAAgD,IALa;AAMxEkK,MAAAA,eAAe,EAAE,CAAC,CAACzN,YAAF,IAAkByE,SANqC;AAOxED,MAAAA,QAAQ,EAAEA;AAP8D,KAA9B,CAdrC,EAuBN,CAAC,GAAGtI,KAAK,CAACgH,GAAV,EACCrF,WAAW,CAACa,OADb,EAEC;AACC2O,MAAAA,OAAO,EAAEnE,MAAM,CAACqD,qBADjB;AAEC7H,MAAAA,YAAY,EAAEA,YAFf;AAGCF,MAAAA,QAAQ,EAAEA;AAHX,KAFD,EAOC0E,MAAM,CAAC4D,UAAP,EAPD,CAvBM,CAAP;AAiCA,GA5CD;;AA8CA,OAAKtG,kBAAL,GAA0B,YAAY;AACrC,QAAIkH,oBAAoB,GAAG1S,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBmH,SAAzC,GAAqDnH,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAA/F;AACA,QAAI2S,OAAO,GAAGzE,MAAM,CAACzN,KAArB;AAAA,QACIuH,WAAW,GAAG2K,OAAO,CAAC3K,WAD1B;AAAA,QAEID,KAAK,GAAG4K,OAAO,CAAC5K,KAFpB;AAAA,QAGI6K,SAAS,GAAGD,OAAO,CAACC,SAHxB;AAAA,QAIIpH,kBAAkB,GAAGmH,OAAO,CAACnH,kBAJjC;AAAA,QAKIjD,UAAU,GAAGoK,OAAO,CAACpK,UALzB;AAAA,QAMIsK,KAAK,GAAGF,OAAO,CAACE,KANpB;AAAA,QAOIhI,WAAW,GAAG8H,OAAO,CAAC9H,WAP1B;AAQA,QAAIiI,MAAM,GAAG5E,MAAM,CAAC/I,KAApB;AAAA,QACIE,MAAM,GAAGyN,MAAM,CAACzN,MADpB;AAAA,QAEIL,YAAY,GAAG8N,MAAM,CAAC9N,YAF1B;;AAIA,QAAIwG,kBAAkB,IAAInG,MAAtB,IAAgC,CAACqN,oBAAoB,CAACzS,MAAtD,IAAgE,CAAC2S,SAAjE,IAA8E5N,YAA9E,IAA8F,EAAE6F,WAAW,IAAIgI,KAAjB,CAAlG,EAA2H;AAC1H,aAAO,CAAC,GAAG3R,KAAK,CAACgH,GAAV,EACN9E,mBAAmB,CAACM,OADd,EAEN;AACC6E,QAAAA,UAAU,EAAEA,UADb;AAECP,QAAAA,WAAW,EAAEA,WAFd;AAGCD,QAAAA,KAAK,EAAEA,KAHR;AAICgL,QAAAA,cAAc,EAAE;AAJjB,OAFM,EAQN,OAAOvH,kBAAP,KAA8B,UAA9B,GAA2CA,kBAAkB,CAACxG,YAAD,CAA7D,GAA8EwG,kBARxE,CAAP;AAUA;;AACD,WAAO,IAAP;AACA,GA3BD;;AA6BA,OAAKZ,YAAL,GAAoB,YAAY;AAC/B,QAAIoI,OAAO,GAAG9E,MAAM,CAACzN,KAArB;AAAA,QACIwS,MAAM,GAAGD,OAAO,CAACC,MADrB;AAAA,QAEIL,SAAS,GAAGI,OAAO,CAACJ,SAFxB;AAAA,QAGI5K,WAAW,GAAGgL,OAAO,CAAChL,WAH1B;AAAA,QAIID,KAAK,GAAGiL,OAAO,CAACjL,KAJpB;AAAA,QAKIQ,UAAU,GAAGyK,OAAO,CAACzK,UALzB;AAMA,QAAIvD,YAAY,GAAGkJ,MAAM,CAAC/I,KAAP,CAAaH,YAAhC;;AAEA,QAAI4N,SAAS,IAAIK,MAAb,IAAuBjO,YAA3B,EAAyC;AACxC,aAAO,CAAC,GAAG9D,KAAK,CAACgH,GAAV,EACN9E,mBAAmB,CAACM,OADd,EAEN;AACC6E,QAAAA,UAAU,EAAEA,UADb;AAECwK,QAAAA,cAAc,EAAE,QAFjB;AAGChL,QAAAA,KAAK,EAAEA,KAHR;AAICC,QAAAA,WAAW,EAAEA;AAJd,OAFM,EAQNiL,MARM,CAAP;AAUA;;AACD,WAAO,IAAP;AACA,GAtBD;;AAwBA,OAAKpI,WAAL,GAAmB,YAAY;AAC9B,QAAIqI,QAAQ,GAAGhF,MAAM,CAACzN,KAAtB;AAAA,QACIoS,KAAK,GAAGK,QAAQ,CAACL,KADrB;AAAA,QAEIhI,WAAW,GAAGqI,QAAQ,CAACrI,WAF3B;AAAA,QAGI7C,WAAW,GAAGkL,QAAQ,CAAClL,WAH3B;AAAA,QAIID,KAAK,GAAGmL,QAAQ,CAACnL,KAJrB;AAAA,QAKI6K,SAAS,GAAGM,QAAQ,CAACN,SALzB;AAAA,QAMIrK,UAAU,GAAG2K,QAAQ,CAAC3K,UAN1B;AAOA,QAAIvD,YAAY,GAAGkJ,MAAM,CAAC/I,KAAP,CAAaH,YAAhC;;AAEA,QAAI6N,KAAK,IAAIhI,WAAT,IAAwB7F,YAAxB,IAAwC,CAAC4N,SAA7C,EAAwD;AACvD,aAAO,CAAC,GAAG1R,KAAK,CAACgH,GAAV,EACN9E,mBAAmB,CAACM,OADd,EAEN;AACC6E,QAAAA,UAAU,EAAEA,UADb;AAECwK,QAAAA,cAAc,EAAE,OAFjB;AAGChL,QAAAA,KAAK,EAAEA,KAHR;AAICC,QAAAA,WAAW,EAAEA;AAJd,OAFM,EAQN,CAAC,GAAGhF,MAAM,CAACmQ,UAAX,EAAuBtI,WAAvB,IAAsCA,WAAW,CAACgI,KAAD,CAAjD,GAA2DhI,WARrD,CAAP;AAUA;;AACD,WAAO,IAAP;AACA,GAvBD;;AAyBA,OAAKF,YAAL,GAAoB,YAAY;AAC/B,QAAIyI,cAAc,GAAGpT,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBmH,SAAzC,GAAqDnH,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAzF;AACA,QAAIqT,wBAAwB,GAAGrT,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBmH,SAAzC,GAAqDnH,SAAS,CAAC,CAAD,CAA9D,GAAoE,KAAnG;AACA,QAAIsT,QAAQ,GAAGpF,MAAM,CAACzN,KAAtB;AAAA,QACIoS,KAAK,GAAGS,QAAQ,CAACT,KADrB;AAAA,QAEID,SAAS,GAAGU,QAAQ,CAACV,SAFzB;AAAA,QAGIW,eAAe,GAAGD,QAAQ,CAACC,eAH/B;AAAA,QAIIC,eAAe,GAAGF,QAAQ,CAACE,eAJ/B;AAAA,QAKIC,UAAU,GAAGH,QAAQ,CAACG,UAL1B;AAAA,QAMIC,OAAO,GAAGJ,QAAQ,CAACI,OANvB;AAOA,QAAI1O,YAAY,GAAGkJ,MAAM,CAAC/I,KAAP,CAAaH,YAAhC;AAEA,QAAI2O,IAAI,GAAG;AACVd,MAAAA,KAAK,EAAEA,KADG;AAEVe,MAAAA,OAAO,EAAEhB,SAFC;AAGVQ,MAAAA,cAAc,EAAEA,cAHN;AAIVO,MAAAA,IAAI,EAAEzF,MAAM,CAACrG,iBAJH;AAKVgM,MAAAA,YAAY,EAAEL,eAAe,IAAI,EALvB;AAMVC,MAAAA,UAAU,EAAEA,UAAU,IAAI,EANhB;AAOVF,MAAAA,eAAe,EAAEA,eAAe,IAAI,EAP1B;AAQVG,MAAAA,OAAO,EAAEA,OARC;AASVjP,MAAAA,KAAK,EAAEO,YATG;AAUV6L,MAAAA,qBAAqB,EAAE3C,MAAM,CAAC2C,qBAVpB;AAWViD,MAAAA,WAAW,EAAE5F,MAAM,CAAC6F,KAXV;AAYV/H,MAAAA,gBAAgB,EAAEkC,MAAM,CAACnD;AAZf,KAAX;;AAcA,QAAIsI,wBAAJ,EAA8B;AAC7B,aAAO,CAAC,GAAGrQ,MAAM,CAACgR,4BAAX,EAAyC;AAC/CZ,QAAAA,cAAc,EAAEA,cAD+B;AAE/CO,QAAAA,IAAI,EAAEzF,MAAM,CAACnD,cAFkC;AAG/CtG,QAAAA,KAAK,EAAEO,YAHwC;AAI/C4O,QAAAA,OAAO,EAAEhB,SAJsC;AAK/CC,QAAAA,KAAK,EAAEA;AALwC,OAAzC,EAMJ3E,MAAM,CAACzN,KANH,CAAP;AAOA;;AACD,WAAO,CAAC,GAAGuC,MAAM,CAAC2H,YAAX,EAAyBgJ,IAAzB,EAA+BzF,MAAM,CAACzN,KAAtC,CAAP;AACA,GApCD;;AAsCA,OAAKoQ,qBAAL,GAA6B,UAAUoD,cAAV,EAA0BC,UAA1B,EAAsC;AAClE,QAAIC,KAAK,GAAGD,UAAZ;;AACA,QAAI,CAACC,KAAL,EAAY;AACX,UAAIC,OAAO,GAAGlG,MAAM,CAACrG,iBAAP,CAAyBwM,IAAzB,CAA8B,UAAUC,GAAV,EAAe;AAC1D,eAAOA,GAAG,CAACxD,SAAJ,KAAkBmD,cAAzB;AACA,OAFa,CAAd;;AAGA,UAAIG,OAAO,IAAIA,OAAO,CAAClU,MAAnB,IAA6BkU,OAAO,CAAClU,MAAR,CAAeqU,GAAhD,EAAqD;AACpDJ,QAAAA,KAAK,GAAGC,OAAO,CAAClU,MAAR,CAAeqU,GAAvB;AACA;AACD;;AACDrG,IAAAA,MAAM,CAACzN,KAAP,CAAa+T,gBAAb,CAA8BP,cAA9B,EAA8CE,KAA9C;AACA,GAXD;;AAaA,OAAKlK,gBAAL,GAAwB,UAAUwK,IAAV,EAAgB;AACvC,QAAIA,IAAJ,EAAU;AACT,aAAO,UAAUnK,CAAV,EAAa;AACnB,eAAOmK,IAAI,CAACnK,CAAD,EAAI4D,MAAM,CAAC5H,YAAX,CAAX;AACA,OAFD;AAGA;;AACD,WAAOa,SAAP;AACA,GAPD;AAQA,CAxeD;;AA0eAvC,UAAU,CAAC8P,SAAX,GAAuB;AACtBxO,EAAAA,eAAe,EAAEjE,OAAO,CAACyB,OAAR,CAAgBiR,YADX;AAEtB9N,EAAAA,WAAW,EAAE5E,OAAO,CAACyB,OAAR,CAAgBiR,YAFP;AAGtBC,EAAAA,OAAO,EAAE3S,OAAO,CAACyB,OAAR,CAAgBkR,OAHH;AAItB3P,EAAAA,aAAa,EAAEhD,OAAO,CAACyB,OAAR,CAAgBuB,aAJT;AAKtBG,EAAAA,WAAW,EAAEnD,OAAO,CAACyB,OAAR,CAAgB0B,WALP;AAMtBsO,EAAAA,OAAO,EAAEzR,OAAO,CAACyB,OAAR,CAAgBgQ,OANH;AAOtBH,EAAAA,eAAe,EAAEtR,OAAO,CAACyB,OAAR,CAAgB6P,eAPX;AAQtBsB,EAAAA,cAAc,EAAE5S,OAAO,CAACyB,OAAR,CAAgBiR,YARV;AAStBG,EAAAA,eAAe,EAAE7S,OAAO,CAACyB,OAAR,CAAgBiR,YATX;AAUtB1O,EAAAA,yBAAyB,EAAEhE,OAAO,CAACyB,OAAR,CAAgBiR,YAVrB;AAWtBpF,EAAAA,yBAAyB,EAAEtN,OAAO,CAACyB,OAAR,CAAgBiR,YAXrB;AAYtBH,EAAAA,gBAAgB,EAAEvS,OAAO,CAACyB,OAAR,CAAgBiR,YAZZ;AAatB9B,EAAAA,KAAK,EAAE5Q,OAAO,CAACyB,OAAR,CAAgB2E,KAbD;AActBuK,EAAAA,SAAS,EAAE3Q,OAAO,CAACyB,OAAR,CAAgBwJ,IAdL;AAetB6H,EAAAA,MAAM,EAAE9S,OAAO,CAACyB,OAAR,CAAgBjD,KAfF;AAgBtBuO,EAAAA,aAAa,EAAE/M,OAAO,CAACyB,OAAR,CAAgBsR,MAhBT;AAiBtB;AACAtJ,EAAAA,SAAS,EAAEzJ,OAAO,CAACyB,OAAR,CAAgBwJ,IAlBL;AAmBtBzE,EAAAA,WAAW,EAAExG,OAAO,CAACyB,OAAR,CAAgBwJ,IAnBP;AAoBtB+H,EAAAA,cAAc,EAAEhT,OAAO,CAACyB,OAAR,CAAgBwJ,IApBV;AAqBtBnB,EAAAA,sBAAsB,EAAE9J,OAAO,CAACyB,OAAR,CAAgBwJ,IArBlB;AAsBtBL,EAAAA,WAAW,EAAE5K,OAAO,CAACyB,OAAR,CAAgBwJ,IAtBP;AAuBtBgC,EAAAA,iBAAiB,EAAEjN,OAAO,CAACyB,OAAR,CAAgB+Q,IAvBb;AAwBtBrM,EAAAA,SAAS,EAAEnG,OAAO,CAACyB,OAAR,CAAgBsR,MAxBL;AAyBtB/C,EAAAA,SAAS,EAAEhQ,OAAO,CAACyB,OAAR,CAAgBwR,QAzBL;AA0BtB1P,EAAAA,WAAW,EAAEvD,OAAO,CAACyB,OAAR,CAAgByR,cA1BP;AA2BtBnP,EAAAA,eAAe,EAAE/D,OAAO,CAACyB,OAAR,CAAgB+Q,IA3BX;AA4BtB9E,EAAAA,WAAW,EAAE1N,OAAO,CAACyB,OAAR,CAAgB+Q,IA5BP;AA6BtB9H,EAAAA,YAAY,EAAE1K,OAAO,CAACyB,OAAR,CAAgB+Q,IA7BR;AA8BtBnI,EAAAA,SAAS,EAAErK,OAAO,CAACyB,OAAR,CAAgB0R,kBA9BL;AA+BtBjH,EAAAA,gBAAgB,EAAElM,OAAO,CAACyB,OAAR,CAAgBsR,MA/BZ;AAgCtB/M,EAAAA,IAAI,EAAEhG,OAAO,CAACyB,OAAR,CAAgB2R,MAhCA;AAiCtBlG,EAAAA,QAAQ,EAAElN,OAAO,CAACyB,OAAR,CAAgB2R,MAjCJ;AAkCtBnQ,EAAAA,YAAY,EAAEjD,OAAO,CAACyB,OAAR,CAAgBsR,MAlCR;AAmCtBvQ,EAAAA,KAAK,EAAExC,OAAO,CAACyB,OAAR,CAAgBsR,MAnCD;AAoCtBxM,EAAAA,kBAAkB,EAAEvG,OAAO,CAACyB,OAAR,CAAgB0B,WApCd;AAqCtBoO,EAAAA,eAAe,EAAEvR,OAAO,CAACyB,OAAR,CAAgB4R,IArCX;AAsCtB7B,EAAAA,UAAU,EAAExR,OAAO,CAACyB,OAAR,CAAgB2E,KAtCN;AAuCtBoD,EAAAA,cAAc,EAAExJ,OAAO,CAACyB,OAAR,CAAgBjD,KAvCV;AAwCtByU,EAAAA,QAAQ,EAAEjT,OAAO,CAACyB,OAAR,CAAgB+Q,IAxCJ;AAyCtBc,EAAAA,aAAa,EAAEtT,OAAO,CAACyB,OAAR,CAAgB6R,aAzCT;AA0CtB5H,EAAAA,YAAY,EAAE1L,OAAO,CAACyB,OAAR,CAAgBiK,YA1CR;AA2CtBiC,EAAAA,WAAW,EAAE3N,OAAO,CAACyB,OAAR,CAAgBsR,MA3CP;AA4CtB/G,EAAAA,SAAS,EAAEhM,OAAO,CAACyB,OAAR,CAAgBuK,SA5CL;AA6CtBnI,EAAAA,SAAS,EAAE7D,OAAO,CAACyB,OAAR,CAAgBwJ,IA7CL;AA8CtBb,EAAAA,cAAc,EAAEpK,OAAO,CAACyB,OAAR,CAAgB8R,aA9CV;AA+CtBzD,EAAAA,IAAI,EAAE9P,OAAO,CAACyB,OAAR,CAAgBwR,QA/CA;AAgDtBxL,EAAAA,YAAY,EAAEzH,OAAO,CAACyB,OAAR,CAAgBgG,YAhDR;AAiDtBnB,EAAAA,UAAU,EAAEtG,OAAO,CAACyB,OAAR,CAAgByE,KAjDN;AAkDtBsN,EAAAA,aAAa,EAAExT,OAAO,CAACyB,OAAR,CAAgB+R,aAlDT;AAmDtBxC,EAAAA,MAAM,EAAEhR,OAAO,CAACyB,OAAR,CAAgB2E,KAnDF;AAoDtBgF,EAAAA,WAAW,EAAEpL,OAAO,CAACyB,OAAR,CAAgBsR,MApDP;AAqDtBU,EAAAA,OAAO,EAAEzT,OAAO,CAACyB,OAAR,CAAgB+Q,IArDH;AAsDtBzK,EAAAA,MAAM,EAAE/H,OAAO,CAACyB,OAAR,CAAgB+Q,IAtDF;AAuDtBvK,EAAAA,OAAO,EAAEjI,OAAO,CAACyB,OAAR,CAAgB+Q,IAvDH;AAwDtBpK,EAAAA,SAAS,EAAEpI,OAAO,CAACyB,OAAR,CAAgB+Q,IAxDL;AAyDtBrK,EAAAA,UAAU,EAAEnI,OAAO,CAACyB,OAAR,CAAgB+Q,IAzDN;AA0DtBjK,EAAAA,OAAO,EAAEvI,OAAO,CAACyB,OAAR,CAAgB+Q,IA1DH;AA2DtBkB,EAAAA,aAAa,EAAE1T,OAAO,CAACyB,OAAR,CAAgB+Q,IA3DT;AA4DtBxN,EAAAA,aAAa,EAAEhF,OAAO,CAACyB,OAAR,CAAgB+Q,IA5DT;AA6DtB1F,EAAAA,aAAa,EAAE9M,OAAO,CAACyB,OAAR,CAAgB+Q,IA7DT;AA8DtBpO,EAAAA,QAAQ,EAAEpE,OAAO,CAACyB,OAAR,CAAgB+Q,IA9DJ;AA+DtBpE,EAAAA,eAAe,EAAEpO,OAAO,CAACyB,OAAR,CAAgB+Q,IA/DX;AAgEtB3K,EAAAA,WAAW,EAAE7H,OAAO,CAACyB,OAAR,CAAgBsR,MAhEP;AAiEtBnH,EAAAA,WAAW,EAAE5L,OAAO,CAACyB,OAAR,CAAgBkS,iBAjEP;AAkEtB5J,EAAAA,gBAAgB,EAAE/J,OAAO,CAACyB,OAAR,CAAgB4R,IAlEZ;AAmEtBO,EAAAA,KAAK,EAAE5T,OAAO,CAACyB,OAAR,CAAgBmS,KAnED;AAoEtBnO,EAAAA,MAAM,EAAEzF,OAAO,CAACyB,OAAR,CAAgB+Q,IApEF;AAqEtBqB,EAAAA,sBAAsB,EAAE7T,OAAO,CAACyB,OAAR,CAAgB+Q,IArElB;AAsEtB5J,EAAAA,WAAW,EAAE5I,OAAO,CAACyB,OAAR,CAAgB2E,KAtEP;AAuEtB0N,EAAAA,eAAe,EAAE9T,OAAO,CAACyB,OAAR,CAAgB+Q,IAvEX;AAwEtBjJ,EAAAA,kBAAkB,EAAEvJ,OAAO,CAACyB,OAAR,CAAgB2E,KAxEd;AAyEtBoB,EAAAA,SAAS,EAAExH,OAAO,CAACyB,OAAR,CAAgBwJ,IAzEL;AA0EtBjB,EAAAA,uBAAuB,EAAEhK,OAAO,CAACyB,OAAR,CAAgBwJ,IA1EnB;AA2EtB2C,EAAAA,UAAU,EAAE5N,OAAO,CAACyB,OAAR,CAAgBwJ,IA3EN;AA4EtB1D,EAAAA,QAAQ,EAAEvH,OAAO,CAACyB,OAAR,CAAgBwJ,IA5EJ;AA6EtB5F,EAAAA,eAAe,EAAErF,OAAO,CAACyB,OAAR,CAAgBwJ,IA7EX;AA8EtB/E,EAAAA,KAAK,EAAElG,OAAO,CAACyB,OAAR,CAAgByE,KA9ED;AA+EtBE,EAAAA,KAAK,EAAEpG,OAAO,CAACyB,OAAR,CAAgB2E,KA/ED;AAgFtBN,EAAAA,KAAK,EAAE9F,OAAO,CAACyB,OAAR,CAAgByE,KAhFD;AAiFtBH,EAAAA,WAAW,EAAE/F,OAAO,CAACyB,OAAR,CAAgBsE,WAjFP;AAkFtB8H,EAAAA,SAAS,EAAE7N,OAAO,CAACyB,OAAR,CAAgBwJ,IAlFL;AAmFtB0B,EAAAA,eAAe,EAAE3M,OAAO,CAACyB,OAAR,CAAgBwJ,IAnFX;AAoFtBF,EAAAA,eAAe,EAAE/K,OAAO,CAACyB,OAAR,CAAgBwJ,IApFX;AAqFtB;AACAkF,EAAAA,cAAc,EAAEnQ,OAAO,CAACyB,OAAR,CAAgB+Q,IAtFV;AAuFtBtC,EAAAA,SAAS,EAAElQ,OAAO,CAACyB,OAAR,CAAgB+Q;AAvFL,CAAvB;AA0FA7P,UAAU,CAACoR,YAAX,GAA0B;AACzBvN,EAAAA,WAAW,EAAE,IADY;AAEzBL,EAAAA,SAAS,EAAE,IAFc;AAGzB+G,EAAAA,QAAQ,EAAE,CAHe;AAIzB1D,EAAAA,cAAc,EAAE,EAJS;AAKzBwJ,EAAAA,cAAc,EAAE,IALS;AAMzBlJ,EAAAA,sBAAsB,EAAE,KANC;AAOzBwJ,EAAAA,aAAa,EAAE,EAPU;AAQzB7L,EAAAA,YAAY,EAAE,MARW;AASzB+L,EAAAA,aAAa,EAAE,CAAC,GAAD,CATU;AAUzB3L,EAAAA,WAAW,EAAE,QAVY;AAWzB+D,EAAAA,WAAW,EAAE,IAXY;AAYzBgC,EAAAA,UAAU,EAAE,IAZa;AAazBrG,EAAAA,QAAQ,EAAE,IAbe;AAczBlC,EAAAA,eAAe,EAAE,KAdQ;AAezBa,EAAAA,KAAK,EAAE,EAfkB;AAgBzB2H,EAAAA,SAAS,EAAE,KAhBc;AAiBzBrG,EAAAA,SAAS,EAAE,KAjBc;AAkBzBwC,EAAAA,uBAAuB,EAAE,IAlBA;AAmBzB2C,EAAAA,eAAe,EAAE,KAnBQ;AAoBzB5B,EAAAA,eAAe,EAAE,KApBQ;AAqBzB/E,EAAAA,IAAI,EAAE;AArBmB,CAA1B,C,CAwBA;;AACArD,UAAU,CAAC4K,aAAX,GAA2BzN,UAAU,CAAC0N,cAAX,CAA0BC,UAArD;;AAEA,IAAIuG,eAAe,GAAG,SAASA,eAAT,CAAyB9Q,KAAzB,EAAgC1E,KAAhC,EAAuC;AAC5D,SAAO;AACNwE,IAAAA,aAAa,EAAEE,KAAK,CAAC+Q,cAAN,CAAqBzV,KAAK,CAAC+E,WAA3B,KAA2CL,KAAK,CAAC+Q,cAAN,CAAqBzV,KAAK,CAAC+E,WAA3B,EAAwCf,KAAnF,IAA4F,IADrG;AAENW,IAAAA,WAAW,EAAED,KAAK,CAACmQ,IAAN,CAAW7U,KAAK,CAAC+E,WAAjB,KAAiCL,KAAK,CAACmQ,IAAN,CAAW7U,KAAK,CAAC+E,WAAjB,EAA8B8P,IAFtE;AAGN5B,IAAAA,OAAO,EAAEvO,KAAK,CAACuO,OAAN,CAAcjT,KAAK,CAAC+E,WAApB,CAHH;AAIN+N,IAAAA,eAAe,EAAEpO,KAAK,CAACgR,qBAAN,CAA4B1V,KAAK,CAAC+E,WAAlC,CAJX;AAKNwC,IAAAA,WAAW,EAAE7C,KAAK,CAAC4P,MAAN,CAAa/M,WALpB;AAMN4K,IAAAA,SAAS,EAAEzN,KAAK,CAACyN,SAAN,CAAgBnS,KAAK,CAAC+E,WAAtB,KAAsC,KAN3C;AAONqN,IAAAA,KAAK,EAAE1N,KAAK,CAAC0N,KAAN,CAAYpS,KAAK,CAAC+E,WAAlB,CAPD;AAQNuP,IAAAA,MAAM,EAAE5P,KAAK,CAAC4P,MARR;AASNvB,IAAAA,eAAe,EAAErO,KAAK,CAACqO,eAAN,CAAsB/S,KAAK,CAAC+E,WAA5B,CATX;AAUNiO,IAAAA,UAAU,EAAEtO,KAAK,CAACsO,UAAN,CAAiBhT,KAAK,CAAC+E,WAAvB,CAVN;AAWN4Q,IAAAA,IAAI,EAAEjR,KAAK,CAACmQ,IAAN,CAAW7U,KAAK,CAAC+E,WAAjB,KAAiCL,KAAK,CAACmQ,IAAN,CAAW7U,KAAK,CAAC+E,WAAjB,EAA8B4Q,IAA/D,IAAuE,CAXvE;AAYNC,IAAAA,KAAK,EAAElR,KAAK,CAACmQ,IAAN,CAAW7U,KAAK,CAAC+E,WAAjB,KAAiCL,KAAK,CAACmQ,IAAN,CAAW7U,KAAK,CAAC+E,WAAjB,EAA8B6Q,KAZhE;AAaNC,IAAAA,MAAM,EAAEnR,KAAK,CAACmQ,IAAN,CAAW7U,KAAK,CAAC+E,WAAjB,KAAiCL,KAAK,CAACmQ,IAAN,CAAW7U,KAAK,CAAC+E,WAAjB,EAA8B8Q,MAbjE;AAcNtK,IAAAA,gBAAgB,EAAE7G,KAAK,CAAC6G,gBAAN,CAAuBvL,KAAK,CAAC+E,WAA7B,CAdZ;AAeNwJ,IAAAA,aAAa,EAAE7J,KAAK,CAACoR,WAAN,CAAkB9V,KAAK,CAAC+E,WAAxB;AAfT,GAAP;AAiBA,CAlBD;;AAoBA,IAAIgR,kBAAkB,GAAG,SAASA,kBAAT,CAA4BC,QAA5B,EAAsC;AAC9D,SAAO;AACNxQ,IAAAA,yBAAyB,EAAE,SAASA,yBAAT,CAAmCyQ,SAAnC,EAA8C9B,OAA9C,EAAuD;AACjF,aAAO6B,QAAQ,CAAC,CAAC,GAAG/U,QAAQ,CAACuE,yBAAb,EAAwCyQ,SAAxC,EAAmD9B,OAAnD,CAAD,CAAf;AACA,KAHK;AAINC,IAAAA,cAAc,EAAE,SAASA,cAAT,CAAwB6B,SAAxB,EAAmClJ,KAAnC,EAA0C;AACzD,aAAOiJ,QAAQ,CAAC,CAAC,GAAG/U,QAAQ,CAACmT,cAAb,EAA6B6B,SAA7B,EAAwClJ,KAAxC,CAAD,CAAf;AACA,KANK;AAONsH,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyB4B,SAAzB,EAAoClJ,KAApC,EAA2C;AAC3D,aAAOiJ,QAAQ,CAAC,CAAC,GAAG/U,QAAQ,CAACoT,eAAb,EAA8B4B,SAA9B,EAAyClJ,KAAzC,CAAD,CAAf;AACA,KATK;AAUN+B,IAAAA,yBAAyB,EAAE,SAASA,yBAAT,CAAmC9K,KAAnC,EAA0C;AACpE,aAAOgS,QAAQ,CAAC,CAAC,GAAG/U,QAAQ,CAAC6N,yBAAb,EAAwC9K,KAAxC,CAAD,CAAf;AACA,KAZK;AAaNyB,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBwQ,SAAzB,EAAoCjW,KAApC,EAA2C;AAC3D,aAAOgW,QAAQ,CAAC,CAAC,GAAG/U,QAAQ,CAACwE,eAAb,EAA8BwQ,SAA9B,EAAyCjW,KAAzC,CAAD,CAAf;AACA,KAfK;AAgBNoG,IAAAA,WAAW,EAAE,SAASA,WAAT,CAAqB8P,iBAArB,EAAwC;AACpD,aAAOF,QAAQ,CAAC,CAAC,GAAG/U,QAAQ,CAACmF,WAAb,EAA0B8P,iBAA1B,CAAD,CAAf;AACA,KAlBK;AAmBNnC,IAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BP,cAA1B,EAA0CC,UAA1C,EAAsD;AACvE,aAAOuC,QAAQ,CAAC,CAAC,GAAG/U,QAAQ,CAACkV,qBAAb,EAAoC3C,cAApC,EAAoDC,UAApD,CAAD,CAAf;AACA;AArBK,GAAP;AAuBA,CAxBD;;AA0BA,IAAI2C,kBAAkB,GAAG,CAAC,GAAG7T,MAAM,CAAC8T,OAAX,EAAoBb,eAApB,EAAqCO,kBAArC,EAAyD,CAAC,GAAG/U,eAAe,CAACsV,SAApB,EAA+B,UAAUtW,KAAV,EAAiB;AACjI,SAAO,CAAC,GAAGS,KAAK,CAACgH,GAAV,EACN1E,kBAAkB,CAACE,OADb,EAEN/D,QAAQ,CAAC,EAAD,EAAKc,KAAL,EAAY;AAAE6E,IAAAA,iBAAiB,EAAE,IAArB;AAA2BkK,IAAAA,aAAa,EAAEzN,UAAU,CAAC0N,cAAX,CAA0BC;AAApE,GAAZ,CAFF,EAGN,YAAY;AACX,WAAO,CAAC,GAAGxO,KAAK,CAACgH,GAAV,EAAetD,UAAf,EAA2BjF,QAAQ,CAAC;AAAEgK,MAAAA,GAAG,EAAElJ,KAAK,CAACuW;AAAb,KAAD,EAAgCvW,KAAhC,CAAnC,CAAP;AACA,GALK,CAAP;AAOA,CARiF,CAAzD,CAAzB,C,CAUA;;AACA,IAAIwW,mBAAmB,GAAG5V,OAAO,CAACqC,OAAR,CAAgBwT,UAAhB,CAA2B,UAAUzW,KAAV,EAAiBkJ,GAAjB,EAAsB;AAC1E,SAAO,CAAC,GAAGzI,KAAK,CAACgH,GAAV,EAAe2O,kBAAf,EAAmClX,QAAQ,CAAC,EAAD,EAAKc,KAAL,EAAY;AAAEuW,IAAAA,cAAc,EAAErN;AAAlB,GAAZ,CAA3C,CAAP;AACA,CAFyB,CAA1B;;AAGA,CAAC,GAAG/H,sBAAsB,CAAC8B,OAA3B,EAAoCuT,mBAApC,EAAyDrS,UAAzD;AAEAqS,mBAAmB,CAACE,IAApB,GAA2B,YAA3B;AACA1X,OAAO,CAACiE,OAAR,GAAkBuT,mBAAlB","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _InputIcon = require('../../styles/InputIcon');\n\nvar _InputIcon2 = _interopRequireDefault(_InputIcon);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _utils = require('../../utils');\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx jsx */\n\n\nvar DataSearch = function (_Component) {\n\t_inherits(DataSearch, _Component);\n\n\tfunction DataSearch(props) {\n\t\t_classCallCheck(this, DataSearch);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tvar currentValue = props.selectedValue || props.value || props.defaultValue || '';\n\n\t\t_this.state = {\n\t\t\tcurrentValue: currentValue,\n\t\t\tsuggestions: [],\n\t\t\tisOpen: false\n\t\t};\n\t\t_this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n\t\t/**\n   * To regulate the query execution based on the input handler,\n   * the component query will only get executed when it sets to `true`.\n   * */\n\t\t_this.isPending = false;\n\t\t_this.queryOptions = _this.getBasicQueryOptions();\n\t\t// Set custom and default queries in store\n\t\t(0, _helper.updateCustomQuery)(props.componentId, props, currentValue);\n\t\t(0, _helper.updateDefaultQuery)(props.componentId, props, currentValue);\n\t\tif (props.highlight) {\n\t\t\tvar queryOptions = DataSearch.highlightQuery(props) || {};\n\t\t\tif (props.customHighlight && typeof props.customHighlight === 'function') {\n\t\t\t\tprops.setCustomHighlightOptions(props.componentId, props.customHighlight(props));\n\t\t\t}\n\t\t\t_this.queryOptions = _extends({}, queryOptions, _this.getBasicQueryOptions());\n\t\t\tprops.setQueryOptions(props.componentId, queryOptions);\n\t\t} else {\n\t\t\tprops.setQueryOptions(props.componentId, _this.queryOptions);\n\t\t}\n\n\t\tvar hasMounted = false;\n\t\tvar cause = null;\n\n\t\tif (currentValue) {\n\t\t\tif (props.onChange) {\n\t\t\t\tprops.onChange(currentValue, _this.triggerQuery);\n\t\t\t}\n\t\t\t_this.setValue(currentValue, true, props, cause, hasMounted);\n\t\t}\n\t\treturn _this;\n\t}\n\n\tDataSearch.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['highlight', 'dataField', 'highlightField', 'aggregationField'], function () {\n\t\t\tvar queryOptions = DataSearch.highlightQuery(_this2.props) || {};\n\t\t\tif (_this2.props.customHighlight && typeof _this2.props.customHighlight === 'function') {\n\t\t\t\t_this2.props.setCustomHighlightOptions(_this2.props.componentId, _this2.props.customHighlight(_this2.props));\n\t\t\t}\n\t\t\t_this2.queryOptions = _extends({}, queryOptions, _this2.getBasicQueryOptions());\n\t\t\t_this2.props.setQueryOptions(_this2.props.componentId, queryOptions);\n\t\t});\n\n\t\t// Treat defaultQuery and customQuery as reactive props\n\t\tif (!(0, _utils.isQueryIdentical)(this.state.currentValue, this.props, prevProps, 'defaultQuery')) {\n\t\t\tthis.updateDefaultQuery(this.state.currentValue, this.props);\n\t\t\tthis.updateQuery(this.state.currentValue, this.props);\n\t\t}\n\n\t\tif (!(0, _utils.isQueryIdentical)(this.state.currentValue, this.props, prevProps, 'customQuery')) {\n\t\t\tthis.updateQuery(this.state.currentValue, this.props);\n\t\t}\n\n\t\tif (Array.isArray(this.props.suggestions) && this.state.currentValue.trim().length) {\n\t\t\t// shallow check allows us to set suggestions even if the next set\n\t\t\t// of suggestions are same as the current one\n\t\t\tif (this.props.suggestions !== prevProps.suggestions) {\n\t\t\t\tif (this.props.onSuggestions) {\n\t\t\t\t\tthis.props.onSuggestions(this.props.suggestions);\n\t\t\t\t}\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tthis.setState({\n\t\t\t\t\tsuggestions: this.onSuggestions(this.props.suggestions)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['fieldWeights', 'fuzziness', 'queryFormat', 'dataField', 'nestedField', 'searchOperators'], function () {\n\t\t\t_this2.updateQuery(_this2.state.currentValue, _this2.props);\n\t\t});\n\t\tif (this.props.value !== prevProps.value) {\n\t\t\tthis.setValue(this.props.value, true, this.props, undefined, undefined, false);\n\t\t} else if (\n\t\t// since, selectedValue will be updated when currentValue changes,\n\t\t// we must only check for the changes introduced by\n\t\t// clear action from SelectedFilters component in which case,\n\t\t// the currentValue will never match the updated selectedValue\n\t\tthis.props.selectedValue !== prevProps.selectedValue && this.state.currentValue !== this.props.selectedValue) {\n\t\t\tvar _props = this.props,\n\t\t\t    value = _props.value,\n\t\t\t    onChange = _props.onChange;\n\n\t\t\tif (value === undefined) {\n\t\t\t\tthis.setValue(this.props.selectedValue || '', true, this.props);\n\t\t\t} else if (onChange) {\n\t\t\t\t// value prop exists\n\t\t\t\tonChange(this.props.selectedValue || '', this.triggerQuery);\n\t\t\t} else {\n\t\t\t\t// value prop exists and onChange is not defined:\n\t\t\t\t// we need to put the current value back into the store\n\t\t\t\t// if the clear action was triggered by interacting with\n\t\t\t\t// selected-filters component\n\t\t\t\tthis.isPending = false;\n\t\t\t\tthis.setValue(this.state.currentValue, true, this.props);\n\t\t\t}\n\t\t}\n\t};\n\n\t// returns size and aggs property\n\n\n\tDataSearch.prototype.shouldMicRender = function shouldMicRender(showVoiceSearch) {\n\t\t// checks for SSR\n\t\tif (typeof window === 'undefined') return false;\n\t\treturn showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n\t};\n\n\tDataSearch.prototype.render = function render() {\n\t\tvar _this3 = this;\n\n\t\tvar currentValue = this.state.currentValue;\n\n\t\tvar suggestionsList = this.parsedSuggestions;\n\t\tvar _props2 = this.props,\n\t\t    theme = _props2.theme,\n\t\t    themePreset = _props2.themePreset,\n\t\t    size = _props2.size;\n\n\t\treturn (0, _core.jsx)(\n\t\t\t_Container2.default,\n\t\t\t{ style: this.props.style, className: this.props.className },\n\t\t\tthis.props.title && (0, _core.jsx)(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\tthis.props.defaultSuggestions || this.props.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n\t\t\t\tid: this.props.componentId + '-downshift',\n\t\t\t\tonChange: this.onSuggestionSelected,\n\t\t\t\tonStateChange: this.handleStateChange,\n\t\t\t\tisOpen: this.state.isOpen,\n\t\t\t\titemToString: function itemToString(i) {\n\t\t\t\t\treturn i;\n\t\t\t\t},\n\t\t\t\trender: function render(_ref) {\n\t\t\t\t\tvar getRootProps = _ref.getRootProps,\n\t\t\t\t\t    getInputProps = _ref.getInputProps,\n\t\t\t\t\t    getItemProps = _ref.getItemProps,\n\t\t\t\t\t    isOpen = _ref.isOpen,\n\t\t\t\t\t    highlightedIndex = _ref.highlightedIndex,\n\t\t\t\t\t    rest = _objectWithoutProperties(_ref, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex']);\n\n\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\tgetRootProps({ css: _Input.suggestionsContainer }, { suppressRefError: true }),\n\t\t\t\t\t\t(0, _core.jsx)(_Input2.default, _extends({\n\t\t\t\t\t\t\t'aria-label': _this3.props.componentId,\n\t\t\t\t\t\t\tid: _this3.props.componentId + '-input',\n\t\t\t\t\t\t\tshowIcon: _this3.props.showIcon,\n\t\t\t\t\t\t\tshowClear: _this3.props.showClear,\n\t\t\t\t\t\t\ticonPosition: _this3.props.iconPosition,\n\t\t\t\t\t\t\tref: function ref(c) {\n\t\t\t\t\t\t\t\t_this3._inputRef = c;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, getInputProps({\n\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'input'),\n\t\t\t\t\t\t\tplaceholder: _this3.props.placeholder,\n\t\t\t\t\t\t\tvalue: _this3.state.currentValue === null ? '' : _this3.state.currentValue,\n\t\t\t\t\t\t\tonChange: _this3.onInputChange,\n\t\t\t\t\t\t\tonBlur: _this3.withTriggerQuery(_this3.props.onBlur),\n\t\t\t\t\t\t\tonFocus: _this3.handleFocus,\n\t\t\t\t\t\t\tonKeyPress: _this3.withTriggerQuery(_this3.props.onKeyPress),\n\t\t\t\t\t\t\tonKeyDown: function onKeyDown(e) {\n\t\t\t\t\t\t\t\treturn _this3.handleKeyDown(e, highlightedIndex);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonKeyUp: _this3.withTriggerQuery(_this3.props.onKeyUp)\n\t\t\t\t\t\t}), {\n\t\t\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t\t\t})),\n\t\t\t\t\t\t_this3.renderIcons(),\n\t\t\t\t\t\t_this3.hasCustomRenderer && _this3.getComponent(_extends({\n\t\t\t\t\t\t\tgetInputProps: getInputProps,\n\t\t\t\t\t\t\tgetItemProps: getItemProps,\n\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\thighlightedIndex: highlightedIndex\n\t\t\t\t\t\t}, rest)),\n\t\t\t\t\t\t_this3.renderLoader(),\n\t\t\t\t\t\t_this3.renderError(),\n\t\t\t\t\t\t!_this3.hasCustomRenderer && isOpen && suggestionsList.length ? (0, _core.jsx)(\n\t\t\t\t\t\t\t'ul',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcss: (0, _Input.suggestions)(themePreset, theme),\n\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'list')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t(0, _utils.hasQuerySuggestionsRenderer)(_this3.props) ? _this3.getComponent(_extends({\n\t\t\t\t\t\t\t\tgetInputProps: getInputProps,\n\t\t\t\t\t\t\t\tgetItemProps: getItemProps,\n\t\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\t\thighlightedIndex: highlightedIndex\n\t\t\t\t\t\t\t}, rest), true) : _this3.topSuggestions.map(function (sugg, index) {\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: sugg }), {\n\t\t\t\t\t\t\t\t\t\tkey: index + 1 + '-' + sugg.value,\n\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: _this3.getBackgroundColor(highlightedIndex, index)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue,\n\t\t\t\t\t\t\t\t\t\tsuggestion: sugg\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tsuggestionsList.slice(0, size).map(function (item, index) {\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: item }), {\n\t\t\t\t\t\t\t\t\t\tkey: index + _this3.topSuggestions.length + 1 + '-' + item.value,\n\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: _this3.getBackgroundColor(highlightedIndex, index + _this3.topSuggestions.length)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue,\n\t\t\t\t\t\t\t\t\t\tsuggestion: item\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) : _this3.renderNoSuggestion(suggestionsList)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}, this.props.downShiftProps)) : (0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\t{ css: _Input.suggestionsContainer },\n\t\t\t\t(0, _core.jsx)(_Input2.default, {\n\t\t\t\t\t'aria-label': this.props.componentId,\n\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'input') || null,\n\t\t\t\t\tplaceholder: this.props.placeholder,\n\t\t\t\t\tvalue: this.state.currentValue ? this.state.currentValue : '',\n\t\t\t\t\tonChange: this.onInputChange,\n\t\t\t\t\tonBlur: this.withTriggerQuery(this.props.onBlur),\n\t\t\t\t\tonFocus: this.withTriggerQuery(this.props.onFocus),\n\t\t\t\t\tonKeyPress: this.withTriggerQuery(this.props.onKeyPress),\n\t\t\t\t\tonKeyDown: this.withTriggerQuery(this.props.onKeyDown),\n\t\t\t\t\tonKeyUp: this.withTriggerQuery(this.props.onKeyUp),\n\t\t\t\t\tautoFocus: this.props.autoFocus,\n\t\t\t\t\ticonPosition: this.props.iconPosition,\n\t\t\t\t\tshowIcon: this.props.showIcon,\n\t\t\t\t\tshowClear: this.props.showClear,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t}),\n\t\t\t\tthis.renderIcons()\n\t\t\t)\n\t\t);\n\t};\n\n\t_createClass(DataSearch, [{\n\t\tkey: 'stats',\n\t\tget: function get() {\n\t\t\treturn (0, _helper.getResultStats)(this.props);\n\t\t}\n\t}, {\n\t\tkey: 'parsedSuggestions',\n\t\tget: function get() {\n\t\t\tvar suggestionsList = [];\n\t\t\tvar currentValue = this.state.currentValue;\n\t\t\tvar defaultSuggestions = this.props.defaultSuggestions;\n\n\t\t\tif (!currentValue && defaultSuggestions && defaultSuggestions.length) {\n\t\t\t\tsuggestionsList = defaultSuggestions;\n\t\t\t} else if (currentValue) {\n\t\t\t\tsuggestionsList = this.state.suggestions;\n\t\t\t}\n\t\t\treturn (0, _helper.withClickIds)(suggestionsList);\n\t\t}\n\t}, {\n\t\tkey: 'hasCustomRenderer',\n\t\tget: function get() {\n\t\t\treturn (0, _utils.hasCustomRenderer)(this.props);\n\t\t}\n\t}, {\n\t\tkey: 'topSuggestions',\n\t\tget: function get() {\n\t\t\tvar _props3 = this.props,\n\t\t\t    enableQuerySuggestions = _props3.enableQuerySuggestions,\n\t\t\t    querySuggestions = _props3.querySuggestions,\n\t\t\t    showDistinctSuggestions = _props3.showDistinctSuggestions;\n\t\t\tvar currentValue = this.state.currentValue;\n\n\t\t\treturn enableQuerySuggestions ? (0, _helper.getTopSuggestions)(querySuggestions, currentValue, showDistinctSuggestions) : [];\n\t\t}\n\t}]);\n\n\treturn DataSearch;\n}(_react.Component);\n\nDataSearch.highlightQuery = function (props) {\n\tif (props.customHighlight) {\n\t\treturn props.customHighlight(props);\n\t}\n\tif (!props.highlight) {\n\t\treturn null;\n\t}\n\tvar fields = {};\n\tvar highlightField = props.highlightField ? props.highlightField : props.dataField;\n\n\tif (typeof highlightField === 'string') {\n\t\tfields[highlightField] = {};\n\t} else if (Array.isArray(highlightField)) {\n\t\thighlightField.forEach(function (item) {\n\t\t\tfields[item] = {};\n\t\t});\n\t}\n\n\treturn {\n\t\thighlight: _extends({\n\t\t\tpre_tags: ['<mark>'],\n\t\t\tpost_tags: ['</mark>'],\n\t\t\tfields: fields\n\t\t}, props.highlightField && { require_field_match: false })\n\t};\n};\n\nDataSearch.defaultQuery = function (value, props) {\n\tvar finalQuery = null;\n\tvar fields = void 0;\n\n\tif (value) {\n\t\tif (Array.isArray(props.dataField)) {\n\t\t\tfields = props.dataField;\n\t\t} else {\n\t\t\tfields = [props.dataField];\n\t\t}\n\n\t\tif (props.queryString) {\n\t\t\tfinalQuery = {\n\t\t\t\tquery_string: DataSearch.shouldQuery(value, fields, props)\n\t\t\t};\n\t\t} else if (props.searchOperators) {\n\t\t\tfinalQuery = {\n\t\t\t\tsimple_query_string: DataSearch.shouldQuery(value, fields, props)\n\t\t\t};\n\t\t} else {\n\t\t\tfinalQuery = {\n\t\t\t\tbool: {\n\t\t\t\t\tshould: DataSearch.shouldQuery(value, fields, props),\n\t\t\t\t\tminimum_should_match: '1'\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tif (value === '') {\n\t\tfinalQuery = null;\n\t}\n\n\tif (finalQuery && props.nestedField) {\n\t\tfinalQuery = {\n\t\t\tnested: {\n\t\t\t\tpath: props.nestedField,\n\t\t\t\tquery: finalQuery\n\t\t\t}\n\t\t};\n\t}\n\n\treturn finalQuery;\n};\n\nDataSearch.shouldQuery = function (value, dataFields, props) {\n\tvar fields = dataFields.map(function (field, index) {\n\t\treturn '' + field + (Array.isArray(props.fieldWeights) && props.fieldWeights[index] ? '^' + props.fieldWeights[index] : '');\n\t});\n\n\tif (props.searchOperators || props.queryString) {\n\t\treturn {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\tdefault_operator: props.queryFormat\n\t\t};\n\t}\n\n\tif (props.queryFormat === 'and') {\n\t\treturn [{\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'cross_fields',\n\t\t\t\toperator: 'and'\n\t\t\t}\n\t\t}, {\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'phrase',\n\t\t\t\toperator: 'and'\n\t\t\t}\n\t\t}];\n\t}\n\n\treturn [{\n\t\tmulti_match: {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\ttype: 'best_fields',\n\t\t\toperator: 'or',\n\t\t\tfuzziness: props.fuzziness ? props.fuzziness : 0\n\t\t}\n\t}, {\n\t\tmulti_match: {\n\t\t\tquery: value,\n\t\t\tfields: fields,\n\t\t\ttype: 'phrase',\n\t\t\toperator: 'or'\n\t\t}\n\t}];\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this4 = this;\n\n\tthis.getBasicQueryOptions = function () {\n\t\tvar aggregationField = _this4.props.aggregationField;\n\n\t\tvar queryOptions = (0, _helper.getQueryOptions)(_this4.props);\n\t\tif (aggregationField) {\n\t\t\tqueryOptions.aggs = (0, _helper.getCompositeAggsQuery)({}, _this4.props, null, true).aggs;\n\t\t}\n\t\treturn queryOptions;\n\t};\n\n\tthis.onSuggestions = function (results) {\n\t\treturn (0, _helper.handleOnSuggestions)(results, _this4.state.currentValue, _this4.props);\n\t};\n\n\tthis.setValue = function (value) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this4.props;\n\t\tvar cause = arguments[3];\n\t\tvar hasMounted = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n\t\tvar toggleIsOpen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tif (hasMounted) {\n\t\t\t\t_this4.setState({\n\t\t\t\t\tcurrentValue: value,\n\t\t\t\t\tsuggestions: []\n\t\t\t\t}, function () {\n\t\t\t\t\tif (isDefaultValue) {\n\t\t\t\t\t\tif (_this4.props.autosuggest) {\n\t\t\t\t\t\t\tif (toggleIsOpen) {\n\t\t\t\t\t\t\t\t_this4.setState({\n\t\t\t\t\t\t\t\t\tisOpen: false\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_this4.updateDefaultQuery(value, props);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// in case of strict selection only SUGGESTION_SELECT should be able\n\t\t\t\t\t\t// to set the query otherwise the value should reset\n\t\t\t\t\t\tif (props.strictSelection) {\n\t\t\t\t\t\t\tif (cause === _causes2.default.SUGGESTION_SELECT || value === '') {\n\t\t\t\t\t\t\t\t_this4.updateQuery(value, props);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_this4.setValue('', true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this4.updateQuery(value, props);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// debounce for handling text while typing\n\t\t\t\t\t\t_this4.handleTextChange(value);\n\t\t\t\t\t}\n\t\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t\t\t// Set the already fetched suggestions if query is same as used last to fetch the hits\n\t\t\t\t\tif (value === props.lastUsedQuery) {\n\t\t\t\t\t\t_this4.setState({\n\t\t\t\t\t\t\tsuggestions: _this4.onSuggestions(_this4.props.suggestions)\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// invoke on suggestions\n\t\t\t\t\t\tif (_this4.props.onSuggestions) {\n\t\t\t\t\t\t\t_this4.props.onSuggestions(_this4.props.suggestions);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (_this4.props.autosuggest) {\n\t\t\t\t\t_this4.updateDefaultQuery(value, props);\n\t\t\t\t}\n\t\t\t\t_this4.updateQuery(value, props);\n\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t}\n\t\t};\n\t\t(0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.handleTextChange = (0, _helper.debounce)(function (value) {\n\t\tif (_this4.props.autosuggest) {\n\t\t\t_this4.updateDefaultQuery(value, _this4.props);\n\t\t} else {\n\t\t\t_this4.updateQuery(value, _this4.props);\n\t\t}\n\t}, this.props.debounce);\n\n\tthis.updateDefaultQuery = function (value, props) {\n\t\tvar defaultQuery = props.defaultQuery;\n\n\t\tvar defaultQueryOptions = void 0;\n\t\tvar query = DataSearch.defaultQuery(value, props);\n\t\tif (defaultQuery) {\n\t\t\tvar defaultQueryTobeSet = defaultQuery(value, props) || {};\n\t\t\tif (defaultQueryTobeSet.query) {\n\t\t\t\tquery = defaultQueryTobeSet.query;\n\t\t\t}\n\t\t\tdefaultQueryOptions = (0, _helper.getOptionsFromQuery)(defaultQueryTobeSet);\n\t\t\t// Update calculated default query in store\n\t\t\t(0, _helper.updateDefaultQuery)(props.componentId, props, value);\n\t\t}\n\t\tprops.setSuggestionsSearchValue(value);\n\t\tprops.setQueryOptions(_this4.internalComponent, _extends({}, _this4.queryOptions, defaultQueryOptions));\n\t\tprops.updateQuery({\n\t\t\tcomponentId: _this4.internalComponent,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tcomponentType: _constants.componentTypes.dataSearch\n\t\t});\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tvar customQuery = props.customQuery,\n\t\t    filterLabel = props.filterLabel,\n\t\t    showFilter = props.showFilter,\n\t\t    URLParams = props.URLParams;\n\n\n\t\tvar customQueryOptions = void 0;\n\t\tvar query = DataSearch.defaultQuery(value, props);\n\t\tif (customQuery) {\n\t\t\tvar customQueryTobeSet = customQuery(value, props) || {};\n\t\t\tvar queryTobeSet = customQueryTobeSet.query;\n\t\t\tif (queryTobeSet) {\n\t\t\t\tquery = queryTobeSet;\n\t\t\t}\n\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQueryTobeSet);\n\t\t\t(0, _helper.updateCustomQuery)(props.componentId, props, value);\n\t\t}\n\n\t\t// query options should be applied to the source component,\n\t\t// not on internal component, hence using `this.props.componentId` here\n\t\tprops.setQueryOptions(props.componentId, _extends({}, _this4.queryOptions, customQueryOptions));\n\t\tif (!_this4.isPending) {\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: props.componentId,\n\t\t\t\tquery: query,\n\t\t\t\tvalue: value,\n\t\t\t\tlabel: filterLabel,\n\t\t\t\tshowFilter: showFilter,\n\t\t\t\tURLParams: URLParams,\n\t\t\t\tcomponentType: _constants.componentTypes.dataSearch\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.handleFocus = function (event) {\n\t\t_this4.setState({\n\t\t\tisOpen: true\n\t\t});\n\t\tif (_this4.props.onFocus) {\n\t\t\t_this4.props.onFocus(event, _this4.triggerQuery);\n\t\t}\n\t};\n\n\tthis.clearValue = function () {\n\t\t_this4.isPending = false;\n\t\tvar onChange = _this4.props.onChange;\n\n\t\t_this4.setValue('', true);\n\t\tif (onChange) {\n\t\t\tonChange('', _this4.triggerQuery);\n\t\t}\n\t\t_this4.onValueSelected(null, _causes2.default.CLEAR_VALUE);\n\t};\n\n\tthis.handleKeyDown = function (event, highlightedIndex) {\n\t\tvar _props4 = _this4.props,\n\t\t    value = _props4.value,\n\t\t    onChange = _props4.onChange;\n\n\t\tif (value !== undefined && onChange) {\n\t\t\t_this4.isPending = true;\n\t\t}\n\t\t// if a suggestion was selected, delegate the handling\n\t\t// to suggestion handler\n\t\tif (event.key === 'Enter' && highlightedIndex === null) {\n\t\t\t_this4.setValue(event.target.value, true);\n\t\t\t_this4.onValueSelected(event.target.value, _causes2.default.ENTER_PRESS);\n\t\t}\n\t\tif (_this4.props.onKeyDown) {\n\t\t\t_this4.props.onKeyDown(event, _this4.triggerQuery);\n\t\t}\n\t};\n\n\tthis.onInputChange = function (e) {\n\t\tvar inputValue = e.target.value;\n\n\t\tif (!_this4.state.isOpen) {\n\t\t\t_this4.setState({\n\t\t\t\tisOpen: true\n\t\t\t});\n\t\t}\n\n\t\tvar _props5 = _this4.props,\n\t\t    value = _props5.value,\n\t\t    onChange = _props5.onChange;\n\n\t\tif (value === undefined) {\n\t\t\t_this4.setValue(inputValue);\n\t\t} else if (onChange) {\n\t\t\t_this4.isPending = true;\n\t\t\t// handle caret position in controlled components\n\t\t\t(0, _utils.handleCaretPosition)(e);\n\t\t\tonChange(inputValue, _this4.triggerQuery, e);\n\t\t}\n\t};\n\n\tthis.triggerQuery = function () {\n\t\t_this4.isPending = false;\n\t\t_this4.setValue(_this4.props.value, true, _this4.props);\n\t};\n\n\tthis.onSuggestionSelected = function (suggestion) {\n\t\tvar _props6 = _this4.props,\n\t\t    value = _props6.value,\n\t\t    onChange = _props6.onChange;\n\n\t\t_this4.setState({\n\t\t\tisOpen: false\n\t\t});\n\t\tif (value === undefined) {\n\t\t\t_this4.setValue(suggestion.value, true, _this4.props, _causes2.default.SUGGESTION_SELECT);\n\t\t} else if (onChange) {\n\t\t\t_this4.isPending = false;\n\t\t\tonChange(suggestion.value, _this4.triggerQuery);\n\t\t}\n\t\t// Record analytics for selected suggestions\n\t\t_this4.triggerClickAnalytics(suggestion._click_id);\n\t\t// onValueSelected is user interaction driven:\n\t\t// it should be triggered irrespective of controlled (or)\n\t\t// uncontrolled component behavior\n\t\t_this4.onValueSelected(suggestion.value, _causes2.default.SUGGESTION_SELECT, suggestion.source);\n\t};\n\n\tthis.onValueSelected = function () {\n\t\tfor (var _len = arguments.length, cause = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\tcause[_key - 1] = arguments[_key];\n\t\t}\n\n\t\tvar currentValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this4.state.currentValue;\n\t\tvar onValueSelected = _this4.props.onValueSelected;\n\n\t\tif (onValueSelected) {\n\t\t\tonValueSelected.apply(undefined, [currentValue].concat(cause));\n\t\t}\n\t};\n\n\tthis.handleStateChange = function (changes) {\n\t\tvar isOpen = changes.isOpen,\n\t\t    type = changes.type;\n\n\t\tif (type === _downshift2.default.stateChangeTypes.mouseUp) {\n\t\t\t_this4.setState({\n\t\t\t\tisOpen: isOpen\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.getBackgroundColor = function (highlightedIndex, index) {\n\t\tvar isDark = _this4.props.themePreset === 'dark';\n\t\tif (isDark) {\n\t\t\treturn highlightedIndex === index ? '#555' : '#424242';\n\t\t}\n\t\treturn highlightedIndex === index ? '#eee' : '#fff';\n\t};\n\n\tthis.handleSearchIconClick = function () {\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (currentValue.trim()) {\n\t\t\t_this4.isPending = false;\n\t\t\t_this4.setValue(currentValue, true);\n\t\t\t_this4.onValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n\t\t}\n\t};\n\n\tthis.handleVoiceResults = function (_ref2) {\n\t\tvar results = _ref2.results;\n\t\tvar autosuggest = _this4.props.autosuggest;\n\n\t\tif (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n\t\t\t_this4.isPending = false;\n\t\t\t_this4.setValue(results[0][0].transcript.trim(), !autosuggest);\n\t\t\tif (autosuggest) {\n\t\t\t\t_this4._inputRef.focus();\n\t\t\t\t_this4.setState({\n\t\t\t\t\tisOpen: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.renderIcon = function () {\n\t\tif (_this4.props.showIcon) {\n\t\t\treturn _this4.props.icon || (0, _core.jsx)(_SearchSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderCancelIcon = function () {\n\t\tif (_this4.props.showClear) {\n\t\t\treturn _this4.props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderIcons = function () {\n\t\tvar currentValue = _this4.state.currentValue;\n\t\tvar _props7 = _this4.props,\n\t\t    showIcon = _props7.showIcon,\n\t\t    showClear = _props7.showClear,\n\t\t    renderMic = _props7.renderMic,\n\t\t    getMicInstance = _props7.getMicInstance,\n\t\t    showVoiceSearch = _props7.showVoiceSearch,\n\t\t    iconPosition = _props7.iconPosition,\n\t\t    innerClass = _props7.innerClass;\n\n\t\treturn (0, _core.jsx)(\n\t\t\t'div',\n\t\t\tnull,\n\t\t\t_this4.state.currentValue && showClear && (0, _core.jsx)(\n\t\t\t\t_InputIcon2.default,\n\t\t\t\t{\n\t\t\t\t\tonClick: _this4.clearValue,\n\t\t\t\t\ticonPosition: 'right',\n\t\t\t\t\tclearIcon: iconPosition === 'right',\n\t\t\t\t\tshowIcon: showIcon,\n\t\t\t\t\tisClearIcon: true\n\t\t\t\t},\n\t\t\t\t_this4.renderCancelIcon()\n\t\t\t),\n\t\t\t_this4.shouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n\t\t\t\tgetInstance: getMicInstance,\n\t\t\t\trender: renderMic,\n\t\t\t\ticonPosition: iconPosition,\n\t\t\t\tonResult: _this4.handleVoiceResults,\n\t\t\t\tclassName: (0, _helper.getClassName)(innerClass, 'mic') || null,\n\t\t\t\tapplyClearStyle: !!currentValue && showClear,\n\t\t\t\tshowIcon: showIcon\n\t\t\t}),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_InputIcon2.default,\n\t\t\t\t{\n\t\t\t\t\tonClick: _this4.handleSearchIconClick,\n\t\t\t\t\ticonPosition: iconPosition,\n\t\t\t\t\tshowIcon: showIcon\n\t\t\t\t},\n\t\t\t\t_this4.renderIcon()\n\t\t\t)\n\t\t);\n\t};\n\n\tthis.renderNoSuggestion = function () {\n\t\tvar finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\tvar _props8 = _this4.props,\n\t\t    themePreset = _props8.themePreset,\n\t\t    theme = _props8.theme,\n\t\t    isLoading = _props8.isLoading,\n\t\t    renderNoSuggestion = _props8.renderNoSuggestion,\n\t\t    innerClass = _props8.innerClass,\n\t\t    error = _props8.error,\n\t\t    renderError = _props8.renderError;\n\t\tvar _state = _this4.state,\n\t\t    isOpen = _state.isOpen,\n\t\t    currentValue = _state.currentValue;\n\n\t\tif (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tthemePreset: themePreset,\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tinnerClassName: 'noSuggestion'\n\t\t\t\t},\n\t\t\t\ttypeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderLoader = function () {\n\t\tvar _props9 = _this4.props,\n\t\t    loader = _props9.loader,\n\t\t    isLoading = _props9.isLoading,\n\t\t    themePreset = _props9.themePreset,\n\t\t    theme = _props9.theme,\n\t\t    innerClass = _props9.innerClass;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (isLoading && loader && currentValue) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'loader',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\tloader\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderError = function () {\n\t\tvar _props10 = _this4.props,\n\t\t    error = _props10.error,\n\t\t    renderError = _props10.renderError,\n\t\t    themePreset = _props10.themePreset,\n\t\t    theme = _props10.theme,\n\t\t    isLoading = _props10.isLoading,\n\t\t    innerClass = _props10.innerClass;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tif (error && renderError && currentValue && !isLoading) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'error',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\t(0, _utils.isFunction)(renderError) ? renderError(error) : renderError\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.getComponent = function () {\n\t\tvar downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\tvar isQuerySuggestionsRender = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar _props11 = _this4.props,\n\t\t    error = _props11.error,\n\t\t    isLoading = _props11.isLoading,\n\t\t    aggregationData = _props11.aggregationData,\n\t\t    promotedResults = _props11.promotedResults,\n\t\t    customData = _props11.customData,\n\t\t    rawData = _props11.rawData;\n\t\tvar currentValue = _this4.state.currentValue;\n\n\t\tvar data = {\n\t\t\terror: error,\n\t\t\tloading: isLoading,\n\t\t\tdownshiftProps: downshiftProps,\n\t\t\tdata: _this4.parsedSuggestions,\n\t\t\tpromotedData: promotedResults || [],\n\t\t\tcustomData: customData || {},\n\t\t\taggregationData: aggregationData || [],\n\t\t\trawData: rawData,\n\t\t\tvalue: currentValue,\n\t\t\ttriggerClickAnalytics: _this4.triggerClickAnalytics,\n\t\t\tresultStats: _this4.stats,\n\t\t\tquerySuggestions: _this4.topSuggestions\n\t\t};\n\t\tif (isQuerySuggestionsRender) {\n\t\t\treturn (0, _utils.getQuerySuggestionsComponent)({\n\t\t\t\tdownshiftProps: downshiftProps,\n\t\t\t\tdata: _this4.topSuggestions,\n\t\t\t\tvalue: currentValue,\n\t\t\t\tloading: isLoading,\n\t\t\t\terror: error\n\t\t\t}, _this4.props);\n\t\t}\n\t\treturn (0, _utils.getComponent)(data, _this4.props);\n\t};\n\n\tthis.triggerClickAnalytics = function (searchPosition, documentId) {\n\t\tvar docId = documentId;\n\t\tif (!docId) {\n\t\t\tvar hitData = _this4.parsedSuggestions.find(function (hit) {\n\t\t\t\treturn hit._click_id === searchPosition;\n\t\t\t});\n\t\t\tif (hitData && hitData.source && hitData.source._id) {\n\t\t\t\tdocId = hitData.source._id;\n\t\t\t}\n\t\t}\n\t\t_this4.props.triggerAnalytics(searchPosition, docId);\n\t};\n\n\tthis.withTriggerQuery = function (func) {\n\t\tif (func) {\n\t\t\treturn function (e) {\n\t\t\t\treturn func(e, _this4.triggerQuery);\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t};\n};\n\nDataSearch.propTypes = {\n\tsetQueryOptions: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\toptions: _types2.default.options,\n\tselectedValue: _types2.default.selectedValue,\n\tsuggestions: _types2.default.suggestions,\n\trawData: _types2.default.rawData,\n\taggregationData: _types2.default.aggregationData,\n\tsetCustomQuery: _types2.default.funcRequired,\n\tsetDefaultQuery: _types2.default.funcRequired,\n\tsetCustomHighlightOptions: _types2.default.funcRequired,\n\tsetSuggestionsSearchValue: _types2.default.funcRequired,\n\ttriggerAnalytics: _types2.default.funcRequired,\n\terror: _types2.default.title,\n\tisLoading: _types2.default.bool,\n\tconfig: _types2.default.props,\n\tlastUsedQuery: _types2.default.string,\n\t// component props\n\tautoFocus: _types2.default.bool,\n\tautosuggest: _types2.default.bool,\n\tenableSynonyms: _types2.default.bool,\n\tenableQuerySuggestions: _types2.default.bool,\n\tqueryString: _types2.default.bool,\n\tbeforeValueChange: _types2.default.func,\n\tclassName: _types2.default.string,\n\tclearIcon: _types2.default.children,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomHighlight: _types2.default.func,\n\tcustomQuery: _types2.default.func,\n\tdefaultQuery: _types2.default.func,\n\tdataField: _types2.default.dataFieldValidator,\n\taggregationField: _types2.default.string,\n\tsize: _types2.default.number,\n\tdebounce: _types2.default.number,\n\tdefaultValue: _types2.default.string,\n\tvalue: _types2.default.string,\n\tdefaultSuggestions: _types2.default.suggestions,\n\tpromotedResults: _types2.default.hits,\n\tcustomData: _types2.default.title,\n\tdownShiftProps: _types2.default.props,\n\tchildren: _types2.default.func,\n\texcludeFields: _types2.default.excludeFields,\n\tfieldWeights: _types2.default.fieldWeights,\n\tfilterLabel: _types2.default.string,\n\tfuzziness: _types2.default.fuzziness,\n\thighlight: _types2.default.bool,\n\thighlightField: _types2.default.stringOrArray,\n\ticon: _types2.default.children,\n\ticonPosition: _types2.default.iconPosition,\n\tinnerClass: _types2.default.style,\n\tincludeFields: _types2.default.includeFields,\n\tloader: _types2.default.title,\n\tnestedField: _types2.default.string,\n\tonError: _types2.default.func,\n\tonBlur: _types2.default.func,\n\tonFocus: _types2.default.func,\n\tonKeyDown: _types2.default.func,\n\tonKeyPress: _types2.default.func,\n\tonKeyUp: _types2.default.func,\n\tonQueryChange: _types2.default.func,\n\tonSuggestions: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tonValueSelected: _types2.default.func,\n\tplaceholder: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatSearch,\n\tquerySuggestions: _types2.default.hits,\n\treact: _types2.default.react,\n\trender: _types2.default.func,\n\trenderQuerySuggestions: _types2.default.func,\n\trenderError: _types2.default.title,\n\tparseSuggestion: _types2.default.func,\n\trenderNoSuggestion: _types2.default.title,\n\tshowClear: _types2.default.bool,\n\tshowDistinctSuggestions: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\tshowIcon: _types2.default.bool,\n\tshowVoiceSearch: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttitle: _types2.default.title,\n\ttheme: _types2.default.style,\n\tthemePreset: _types2.default.themePreset,\n\tURLParams: _types2.default.bool,\n\tstrictSelection: _types2.default.bool,\n\tsearchOperators: _types2.default.bool,\n\t// Mic props\n\tgetMicInstance: _types2.default.func,\n\trenderMic: _types2.default.func\n};\n\nDataSearch.defaultProps = {\n\tautosuggest: true,\n\tclassName: null,\n\tdebounce: 0,\n\tdownShiftProps: {},\n\tenableSynonyms: true,\n\tenableQuerySuggestions: false,\n\texcludeFields: [],\n\ticonPosition: 'left',\n\tincludeFields: ['*'],\n\tplaceholder: 'Search',\n\tqueryFormat: 'or',\n\tshowFilter: true,\n\tshowIcon: true,\n\tshowVoiceSearch: false,\n\tstyle: {},\n\tURLParams: false,\n\tshowClear: false,\n\tshowDistinctSuggestions: true,\n\tstrictSelection: false,\n\tsearchOperators: false,\n\tsize: 10\n};\n\n// Add componentType for SSR\nDataSearch.componentType = _constants.componentTypes.dataSearch;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\tsuggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n\t\trawData: state.rawData[props.componentId],\n\t\taggregationData: state.compositeAggregations[props.componentId],\n\t\tthemePreset: state.config.themePreset,\n\t\tisLoading: state.isLoading[props.componentId] || false,\n\t\terror: state.error[props.componentId],\n\t\tconfig: state.config,\n\t\tpromotedResults: state.promotedResults[props.componentId],\n\t\tcustomData: state.customData[props.componentId],\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time || 0,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n\t\tquerySuggestions: state.querySuggestions[props.componentId],\n\t\tlastUsedQuery: state.queryToHits[props.componentId]\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetCustomHighlightOptions: function setCustomHighlightOptions(component, options) {\n\t\t\treturn dispatch((0, _actions.setCustomHighlightOptions)(component, options));\n\t\t},\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tsetDefaultQuery: function setDefaultQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setDefaultQuery)(component, query));\n\t\t},\n\t\tsetSuggestionsSearchValue: function setSuggestionsSearchValue(value) {\n\t\t\treturn dispatch((0, _actions.setSuggestionsSearchValue)(value));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\ttriggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n\t\t\treturn dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn (0, _core.jsx)(\n\t\t_ComponentWrapper2.default,\n\t\t_extends({}, props, { internalComponent: true, componentType: _constants.componentTypes.dataSearch }),\n\t\tfunction () {\n\t\t\treturn (0, _core.jsx)(DataSearch, _extends({ ref: props.myForwardedRef }, props));\n\t\t}\n\t);\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, DataSearch);\n\nForwardRefComponent.name = 'DataSearch';\nexports.default = ForwardRefComponent;"]},"metadata":{},"sourceType":"script"}