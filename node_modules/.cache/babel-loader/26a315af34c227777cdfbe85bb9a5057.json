{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _FormControlList = require('../../styles/FormControlList');\n\nvar _utils = require('../../utils');\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar MultiDataList = function (_Component) {\n  _inherits(MultiDataList, _Component);\n\n  function MultiDataList(props) {\n    _classCallCheck(this, MultiDataList);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var defaultValue = props.defaultValue || props.value;\n    var currentValueArray = props.selectedValue || defaultValue || [];\n    var currentValue = {};\n    currentValueArray.forEach(function (item) {\n      currentValue[item] = true;\n    });\n    _this.state = {\n      currentValue: currentValue,\n      searchTerm: '',\n      options: props.data || []\n    };\n    _this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n    _this.type = 'term'; // Set custom and default queries in store\n\n    (0, _helper.updateCustomQuery)(props.componentId, props, currentValue);\n    (0, _helper.updateDefaultQuery)(props.componentId, props, currentValue);\n    var hasMounted = false;\n\n    if (props.showCount) {\n      _this.updateQueryOptions(props);\n    }\n\n    if (currentValueArray.length) {\n      _this.setValue(currentValueArray, true, props, hasMounted);\n    }\n\n    return _this;\n  }\n\n  MultiDataList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    var valueArray = _typeof(this.state.currentValue) === 'object' ? Object.keys(this.state.currentValue) : [];\n    (0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField'], function () {\n      _this2.updateQuery(valueArray, _this2.props);\n\n      if (_this2.props.showCount) {\n        _this2.updateQueryOptions(_this2.props);\n      }\n    });\n    (0, _helper.checkPropChange)(this.props.data, prevProps.data, function () {\n      if (_this2.props.showCount) {\n        _this2.updateQueryOptions(_this2.props);\n      }\n    });\n    (0, _helper.checkPropChange)(this.props.options, prevProps.options, function () {\n      if (_this2.props.options[_this2.props.dataField]) {\n        _this2.updateStateOptions(_this2.props.options[_this2.props.dataField].buckets);\n      }\n    }); // Treat defaultQuery and customQuery as reactive props\n\n    if (!(0, _utils.isQueryIdentical)(valueArray, this.props, prevProps, 'defaultQuery')) {\n      this.updateDefaultQuery();\n      this.updateQuery([], this.props);\n    }\n\n    if (!(0, _utils.isQueryIdentical)(valueArray, this.props, prevProps, 'customQuery')) {\n      this.updateQuery(valueArray, this.props);\n    }\n\n    var selectedValue = valueArray;\n    var selectAllLabel = this.props.selectAllLabel;\n\n    if (selectAllLabel) {\n      selectedValue = selectedValue.filter(function (val) {\n        return val !== selectAllLabel;\n      });\n\n      if (this.state.currentValue[selectAllLabel]) {\n        selectedValue = [selectAllLabel];\n      }\n    }\n\n    if (this.props.value !== prevProps.value) {\n      this.setValue(this.props.value || [], true);\n    } else if (!(0, _helper.isEqual)(selectedValue, this.props.selectedValue) && !(0, _helper.isEqual)(this.props.selectedValue, prevProps.selectedValue)) {\n      var _props = this.props,\n          value = _props.value,\n          onChange = _props.onChange;\n\n      if (value === undefined) {\n        this.setValue(this.props.selectedValue || [], true);\n      } else if (onChange) {\n        onChange(this.props.selectedValue || null);\n      } else {\n        var selectedListItems = valueArray;\n        this.setValue(selectedListItems, true);\n      }\n    }\n  };\n\n  MultiDataList.generateQueryOptions = function generateQueryOptions(props, state) {\n    var queryOptions = (0, _helper.getQueryOptions)(props);\n    var valueArray = _typeof(state.currentValue) === 'object' ? Object.keys(state.currentValue) : [];\n    var includes = state.options.map(function (item) {\n      return item.value;\n    });\n    return (0, _helper.getAggsQuery)(valueArray, queryOptions, props, includes);\n  };\n\n  MultiDataList.prototype.getComponent = function getComponent() {\n    var currentValue = this.state.currentValue;\n    var data = {\n      value: currentValue,\n      data: this.listItems,\n      handleChange: this.handleClick,\n      rawData: this.props.rawData\n    };\n    return (0, _utils.getComponent)(data, this.props);\n  };\n\n  MultiDataList.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props2 = this.props,\n        selectAllLabel = _props2.selectAllLabel,\n        showCount = _props2.showCount,\n        renderItem = _props2.renderItem;\n    var options = this.state.options;\n\n    if (!this.hasCustomRenderer && options.length === 0) {\n      return this.props.renderNoResults ? this.props.renderNoResults() : null;\n    }\n\n    var listItems = this.listItems;\n    var isAllChecked = selectAllLabel ? !!this.state.currentValue[selectAllLabel] : false;\n    return _react2.default.createElement(_Container2.default, {\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.title && _react2.default.createElement(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), this.renderSearch(), this.hasCustomRenderer ? this.getComponent() : _react2.default.createElement(_FormControlList.UL, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'list') || null,\n      role: 'listbox',\n      'aria-label': this.props.componentId + '-items'\n    }, selectAllLabel ? _react2.default.createElement('li', {\n      key: selectAllLabel,\n      className: '' + (isAllChecked ? 'active' : ''),\n      role: 'option',\n      'aria-checked': isAllChecked,\n      'aria-selected': isAllChecked\n    }, _react2.default.createElement(_FormControlList.Checkbox, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'checkbox') || null,\n      id: this.props.componentId + '-' + selectAllLabel,\n      name: selectAllLabel,\n      value: selectAllLabel,\n      onChange: this.handleClick,\n      checked: isAllChecked,\n      show: this.props.showCheckbox\n    }), _react2.default.createElement('label', {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'label') || null,\n      htmlFor: this.props.componentId + '-' + selectAllLabel\n    }, selectAllLabel)) : null, listItems.length ? listItems.map(function (item) {\n      var isChecked = !!_this3.state.currentValue[item.label];\n      return _react2.default.createElement('li', {\n        key: item.label,\n        className: '' + (isChecked ? 'active' : ''),\n        role: 'option',\n        'aria-checked': isChecked,\n        'aria-selected': isChecked\n      }, _react2.default.createElement(_FormControlList.Checkbox, {\n        className: (0, _helper.getClassName)(_this3.props.innerClass, 'checkbox') || null,\n        id: _this3.props.componentId + '-' + item.label,\n        name: _this3.props.componentId + '-' + item.label,\n        value: item.label,\n        onChange: _this3.handleClick,\n        checked: isChecked,\n        show: _this3.props.showCheckbox\n      }), _react2.default.createElement('label', {\n        className: (0, _helper.getClassName)(_this3.props.innerClass, 'label') || null,\n        htmlFor: _this3.props.componentId + '-' + item.label\n      }, renderItem ? renderItem(item.label, item.count, _this3.state.currentValue === item.label) : _react2.default.createElement('span', null, _react2.default.createElement('span', null, item.label), showCount && item.count && _react2.default.createElement('span', {\n        className: (0, _helper.getClassName)(_this3.props.innerClass, 'count') || null\n      }, item.count))));\n    }) // prettier-ignore\n    : this.props.renderNoResults && this.props.renderNoResults()));\n  };\n\n  _createClass(MultiDataList, [{\n    key: 'hasCustomRenderer',\n    get: function get() {\n      return (0, _utils.hasCustomRenderer)(this.props);\n    }\n  }, {\n    key: 'listItems',\n    get: function get() {\n      var _this4 = this;\n\n      var options = this.state.options;\n      var listItems = options.filter(function (item) {\n        if (_this4.props.showSearch && _this4.state.searchTerm) {\n          return item.label.toLowerCase().includes(_this4.state.searchTerm.toLowerCase());\n        }\n\n        return true;\n      });\n      return listItems;\n    }\n  }]);\n\n  return MultiDataList;\n}(_react.Component);\n\nMultiDataList.defaultQuery = function (value, props) {\n  var query = null;\n  var type = props.queryFormat === 'or' ? 'terms' : 'term';\n\n  if (props.selectAllLabel && Array.isArray(value) && value.includes(props.selectAllLabel)) {\n    query = {\n      exists: {\n        field: props.dataField\n      }\n    };\n  } else if (value) {\n    var listQuery = void 0;\n\n    if (props.queryFormat === 'or') {\n      var _type, _listQuery;\n\n      listQuery = (_listQuery = {}, _listQuery[type] = (_type = {}, _type[props.dataField] = value, _type), _listQuery);\n    } else {\n      // adds a sub-query with must as an array of objects for each term/value\n      var queryArray = value.map(function (item) {\n        var _type2, _ref;\n\n        return _ref = {}, _ref[type] = (_type2 = {}, _type2[props.dataField] = item, _type2), _ref;\n      });\n      listQuery = {\n        bool: {\n          must: queryArray\n        }\n      };\n    }\n\n    query = value.length ? listQuery : null;\n  }\n\n  if (query && props.nestedField) {\n    return {\n      nested: {\n        path: props.nestedField,\n        query: query\n      }\n    };\n  }\n\n  return query;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.setValue = function (value) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this5.props;\n    var hasMounted = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    var selectAllLabel = _this5.props.selectAllLabel;\n    var currentValue = _this5.state.currentValue;\n    var finalValues = null;\n\n    if (selectAllLabel && (Array.isArray(value) && value.includes(selectAllLabel) || typeof value === 'string' && value === selectAllLabel)) {\n      if (currentValue[selectAllLabel] && hasMounted && !isDefaultValue) {\n        currentValue = {};\n        finalValues = [];\n      } else {\n        props.data.forEach(function (item) {\n          currentValue[item.label] = true;\n        });\n        currentValue[selectAllLabel] = true;\n        finalValues = [selectAllLabel];\n      }\n    } else if (isDefaultValue) {\n      finalValues = value;\n      currentValue = {};\n\n      if (value) {\n        value.forEach(function (item) {\n          currentValue[item] = true;\n        });\n      }\n\n      if (selectAllLabel && selectAllLabel in currentValue) {\n        var _currentValue = currentValue,\n            del = _currentValue[selectAllLabel],\n            obj = _objectWithoutProperties(_currentValue, [selectAllLabel]);\n\n        currentValue = _extends({}, obj);\n      }\n    } else {\n      if (currentValue[value]) {\n        var _currentValue2 = currentValue,\n            _del = _currentValue2[value],\n            rest = _objectWithoutProperties(_currentValue2, [value]);\n\n        currentValue = _extends({}, rest);\n      } else {\n        currentValue[value] = true;\n      }\n\n      if (selectAllLabel && selectAllLabel in currentValue) {\n        var _currentValue3 = currentValue,\n            _del2 = _currentValue3[selectAllLabel],\n            _obj = _objectWithoutProperties(_currentValue3, [selectAllLabel]);\n\n        currentValue = _extends({}, _obj);\n      }\n\n      finalValues = Object.keys(currentValue);\n    }\n\n    var performUpdate = function performUpdate() {\n      var handleUpdates = function handleUpdates() {\n        _this5.updateQuery(finalValues, props);\n\n        if (props.onValueChange) props.onValueChange(finalValues);\n      };\n\n      if (hasMounted) {\n        _this5.setState({\n          currentValue: currentValue\n        }, handleUpdates);\n      } else {\n        handleUpdates();\n      }\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, finalValues, props.beforeValueChange, performUpdate);\n  };\n\n  this.updateDefaultQuery = function (queryOptions) {\n    var valueArray = _typeof(_this5.state.currentValue) === 'object' ? Object.keys(_this5.state.currentValue) : []; // Update default query for RS API\n\n    (0, _helper.updateDefaultQuery)(_this5.props.componentId, _this5.props, valueArray);\n    (0, _helper.updateInternalQuery)(_this5.internalComponent, queryOptions, valueArray, _this5.props, MultiDataList.generateQueryOptions(_this5.props, _this5.state), null);\n  };\n\n  this.updateQuery = function (value, props) {\n    var customQuery = props.customQuery;\n    var customQueryOptions = void 0; // find the corresponding value of the label for running the query\n\n    var queryValue = value.reduce(function (acc, item) {\n      if (item === props.selectAllLabel) {\n        return acc.concat(item);\n      }\n\n      var matchingItem = props.data.find(function (dataItem) {\n        return dataItem.label === item;\n      });\n      return matchingItem ? acc.concat(matchingItem.value) : acc;\n    }, []);\n    var query = MultiDataList.defaultQuery(queryValue, props);\n\n    if (customQuery) {\n      var _ref2 = customQuery(queryValue, props) || {};\n\n      query = _ref2.query;\n      customQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(queryValue, props));\n      (0, _helper.updateCustomQuery)(props.componentId, props, value);\n    }\n\n    props.setQueryOptions(props.componentId, customQueryOptions);\n    props.updateQuery({\n      componentId: props.componentId,\n      query: query,\n      value: value,\n      label: props.filterLabel,\n      showFilter: props.showFilter,\n      URLParams: props.URLParams,\n      componentType: _constants.componentTypes.multiDataList\n    });\n  };\n\n  this.updateQueryOptions = function (props) {\n    var queryOptions = MultiDataList.generateQueryOptions(props, _this5.state);\n\n    if (props.defaultQuery) {\n      var value = Object.keys(_this5.state.currentValue);\n      var defaultQueryOptions = (0, _helper.getOptionsFromQuery)(props.defaultQuery(value, props));\n      props.setQueryOptions(_this5.internalComponent, _extends({}, queryOptions, defaultQueryOptions));\n      (0, _helper.updateDefaultQuery)(props.componentId, props, value);\n    } else {\n      props.setQueryOptions(_this5.internalComponent, queryOptions);\n    }\n  };\n\n  this.updateStateOptions = function (bucket) {\n    if (bucket) {\n      var bucketDictionary = bucket.reduce(function (obj, item) {\n        var _extends2;\n\n        return _extends({}, obj, (_extends2 = {}, _extends2[item.key] = item.doc_count, _extends2));\n      }, {});\n      var options = _this5.state.options;\n      var newOptions = options.map(function (item) {\n        if (bucketDictionary[item.value]) {\n          return _extends({}, item, {\n            count: bucketDictionary[item.value]\n          });\n        }\n\n        return item;\n      });\n\n      _this5.setState({\n        options: newOptions\n      });\n    }\n  };\n\n  this.handleInputChange = function (e) {\n    var value = e.target.value;\n\n    _this5.setState({\n      searchTerm: value\n    });\n  };\n\n  this.renderSearch = function () {\n    if (_this5.props.showSearch) {\n      return _react2.default.createElement(_Input2.default, {\n        className: (0, _helper.getClassName)(_this5.props.innerClass, 'input') || null,\n        onChange: _this5.handleInputChange,\n        value: _this5.state.searchTerm,\n        placeholder: _this5.props.placeholder,\n        style: {\n          margin: '0 0 8px'\n        },\n        'aria-label': _this5.props.componentId + '-search',\n        themePreset: _this5.props.themePreset\n      });\n    }\n\n    return null;\n  };\n\n  this.handleClick = function (e) {\n    var currentValue = e;\n\n    if ((0, _utils.isEvent)(e)) {\n      currentValue = e.target.value;\n    }\n\n    var _props3 = _this5.props,\n        value = _props3.value,\n        onChange = _props3.onChange;\n\n    if (value === undefined) {\n      _this5.setValue(currentValue);\n    } else if (onChange) {\n      onChange((0, _utils.parseValueArray)(_this5.props.value, currentValue));\n    }\n  };\n};\n\nMultiDataList.propTypes = {\n  setQueryOptions: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  selectedValue: _types2.default.selectedValue,\n  rawData: _types2.default.rawData,\n  options: _types2.default.options,\n  setCustomQuery: _types2.default.funcRequired,\n  // component props\n  beforeValueChange: _types2.default.func,\n  children: _types2.default.func,\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  customQuery: _types2.default.func,\n  defaultQuery: _types2.default.func,\n  data: _types2.default.data,\n  dataField: _types2.default.stringRequired,\n  defaultValue: _types2.default.stringArray,\n  value: _types2.default.stringArray,\n  filterLabel: _types2.default.string,\n  innerClass: _types2.default.style,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  placeholder: _types2.default.string,\n  nestedField: _types2.default.string,\n  queryFormat: _types2.default.queryFormatSearch,\n  react: _types2.default.react,\n  selectAllLabel: _types2.default.string,\n  showCheckbox: _types2.default.boolRequired,\n  showFilter: _types2.default.bool,\n  showSearch: _types2.default.bool,\n  style: _types2.default.style,\n  themePreset: _types2.default.themePreset,\n  title: _types2.default.title,\n  URLParams: _types2.default.bool,\n  showCount: _types2.default.bool,\n  render: _types2.default.func,\n  renderItem: _types2.default.func,\n  renderNoResults: _types2.default.func\n};\nMultiDataList.defaultProps = {\n  className: null,\n  placeholder: 'Search',\n  queryFormat: 'or',\n  showCheckbox: true,\n  showFilter: true,\n  showSearch: true,\n  style: {},\n  URLParams: false,\n  showCount: false\n}; // Add componentType for SSR\n\nMultiDataList.componentType = _constants.componentTypes.multiDataList;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    rawData: state.rawData[props.componentId],\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    themePreset: state.config.themePreset,\n    options: props.nestedField && state.aggregations[props.componentId] ? state.aggregations[props.componentId].reactivesearch_nested : state.aggregations[props.componentId]\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    setDefaultQuery: function setDefaultQuery(component, query) {\n      return dispatch((0, _actions.setDefaultQuery)(component, query));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    setQueryOptions: function setQueryOptions(component, props) {\n      return dispatch((0, _actions.setQueryOptions)(component, props));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n  return _react2.default.createElement(_ComponentWrapper2.default, _extends({}, props, {\n    internalComponent: true,\n    componentType: _constants.componentTypes.multiDataList\n  }), function () {\n    return _react2.default.createElement(MultiDataList, _extends({\n      ref: props.myForwardedRef\n    }, props));\n  });\n}); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return _react2.default.createElement(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, MultiDataList);\nForwardRefComponent.name = 'MultiDataList';\nexports.default = ForwardRefComponent;","map":{"version":3,"sources":["/Users/rogetgeoffroy/Desktop/Folders/react_js_folder/react-live-search-app/live-search/node_modules/@appbaseio/reactivesearch/lib/components/list/MultiDataList.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_typeof","Symbol","iterator","obj","constructor","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_actions","_constants","_helper","_hoistNonReactStatics","_hoistNonReactStatics2","_transform","_types","_types2","_Title","_Title2","_Input","_Input2","_Container","_Container2","_FormControlList","_utils","_ComponentWrapper","_ComponentWrapper2","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","value","setPrototypeOf","__proto__","MultiDataList","_Component","_this","_initialiseProps","defaultValue","currentValueArray","selectedValue","currentValue","forEach","item","state","searchTerm","options","data","internalComponent","getInternalComponentID","componentId","type","updateCustomQuery","updateDefaultQuery","hasMounted","showCount","updateQueryOptions","setValue","componentDidUpdate","prevProps","_this2","valueArray","checkSomePropChange","updateQuery","checkPropChange","dataField","updateStateOptions","buckets","isQueryIdentical","selectAllLabel","filter","val","isEqual","_props","onChange","undefined","selectedListItems","generateQueryOptions","queryOptions","getQueryOptions","includes","map","getAggsQuery","getComponent","listItems","handleChange","handleClick","rawData","render","_this3","_props2","renderItem","hasCustomRenderer","renderNoResults","isAllChecked","createElement","style","className","title","getClassName","innerClass","renderSearch","UL","role","Checkbox","id","name","checked","show","showCheckbox","htmlFor","isChecked","label","count","get","_this4","showSearch","toLowerCase","Component","defaultQuery","query","queryFormat","Array","isArray","exists","field","listQuery","_type","_listQuery","queryArray","_type2","_ref","bool","must","nestedField","nested","path","_this5","isDefaultValue","finalValues","_currentValue","del","_currentValue2","_del","rest","_currentValue3","_del2","_obj","performUpdate","handleUpdates","onValueChange","setState","checkValueChange","beforeValueChange","updateInternalQuery","customQuery","customQueryOptions","queryValue","reduce","acc","concat","matchingItem","find","dataItem","_ref2","getOptionsFromQuery","setQueryOptions","filterLabel","showFilter","URLParams","componentType","componentTypes","multiDataList","defaultQueryOptions","bucket","bucketDictionary","_extends2","doc_count","newOptions","handleInputChange","e","placeholder","margin","themePreset","isEvent","_props3","parseValueArray","propTypes","funcRequired","setCustomQuery","func","children","string","stringRequired","stringArray","onQueryChange","queryFormatSearch","react","boolRequired","defaultProps","mapStateToProps","selectedValues","config","aggregations","reactivesearch_nested","mapDispatchtoProps","dispatch","component","setDefaultQuery","updateQueryObject","ConnectedComponent","connect","ref","myForwardedRef","ForwardRefComponent","forwardRef"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _FormControlList = require('../../styles/FormControlList');\n\nvar _utils = require('../../utils');\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MultiDataList = function (_Component) {\n\t_inherits(MultiDataList, _Component);\n\n\tfunction MultiDataList(props) {\n\t\t_classCallCheck(this, MultiDataList);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tvar defaultValue = props.defaultValue || props.value;\n\t\tvar currentValueArray = props.selectedValue || defaultValue || [];\n\t\tvar currentValue = {};\n\t\tcurrentValueArray.forEach(function (item) {\n\t\t\tcurrentValue[item] = true;\n\t\t});\n\n\t\t_this.state = {\n\t\t\tcurrentValue: currentValue,\n\t\t\tsearchTerm: '',\n\t\t\toptions: props.data || []\n\t\t};\n\t\t_this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n\t\t_this.type = 'term';\n\t\t// Set custom and default queries in store\n\t\t(0, _helper.updateCustomQuery)(props.componentId, props, currentValue);\n\t\t(0, _helper.updateDefaultQuery)(props.componentId, props, currentValue);\n\n\t\tvar hasMounted = false;\n\n\t\tif (props.showCount) {\n\t\t\t_this.updateQueryOptions(props);\n\t\t}\n\t\tif (currentValueArray.length) {\n\t\t\t_this.setValue(currentValueArray, true, props, hasMounted);\n\t\t}\n\t\treturn _this;\n\t}\n\n\tMultiDataList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\tvar valueArray = _typeof(this.state.currentValue) === 'object' ? Object.keys(this.state.currentValue) : [];\n\n\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['dataField', 'nestedField'], function () {\n\t\t\t_this2.updateQuery(valueArray, _this2.props);\n\n\t\t\tif (_this2.props.showCount) {\n\t\t\t\t_this2.updateQueryOptions(_this2.props);\n\t\t\t}\n\t\t});\n\n\t\t(0, _helper.checkPropChange)(this.props.data, prevProps.data, function () {\n\t\t\tif (_this2.props.showCount) {\n\t\t\t\t_this2.updateQueryOptions(_this2.props);\n\t\t\t}\n\t\t});\n\n\t\t(0, _helper.checkPropChange)(this.props.options, prevProps.options, function () {\n\t\t\tif (_this2.props.options[_this2.props.dataField]) {\n\t\t\t\t_this2.updateStateOptions(_this2.props.options[_this2.props.dataField].buckets);\n\t\t\t}\n\t\t});\n\n\t\t// Treat defaultQuery and customQuery as reactive props\n\t\tif (!(0, _utils.isQueryIdentical)(valueArray, this.props, prevProps, 'defaultQuery')) {\n\t\t\tthis.updateDefaultQuery();\n\t\t\tthis.updateQuery([], this.props);\n\t\t}\n\n\t\tif (!(0, _utils.isQueryIdentical)(valueArray, this.props, prevProps, 'customQuery')) {\n\t\t\tthis.updateQuery(valueArray, this.props);\n\t\t}\n\n\t\tvar selectedValue = valueArray;\n\t\tvar selectAllLabel = this.props.selectAllLabel;\n\n\n\t\tif (selectAllLabel) {\n\t\t\tselectedValue = selectedValue.filter(function (val) {\n\t\t\t\treturn val !== selectAllLabel;\n\t\t\t});\n\t\t\tif (this.state.currentValue[selectAllLabel]) {\n\t\t\t\tselectedValue = [selectAllLabel];\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.value !== prevProps.value) {\n\t\t\tthis.setValue(this.props.value || [], true);\n\t\t} else if (!(0, _helper.isEqual)(selectedValue, this.props.selectedValue) && !(0, _helper.isEqual)(this.props.selectedValue, prevProps.selectedValue)) {\n\t\t\tvar _props = this.props,\n\t\t\t    value = _props.value,\n\t\t\t    onChange = _props.onChange;\n\n\t\t\tif (value === undefined) {\n\t\t\t\tthis.setValue(this.props.selectedValue || [], true);\n\t\t\t} else if (onChange) {\n\t\t\t\tonChange(this.props.selectedValue || null);\n\t\t\t} else {\n\t\t\t\tvar selectedListItems = valueArray;\n\t\t\t\tthis.setValue(selectedListItems, true);\n\t\t\t}\n\t\t}\n\t};\n\n\tMultiDataList.generateQueryOptions = function generateQueryOptions(props, state) {\n\t\tvar queryOptions = (0, _helper.getQueryOptions)(props);\n\t\tvar valueArray = _typeof(state.currentValue) === 'object' ? Object.keys(state.currentValue) : [];\n\t\tvar includes = state.options.map(function (item) {\n\t\t\treturn item.value;\n\t\t});\n\t\treturn (0, _helper.getAggsQuery)(valueArray, queryOptions, props, includes);\n\t};\n\n\tMultiDataList.prototype.getComponent = function getComponent() {\n\t\tvar currentValue = this.state.currentValue;\n\n\t\tvar data = {\n\t\t\tvalue: currentValue,\n\t\t\tdata: this.listItems,\n\t\t\thandleChange: this.handleClick,\n\t\t\trawData: this.props.rawData\n\t\t};\n\t\treturn (0, _utils.getComponent)(data, this.props);\n\t};\n\n\tMultiDataList.prototype.render = function render() {\n\t\tvar _this3 = this;\n\n\t\tvar _props2 = this.props,\n\t\t    selectAllLabel = _props2.selectAllLabel,\n\t\t    showCount = _props2.showCount,\n\t\t    renderItem = _props2.renderItem;\n\t\tvar options = this.state.options;\n\n\n\t\tif (!this.hasCustomRenderer && options.length === 0) {\n\t\t\treturn this.props.renderNoResults ? this.props.renderNoResults() : null;\n\t\t}\n\n\t\tvar listItems = this.listItems;\n\n\t\tvar isAllChecked = selectAllLabel ? !!this.state.currentValue[selectAllLabel] : false;\n\n\t\treturn _react2.default.createElement(\n\t\t\t_Container2.default,\n\t\t\t{ style: this.props.style, className: this.props.className },\n\t\t\tthis.props.title && _react2.default.createElement(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\tthis.renderSearch(),\n\t\t\tthis.hasCustomRenderer ? this.getComponent() : _react2.default.createElement(\n\t\t\t\t_FormControlList.UL,\n\t\t\t\t{\n\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'list') || null,\n\t\t\t\t\trole: 'listbox',\n\t\t\t\t\t'aria-label': this.props.componentId + '-items'\n\t\t\t\t},\n\t\t\t\tselectAllLabel ? _react2.default.createElement(\n\t\t\t\t\t'li',\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: selectAllLabel,\n\t\t\t\t\t\tclassName: '' + (isAllChecked ? 'active' : ''),\n\t\t\t\t\t\trole: 'option',\n\t\t\t\t\t\t'aria-checked': isAllChecked,\n\t\t\t\t\t\t'aria-selected': isAllChecked\n\t\t\t\t\t},\n\t\t\t\t\t_react2.default.createElement(_FormControlList.Checkbox, {\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'checkbox') || null,\n\t\t\t\t\t\tid: this.props.componentId + '-' + selectAllLabel,\n\t\t\t\t\t\tname: selectAllLabel,\n\t\t\t\t\t\tvalue: selectAllLabel,\n\t\t\t\t\t\tonChange: this.handleClick,\n\t\t\t\t\t\tchecked: isAllChecked,\n\t\t\t\t\t\tshow: this.props.showCheckbox\n\t\t\t\t\t}),\n\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t'label',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'label') || null,\n\t\t\t\t\t\t\thtmlFor: this.props.componentId + '-' + selectAllLabel\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectAllLabel\n\t\t\t\t\t)\n\t\t\t\t) : null,\n\t\t\t\tlistItems.length ? listItems.map(function (item) {\n\t\t\t\t\tvar isChecked = !!_this3.state.currentValue[item.label];\n\t\t\t\t\treturn _react2.default.createElement(\n\t\t\t\t\t\t'li',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: item.label,\n\t\t\t\t\t\t\tclassName: '' + (isChecked ? 'active' : ''),\n\t\t\t\t\t\t\trole: 'option',\n\t\t\t\t\t\t\t'aria-checked': isChecked,\n\t\t\t\t\t\t\t'aria-selected': isChecked\n\t\t\t\t\t\t},\n\t\t\t\t\t\t_react2.default.createElement(_FormControlList.Checkbox, {\n\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'checkbox') || null,\n\t\t\t\t\t\t\tid: _this3.props.componentId + '-' + item.label,\n\t\t\t\t\t\t\tname: _this3.props.componentId + '-' + item.label,\n\t\t\t\t\t\t\tvalue: item.label,\n\t\t\t\t\t\t\tonChange: _this3.handleClick,\n\t\t\t\t\t\t\tchecked: isChecked,\n\t\t\t\t\t\t\tshow: _this3.props.showCheckbox\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t'label',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'label') || null,\n\t\t\t\t\t\t\t\thtmlFor: _this3.props.componentId + '-' + item.label\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trenderItem ? renderItem(item.label, item.count, _this3.state.currentValue === item.label) : _react2.default.createElement(\n\t\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\titem.label\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tshowCount && item.count && _react2.default.createElement(\n\t\t\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'count') || null\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\titem.count\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}) // prettier-ignore\n\t\t\t\t: this.props.renderNoResults && this.props.renderNoResults()\n\t\t\t)\n\t\t);\n\t};\n\n\t_createClass(MultiDataList, [{\n\t\tkey: 'hasCustomRenderer',\n\t\tget: function get() {\n\t\t\treturn (0, _utils.hasCustomRenderer)(this.props);\n\t\t}\n\t}, {\n\t\tkey: 'listItems',\n\t\tget: function get() {\n\t\t\tvar _this4 = this;\n\n\t\t\tvar options = this.state.options;\n\n\n\t\t\tvar listItems = options.filter(function (item) {\n\t\t\t\tif (_this4.props.showSearch && _this4.state.searchTerm) {\n\t\t\t\t\treturn item.label.toLowerCase().includes(_this4.state.searchTerm.toLowerCase());\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\treturn listItems;\n\t\t}\n\t}]);\n\n\treturn MultiDataList;\n}(_react.Component);\n\nMultiDataList.defaultQuery = function (value, props) {\n\tvar query = null;\n\tvar type = props.queryFormat === 'or' ? 'terms' : 'term';\n\tif (props.selectAllLabel && Array.isArray(value) && value.includes(props.selectAllLabel)) {\n\t\tquery = {\n\t\t\texists: {\n\t\t\t\tfield: props.dataField\n\t\t\t}\n\t\t};\n\t} else if (value) {\n\t\tvar listQuery = void 0;\n\t\tif (props.queryFormat === 'or') {\n\t\t\tvar _type, _listQuery;\n\n\t\t\tlistQuery = (_listQuery = {}, _listQuery[type] = (_type = {}, _type[props.dataField] = value, _type), _listQuery);\n\t\t} else {\n\t\t\t// adds a sub-query with must as an array of objects for each term/value\n\t\t\tvar queryArray = value.map(function (item) {\n\t\t\t\tvar _type2, _ref;\n\n\t\t\t\treturn _ref = {}, _ref[type] = (_type2 = {}, _type2[props.dataField] = item, _type2), _ref;\n\t\t\t});\n\t\t\tlistQuery = {\n\t\t\t\tbool: {\n\t\t\t\t\tmust: queryArray\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tquery = value.length ? listQuery : null;\n\t}\n\n\tif (query && props.nestedField) {\n\t\treturn {\n\t\t\tnested: {\n\t\t\t\tpath: props.nestedField,\n\t\t\t\tquery: query\n\t\t\t}\n\t\t};\n\t}\n\n\treturn query;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this5 = this;\n\n\tthis.setValue = function (value) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this5.props;\n\t\tvar hasMounted = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\t\tvar selectAllLabel = _this5.props.selectAllLabel;\n\t\tvar currentValue = _this5.state.currentValue;\n\n\t\tvar finalValues = null;\n\n\t\tif (selectAllLabel && (Array.isArray(value) && value.includes(selectAllLabel) || typeof value === 'string' && value === selectAllLabel)) {\n\t\t\tif (currentValue[selectAllLabel] && hasMounted && !isDefaultValue) {\n\t\t\t\tcurrentValue = {};\n\t\t\t\tfinalValues = [];\n\t\t\t} else {\n\t\t\t\tprops.data.forEach(function (item) {\n\t\t\t\t\tcurrentValue[item.label] = true;\n\t\t\t\t});\n\t\t\t\tcurrentValue[selectAllLabel] = true;\n\t\t\t\tfinalValues = [selectAllLabel];\n\t\t\t}\n\t\t} else if (isDefaultValue) {\n\t\t\tfinalValues = value;\n\t\t\tcurrentValue = {};\n\t\t\tif (value) {\n\t\t\t\tvalue.forEach(function (item) {\n\t\t\t\t\tcurrentValue[item] = true;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (selectAllLabel && selectAllLabel in currentValue) {\n\t\t\t\tvar _currentValue = currentValue,\n\t\t\t\t    del = _currentValue[selectAllLabel],\n\t\t\t\t    obj = _objectWithoutProperties(_currentValue, [selectAllLabel]);\n\n\t\t\t\tcurrentValue = _extends({}, obj);\n\t\t\t}\n\t\t} else {\n\t\t\tif (currentValue[value]) {\n\t\t\t\tvar _currentValue2 = currentValue,\n\t\t\t\t    _del = _currentValue2[value],\n\t\t\t\t    rest = _objectWithoutProperties(_currentValue2, [value]);\n\n\t\t\t\tcurrentValue = _extends({}, rest);\n\t\t\t} else {\n\t\t\t\tcurrentValue[value] = true;\n\t\t\t}\n\n\t\t\tif (selectAllLabel && selectAllLabel in currentValue) {\n\t\t\t\tvar _currentValue3 = currentValue,\n\t\t\t\t    _del2 = _currentValue3[selectAllLabel],\n\t\t\t\t    _obj = _objectWithoutProperties(_currentValue3, [selectAllLabel]);\n\n\t\t\t\tcurrentValue = _extends({}, _obj);\n\t\t\t}\n\t\t\tfinalValues = Object.keys(currentValue);\n\t\t}\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tvar handleUpdates = function handleUpdates() {\n\t\t\t\t_this5.updateQuery(finalValues, props);\n\t\t\t\tif (props.onValueChange) props.onValueChange(finalValues);\n\t\t\t};\n\n\t\t\tif (hasMounted) {\n\t\t\t\t_this5.setState({\n\t\t\t\t\tcurrentValue: currentValue\n\t\t\t\t}, handleUpdates);\n\t\t\t} else {\n\t\t\t\thandleUpdates();\n\t\t\t}\n\t\t};\n\n\t\t(0, _helper.checkValueChange)(props.componentId, finalValues, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.updateDefaultQuery = function (queryOptions) {\n\t\tvar valueArray = _typeof(_this5.state.currentValue) === 'object' ? Object.keys(_this5.state.currentValue) : [];\n\t\t// Update default query for RS API\n\t\t(0, _helper.updateDefaultQuery)(_this5.props.componentId, _this5.props, valueArray);\n\t\t(0, _helper.updateInternalQuery)(_this5.internalComponent, queryOptions, valueArray, _this5.props, MultiDataList.generateQueryOptions(_this5.props, _this5.state), null);\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tvar customQuery = props.customQuery;\n\n\t\tvar customQueryOptions = void 0;\n\n\t\t// find the corresponding value of the label for running the query\n\t\tvar queryValue = value.reduce(function (acc, item) {\n\t\t\tif (item === props.selectAllLabel) {\n\t\t\t\treturn acc.concat(item);\n\t\t\t}\n\t\t\tvar matchingItem = props.data.find(function (dataItem) {\n\t\t\t\treturn dataItem.label === item;\n\t\t\t});\n\t\t\treturn matchingItem ? acc.concat(matchingItem.value) : acc;\n\t\t}, []);\n\n\t\tvar query = MultiDataList.defaultQuery(queryValue, props);\n\t\tif (customQuery) {\n\t\t\tvar _ref2 = customQuery(queryValue, props) || {};\n\n\t\t\tquery = _ref2.query;\n\n\t\t\tcustomQueryOptions = (0, _helper.getOptionsFromQuery)(customQuery(queryValue, props));\n\t\t\t(0, _helper.updateCustomQuery)(props.componentId, props, value);\n\t\t}\n\t\tprops.setQueryOptions(props.componentId, customQueryOptions);\n\n\t\tprops.updateQuery({\n\t\t\tcomponentId: props.componentId,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tlabel: props.filterLabel,\n\t\t\tshowFilter: props.showFilter,\n\t\t\tURLParams: props.URLParams,\n\t\t\tcomponentType: _constants.componentTypes.multiDataList\n\t\t});\n\t};\n\n\tthis.updateQueryOptions = function (props) {\n\t\tvar queryOptions = MultiDataList.generateQueryOptions(props, _this5.state);\n\t\tif (props.defaultQuery) {\n\t\t\tvar value = Object.keys(_this5.state.currentValue);\n\t\t\tvar defaultQueryOptions = (0, _helper.getOptionsFromQuery)(props.defaultQuery(value, props));\n\t\t\tprops.setQueryOptions(_this5.internalComponent, _extends({}, queryOptions, defaultQueryOptions));\n\t\t\t(0, _helper.updateDefaultQuery)(props.componentId, props, value);\n\t\t} else {\n\t\t\tprops.setQueryOptions(_this5.internalComponent, queryOptions);\n\t\t}\n\t};\n\n\tthis.updateStateOptions = function (bucket) {\n\t\tif (bucket) {\n\t\t\tvar bucketDictionary = bucket.reduce(function (obj, item) {\n\t\t\t\tvar _extends2;\n\n\t\t\t\treturn _extends({}, obj, (_extends2 = {}, _extends2[item.key] = item.doc_count, _extends2));\n\t\t\t}, {});\n\n\t\t\tvar options = _this5.state.options;\n\n\t\t\tvar newOptions = options.map(function (item) {\n\t\t\t\tif (bucketDictionary[item.value]) {\n\t\t\t\t\treturn _extends({}, item, {\n\t\t\t\t\t\tcount: bucketDictionary[item.value]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn item;\n\t\t\t});\n\n\t\t\t_this5.setState({\n\t\t\t\toptions: newOptions\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.handleInputChange = function (e) {\n\t\tvar value = e.target.value;\n\n\t\t_this5.setState({\n\t\t\tsearchTerm: value\n\t\t});\n\t};\n\n\tthis.renderSearch = function () {\n\t\tif (_this5.props.showSearch) {\n\t\t\treturn _react2.default.createElement(_Input2.default, {\n\t\t\t\tclassName: (0, _helper.getClassName)(_this5.props.innerClass, 'input') || null,\n\t\t\t\tonChange: _this5.handleInputChange,\n\t\t\t\tvalue: _this5.state.searchTerm,\n\t\t\t\tplaceholder: _this5.props.placeholder,\n\t\t\t\tstyle: {\n\t\t\t\t\tmargin: '0 0 8px'\n\t\t\t\t},\n\t\t\t\t'aria-label': _this5.props.componentId + '-search',\n\t\t\t\tthemePreset: _this5.props.themePreset\n\t\t\t});\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.handleClick = function (e) {\n\t\tvar currentValue = e;\n\t\tif ((0, _utils.isEvent)(e)) {\n\t\t\tcurrentValue = e.target.value;\n\t\t}\n\t\tvar _props3 = _this5.props,\n\t\t    value = _props3.value,\n\t\t    onChange = _props3.onChange;\n\n\t\tif (value === undefined) {\n\t\t\t_this5.setValue(currentValue);\n\t\t} else if (onChange) {\n\t\t\tonChange((0, _utils.parseValueArray)(_this5.props.value, currentValue));\n\t\t}\n\t};\n};\n\nMultiDataList.propTypes = {\n\tsetQueryOptions: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\tselectedValue: _types2.default.selectedValue,\n\trawData: _types2.default.rawData,\n\toptions: _types2.default.options,\n\n\tsetCustomQuery: _types2.default.funcRequired,\n\t// component props\n\tbeforeValueChange: _types2.default.func,\n\tchildren: _types2.default.func,\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomQuery: _types2.default.func,\n\tdefaultQuery: _types2.default.func,\n\tdata: _types2.default.data,\n\tdataField: _types2.default.stringRequired,\n\tdefaultValue: _types2.default.stringArray,\n\tvalue: _types2.default.stringArray,\n\tfilterLabel: _types2.default.string,\n\tinnerClass: _types2.default.style,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tplaceholder: _types2.default.string,\n\tnestedField: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatSearch,\n\treact: _types2.default.react,\n\tselectAllLabel: _types2.default.string,\n\tshowCheckbox: _types2.default.boolRequired,\n\tshowFilter: _types2.default.bool,\n\tshowSearch: _types2.default.bool,\n\tstyle: _types2.default.style,\n\tthemePreset: _types2.default.themePreset,\n\ttitle: _types2.default.title,\n\tURLParams: _types2.default.bool,\n\tshowCount: _types2.default.bool,\n\trender: _types2.default.func,\n\trenderItem: _types2.default.func,\n\trenderNoResults: _types2.default.func\n};\n\nMultiDataList.defaultProps = {\n\tclassName: null,\n\tplaceholder: 'Search',\n\tqueryFormat: 'or',\n\tshowCheckbox: true,\n\tshowFilter: true,\n\tshowSearch: true,\n\tstyle: {},\n\tURLParams: false,\n\tshowCount: false\n};\n\n// Add componentType for SSR\nMultiDataList.componentType = _constants.componentTypes.multiDataList;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\trawData: state.rawData[props.componentId],\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\tthemePreset: state.config.themePreset,\n\t\toptions: props.nestedField && state.aggregations[props.componentId] ? state.aggregations[props.componentId].reactivesearch_nested : state.aggregations[props.componentId]\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tsetDefaultQuery: function setDefaultQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setDefaultQuery)(component, query));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(function (props) {\n\treturn _react2.default.createElement(\n\t\t_ComponentWrapper2.default,\n\t\t_extends({}, props, { internalComponent: true, componentType: _constants.componentTypes.multiDataList }),\n\t\tfunction () {\n\t\t\treturn _react2.default.createElement(MultiDataList, _extends({ ref: props.myForwardedRef }, props));\n\t\t}\n\t);\n});\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn _react2.default.createElement(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, MultiDataList);\n\nForwardRefComponent.name = 'MultiDataList';\nexports.default = ForwardRefComponent;"]},"metadata":{},"sourceType":"script"}