{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _propTypes = require('prop-types');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar defaultKeys = ['hits', 'value', 'aggregations', 'error'];\n\nvar filterProps = function filterProps(props) {\n  return _extends({}, props, {\n    props: props.componentProps\n  });\n};\n\nvar filterByComponentIds = function filterByComponentIds(state) {\n  var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var componentIds = props.componentIds;\n\n  if (typeof componentIds === 'string') {\n    var _ref;\n\n    return _ref = {}, _ref[componentIds] = state[componentIds], _ref;\n  }\n\n  if (componentIds instanceof Array) {\n    var filteredState = {};\n    componentIds.forEach(function (componentId) {\n      filteredState[componentId] = state[componentId];\n    });\n    return filteredState;\n  }\n\n  return state;\n};\n\nvar filterByKeys = function filterByKeys(state, allowedKeys) {\n  return Object.keys(state).reduce(function (components, componentId) {\n    var _extends2;\n\n    return _extends({}, components, (_extends2 = {}, _extends2[componentId] = Object.keys(state[componentId]).filter(function (key) {\n      return allowedKeys.includes(key);\n    }).reduce(function (obj, key) {\n      // eslint-disable-next-line\n      obj[key] = state[componentId][key];\n      return obj;\n    }, {}), _extends2));\n  }, {});\n};\n\nvar StateProvider = function (_Component) {\n  _inherits(StateProvider, _Component);\n\n  function StateProvider(props) {\n    _classCallCheck(this, StateProvider);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.state = {\n      searchState: filterByKeys((0, _helper.getSearchState)(filterProps(props)), props.includeKeys)\n    };\n    return _this;\n  }\n\n  StateProvider.getDerivedStateFromProps = function getDerivedStateFromProps(props) {\n    return {\n      searchState: filterByKeys((0, _helper.getSearchState)(filterProps(props)), props.includeKeys)\n    };\n  };\n\n  StateProvider.prototype.isStateChanged = function isStateChanged(prevState, nextState) {\n    return JSON.stringify(nextState) !== JSON.stringify(prevState);\n  };\n\n  StateProvider.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    // Only apply when componentIds is defined\n    if (!nextProps.strict || this.isStateChanged(this.state, nextState)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  StateProvider.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    var onChange = this.props.onChange;\n\n    if (onChange && this.isStateChanged(prevState, this.state)) {\n      onChange(prevState.searchState, this.state.searchState);\n    }\n  };\n\n  StateProvider.prototype.render = function render() {\n    var searchState = this.state.searchState;\n    return (0, _utils.getComponent)({\n      searchState: searchState\n    }, this.props);\n  };\n\n  return StateProvider;\n}(_react.Component);\n\nStateProvider.defaultProps = {\n  strict: true,\n  includeKeys: defaultKeys\n};\nStateProvider.propTypes = {\n  onChange: _propTypes.func,\n  render: _propTypes.func,\n  componentIds: (0, _propTypes.oneOfType)([_propTypes.string, (0, _propTypes.arrayOf)(_propTypes.string)]),\n  includeKeys: (0, _propTypes.arrayOf)(_propTypes.string),\n  strict: _propTypes.bool,\n  selectedValues: _types2.default.componentObject,\n  customData: _types2.default.componentObject,\n  queryLog: _types2.default.componentObject,\n  componentProps: _types2.default.componentObject,\n  hits: _types2.default.componentObject,\n  aggregations: _types2.default.componentObject,\n  isLoading: _types2.default.componentObject,\n  error: _types2.default.componentObject,\n  promotedResults: _types2.default.componentObject,\n  rawData: _types2.default.rawData\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValues: filterByComponentIds(state.selectedValues, props),\n    queryLog: filterByComponentIds(state.queryLog, props),\n    dependencyTree: filterByComponentIds(state.dependencyTree, props),\n    componentProps: filterByComponentIds(state.props, props),\n    hits: filterByComponentIds(state.hits, props),\n    aggregations: filterByComponentIds(state.aggregations, props),\n    isLoading: filterByComponentIds(state.isLoading, props),\n    error: filterByComponentIds(state.error, props),\n    promotedResults: filterByComponentIds(state.promotedResults, props),\n    customData: filterByComponentIds(state.customData, props),\n    settings: filterByComponentIds(state.settings, props),\n    rawData: filterByComponentIds(state.rawData, props)\n  };\n};\n\nexports.default = (0, _utils.connect)(mapStateToProps, null)(StateProvider);","map":{"version":3,"sources":["/Users/rogetgeoffroy/Desktop/Folders/react_js_folder/react-live-search-app/live-search/node_modules/@appbaseio/reactivesearch/lib/components/basic/StateProvider.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_react","require","_propTypes","_helper","_types","_types2","_interopRequireDefault","_utils","obj","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defaultKeys","filterProps","props","componentProps","filterByComponentIds","state","undefined","componentIds","_ref","Array","filteredState","forEach","componentId","filterByKeys","allowedKeys","keys","reduce","components","_extends2","filter","includes","StateProvider","_Component","_this","searchState","getSearchState","includeKeys","getDerivedStateFromProps","isStateChanged","prevState","nextState","JSON","stringify","shouldComponentUpdate","nextProps","strict","componentDidUpdate","prevProps","onChange","render","getComponent","Component","defaultProps","propTypes","func","oneOfType","string","arrayOf","bool","selectedValues","componentObject","customData","queryLog","hits","aggregations","isLoading","error","promotedResults","rawData","mapStateToProps","dependencyTree","settings","connect"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _propTypes = require('prop-types');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultKeys = ['hits', 'value', 'aggregations', 'error'];\n\nvar filterProps = function filterProps(props) {\n\treturn _extends({}, props, {\n\t\tprops: props.componentProps\n\t});\n};\n\nvar filterByComponentIds = function filterByComponentIds(state) {\n\tvar props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar componentIds = props.componentIds;\n\n\tif (typeof componentIds === 'string') {\n\t\tvar _ref;\n\n\t\treturn _ref = {}, _ref[componentIds] = state[componentIds], _ref;\n\t}\n\tif (componentIds instanceof Array) {\n\t\tvar filteredState = {};\n\t\tcomponentIds.forEach(function (componentId) {\n\t\t\tfilteredState[componentId] = state[componentId];\n\t\t});\n\t\treturn filteredState;\n\t}\n\treturn state;\n};\n\nvar filterByKeys = function filterByKeys(state, allowedKeys) {\n\treturn Object.keys(state).reduce(function (components, componentId) {\n\t\tvar _extends2;\n\n\t\treturn _extends({}, components, (_extends2 = {}, _extends2[componentId] = Object.keys(state[componentId]).filter(function (key) {\n\t\t\treturn allowedKeys.includes(key);\n\t\t}).reduce(function (obj, key) {\n\t\t\t// eslint-disable-next-line\n\t\t\tobj[key] = state[componentId][key];\n\t\t\treturn obj;\n\t\t}, {}), _extends2));\n\t}, {});\n};\n\nvar StateProvider = function (_Component) {\n\t_inherits(StateProvider, _Component);\n\n\tfunction StateProvider(props) {\n\t\t_classCallCheck(this, StateProvider);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_this.state = {\n\t\t\tsearchState: filterByKeys((0, _helper.getSearchState)(filterProps(props)), props.includeKeys)\n\t\t};\n\t\treturn _this;\n\t}\n\n\tStateProvider.getDerivedStateFromProps = function getDerivedStateFromProps(props) {\n\t\treturn {\n\t\t\tsearchState: filterByKeys((0, _helper.getSearchState)(filterProps(props)), props.includeKeys)\n\t\t};\n\t};\n\n\tStateProvider.prototype.isStateChanged = function isStateChanged(prevState, nextState) {\n\t\treturn JSON.stringify(nextState) !== JSON.stringify(prevState);\n\t};\n\n\tStateProvider.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n\t\t// Only apply when componentIds is defined\n\t\tif (!nextProps.strict || this.isStateChanged(this.state, nextState)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tStateProvider.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n\t\tvar onChange = this.props.onChange;\n\n\t\tif (onChange && this.isStateChanged(prevState, this.state)) {\n\t\t\tonChange(prevState.searchState, this.state.searchState);\n\t\t}\n\t};\n\n\tStateProvider.prototype.render = function render() {\n\t\tvar searchState = this.state.searchState;\n\n\t\treturn (0, _utils.getComponent)({ searchState: searchState }, this.props);\n\t};\n\n\treturn StateProvider;\n}(_react.Component);\n\nStateProvider.defaultProps = {\n\tstrict: true,\n\tincludeKeys: defaultKeys\n};\nStateProvider.propTypes = {\n\tonChange: _propTypes.func,\n\trender: _propTypes.func,\n\tcomponentIds: (0, _propTypes.oneOfType)([_propTypes.string, (0, _propTypes.arrayOf)(_propTypes.string)]),\n\tincludeKeys: (0, _propTypes.arrayOf)(_propTypes.string),\n\tstrict: _propTypes.bool,\n\tselectedValues: _types2.default.componentObject,\n\tcustomData: _types2.default.componentObject,\n\tqueryLog: _types2.default.componentObject,\n\tcomponentProps: _types2.default.componentObject,\n\thits: _types2.default.componentObject,\n\taggregations: _types2.default.componentObject,\n\tisLoading: _types2.default.componentObject,\n\terror: _types2.default.componentObject,\n\tpromotedResults: _types2.default.componentObject,\n\trawData: _types2.default.rawData\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValues: filterByComponentIds(state.selectedValues, props),\n\t\tqueryLog: filterByComponentIds(state.queryLog, props),\n\t\tdependencyTree: filterByComponentIds(state.dependencyTree, props),\n\t\tcomponentProps: filterByComponentIds(state.props, props),\n\t\thits: filterByComponentIds(state.hits, props),\n\t\taggregations: filterByComponentIds(state.aggregations, props),\n\t\tisLoading: filterByComponentIds(state.isLoading, props),\n\t\terror: filterByComponentIds(state.error, props),\n\t\tpromotedResults: filterByComponentIds(state.promotedResults, props),\n\t\tcustomData: filterByComponentIds(state.customData, props),\n\t\tsettings: filterByComponentIds(state.settings, props),\n\t\trawData: filterByComponentIds(state.rawData, props)\n\t};\n};\n\nexports.default = (0, _utils.connect)(mapStateToProps, null)(StateProvider);"]},"metadata":{},"sourceType":"script"}