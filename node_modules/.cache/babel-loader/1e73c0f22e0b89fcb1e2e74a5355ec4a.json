{"ast":null,"code":"var _jsxFileName = \"/Users/rogetgeoffroy/Desktop/Folders/react_js_folder/react-live-search-app/live-search/src/components/search.js\";\nimport React from 'react';\nimport '../css/search.css';\nimport axios from 'axios';\nimport Loader from '../loader.gif'; //import PageNavigation from './pageNavigation';\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getPageCount = (total, denominator) => {\n      const divisible = 0 === total % denominator;\n      const valueToBeAdded = divisible ? 0 : 1;\n      return Math.floor(total / denominator) + valueToBeAdded;\n    };\n\n    this.fetchSearchResults = query => {\n      //const pageNumber = updatedPageNo ? `&page=${updatedPageNo}` : '';\n      //const pageNumber = updatedPageNo ? `&start=${updatedPageNo}` : '';\n      //const searchUrl = `https://pixabay.com/api/?key=18255850-16d32335bc5b9c156925ab6b5&q=${query}${pageNumber}`;\n      //const searchUrl = `https://pixabay.com/api/?key=18255850-16d32335bc5b9c156925ab6b5&q=${query}`;\n      const searchUrl = `https://jsonplaceholder.typicode.com/users?q=${query}`; //const searchUrl = `https://source.unsplash.com/featured/?${query};`\n      //const searchUrl = `https://api.unsplash.com/search/photos/?${pageNumber}&query=${query}`;\n      //const searchUrl = `https://www.googleapis.com/customsearch/v1/?q=${query}&${pageNumber}&searchType=image&key=AIzaSyCFRSbSTcTdOhZtEk6mrBBCibQMzWqAFlQ&cx=97095e5db09fb636d`\n\n      axios.get(searchUrl).then(res => {\n        this.setState({\n          //results: res.data.hits,\n          results: res.data,\n          loading: false\n        });\n      }).catch(error => {\n        if (axios.isCancel(error) || error) {\n          this.setState({\n            loading: false,\n            message: 'Failed to fetch the data. Please check network'\n          });\n        }\n      });\n    };\n\n    this.handleOnInputChange = event => {\n      const query = event.target.value;\n\n      if (!query) {\n        this.setState({\n          query,\n          results: [],\n          message: ''\n        });\n      } else {\n        this.setState({\n          query,\n          loading: true,\n          message: ''\n        }, () => {\n          this.fetchSearchResults(1, query);\n        });\n      }\n    };\n\n    this.renderSearchResults = () => {\n      const {\n        results\n      } = this.state;\n\n      if (Object.keys(results).length && results.length) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"results-container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 5\n          }\n        }, results.map(result => {\n          console.log(result.name);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 8\n            }\n          }, /*#__PURE__*/React.createElement(\"ul\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 9\n            }\n          }, /*#__PURE__*/React.createElement(\"li\", {\n            key: result.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 10\n            }\n          }, this.result.name)));\n        }));\n      }\n    };\n\n    this.state = {\n      query: '',\n      results: [],\n      loading: false,\n      message: '',\n      totalResults: 0,\n      totalPages: 0,\n      currentPageNo: 0\n    };\n    this.cancel = '';\n  }\n  /**\n   * Get the Total Pages count.\n   *\n   * @param total\n   * @param denominator Count of results per page\n   * @return {number}\n   */\n\n\n  render() {\n    //const { query, loading, message, currentPageNo, totalPages } = this.state;\n    const {\n      query,\n      loading,\n      message\n    } = this.state; //const showPrevLink = 1 < currentPageNo;\n    //const showNextLink = totalPages > currentPageNo;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"search-label\",\n      htmlFor: \"search-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"query\",\n      value: query,\n      id: \"search-input\",\n      placeholder: \"Search...\",\n      onChange: this.handleOnInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-search search-icon\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 5\n      }\n    })), message && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, message), /*#__PURE__*/React.createElement(\"img\", {\n      src: Loader,\n      className: `search-loading ${loading ? 'show' : 'hide'}`,\n      alt: \"loader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 4\n      }\n    }), this.renderSearchResults());\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/rogetgeoffroy/Desktop/Folders/react_js_folder/react-live-search-app/live-search/src/components/search.js"],"names":["React","axios","Loader","Search","Component","constructor","props","getPageCount","total","denominator","divisible","valueToBeAdded","Math","floor","fetchSearchResults","query","searchUrl","get","then","res","setState","results","data","loading","catch","error","isCancel","message","handleOnInputChange","event","target","value","renderSearchResults","state","Object","keys","length","map","result","console","log","name","id","totalResults","totalPages","currentPageNo","cancel","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../css/search.css';\nimport axios from 'axios';\nimport Loader from '../loader.gif';\n//import PageNavigation from './pageNavigation';\n\nclass Search extends React.Component {\n\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tquery: '',\n\t\t\tresults: [],\n\t\t\tloading: false,\n\t\t\tmessage: '',\n\t\t\ttotalResults: 0,\n\t\t\ttotalPages: 0,\n\t\t\tcurrentPageNo: 0,\n\t\t};\n\n\t\tthis.cancel = '';\n\t}\n\n\n\t/**\n\t * Get the Total Pages count.\n\t *\n\t * @param total\n\t * @param denominator Count of results per page\n\t * @return {number}\n\t */\n\tgetPageCount = ( total, denominator ) => {\n\t\tconst divisible\t= 0 === total % denominator;\n\t\tconst valueToBeAdded = divisible ? 0 : 1;\n\t\treturn Math.floor( total/denominator ) + valueToBeAdded;\n\t};\n\n\t/**\n\t * Fetch the search results and update the state with the result.\n\t * Also cancels the previous query before making the new one.\n\t *\n\t * @param {int} updatedPageNo Updated Page No.\n\t * @param {String} query Search Query.\n\t *\n\t */\n\tfetchSearchResults = ( query ) => {\n\t\t//const pageNumber = updatedPageNo ? `&page=${updatedPageNo}` : '';\n\t\t//const pageNumber = updatedPageNo ? `&start=${updatedPageNo}` : '';\n\n\t\t//const searchUrl = `https://pixabay.com/api/?key=18255850-16d32335bc5b9c156925ab6b5&q=${query}${pageNumber}`;\n\t\t//const searchUrl = `https://pixabay.com/api/?key=18255850-16d32335bc5b9c156925ab6b5&q=${query}`;\n\t\tconst searchUrl = `https://jsonplaceholder.typicode.com/users?q=${query}`;\n\t\t//const searchUrl = `https://source.unsplash.com/featured/?${query};`\n\t\t//const searchUrl = `https://api.unsplash.com/search/photos/?${pageNumber}&query=${query}`;\n\t\t//const searchUrl = `https://www.googleapis.com/customsearch/v1/?q=${query}&${pageNumber}&searchType=image&key=AIzaSyCFRSbSTcTdOhZtEk6mrBBCibQMzWqAFlQ&cx=97095e5db09fb636d`\n\n\n\t\taxios.get( searchUrl )\n\t\t\t.then( res => {\n\t\t\t\tthis.setState( {\n\t\t\t\t\t//results: res.data.hits,\n\t\t\t\t\tresults: res.data,\n\t\t\t\t\tloading: false\n\t\t\t\t} )\n\t\t\t} )\n\t\t\t.catch( error => {\n\t\t\t\tif ( axios.isCancel(error) || error ) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\tmessage: 'Failed to fetch the data. Please check network'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} )\n\t};\n\n\thandleOnInputChange = ( event ) => {\n\t\tconst query = event.target.value;\n\t\tif ( ! query ) {\n\t\t\tthis.setState( { query, results: [], message: ''} );\n\t\t} else {\n\t\t\tthis.setState( { query, loading: true, message: '' }, () => {\n\t\t\t\tthis.fetchSearchResults( 1, query );\n\t\t\t} );\n\t\t}\n\t};\n\n\t/**\n\t * Fetch results according to the prev or next page requests.\n\t *\n\t * @param {String} type 'prev' or 'next'\n\t */\n\n\n\trenderSearchResults = () => {\n\t\tconst { results } = this.state;\n\n\t\tif ( Object.keys( results ).length && results.length ) {\n\t\t\treturn (\n\t\t\t\t<div className=\"results-container\">\n\t\t\t\t\t{ results.map( result => {\n\t\t\t\t\t\tconsole.log(result.name)\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t{/*<li key={ result.id }><img src={result.previewURL} alt={result.tags} width=\"100\" height=\"100\" /></li>*/}\n\t\t\t\t\t\t\t\t\t<li key={ result.id }>{ this.result.name }</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t\t} ) }\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t};\n\n\trender() {\n\t\t//const { query, loading, message, currentPageNo, totalPages } = this.state;\n\t\tconst { query, loading, message } = this.state;\n\n\t\t//const showPrevLink = 1 < currentPageNo;\n\t\t//const showNextLink = totalPages > currentPageNo;\n\n\t\treturn (\n\t\t\t<div className=\"container\">\n\t\t\t{/*\tHeading*/}\n\t\t\t{/*<h2 className=\"heading\">Live Search: React Application</h2>*/}\n\t\t\t{/* Search Input*/}\n\t\t\t<label className=\"search-label\" htmlFor=\"search-input\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"query\"\n\t\t\t\t\tvalue={ query }\n\t\t\t\t\tid=\"search-input\"\n\t\t\t\t\tplaceholder=\"Search...\"\n\t\t\t\t\tonChange={this.handleOnInputChange}\n\t\t\t\t/>\n\t\t\t\t<i className=\"fa fa-search search-icon\" aria-hidden=\"true\"/>\n\t\t\t</label>\n\n\t\t\t{/*\tError Message*/}\n\t\t\t\t{message && <p className=\"message\">{ message }</p>}\n\n\t\t\t{/*\tLoader*/}\n\t\t\t<img src={ Loader } className={`search-loading ${ loading ? 'show' : 'hide' }`} alt=\"loader\"/>\n\n\t\t\t{/*Navigation*/}\n\t\t\t{/*<PageNavigation\n\t\t\t\tloading={loading}\n\t\t\t\tshowPrevLink={showPrevLink}\n\t\t\t\tshowNextLink={showNextLink}\n\t\t\t\thandlePrevClick={ () => this.handlePageClick('prev', this.event )}\n\t\t\t\thandleNextClick={ () => this.handlePageClick('next', this.event )}\n\t\t\t/>*/}\n\n\t\t\t{/*\tResult*/}\n\t\t\t{ this.renderSearchResults() }\n\n\t\t\t{/*Navigation*/}\n\t\t\t{/*<PageNavigation\n\t\t\t\tloading={loading}\n\t\t\t\tshowPrevLink={showPrevLink}\n\t\t\t\tshowNextLink={showNextLink}\n\t\t\t\thandlePrevClick={ () => this.handlePageClick('prev', this.event )}\n\t\t\t\thandleNextClick={ () => this.handlePageClick('next', this.event )}\n\t\t\t/>*/}\n\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Search"]},"metadata":{},"sourceType":"module"}