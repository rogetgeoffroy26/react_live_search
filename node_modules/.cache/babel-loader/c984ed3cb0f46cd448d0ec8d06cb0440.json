{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _MicIcon = require('../../../styles/MicIcon');\n\nvar _MicIcon2 = _interopRequireDefault(_MicIcon);\n\nvar _utils = require('../../../utils');\n\nvar _MicSvg = require('../../shared/MicSvg');\n\nvar _MicSvg2 = _interopRequireDefault(_MicSvg);\n\nvar _MuteSvg = require('../../shared/MuteSvg');\n\nvar _MuteSvg2 = _interopRequireDefault(_MuteSvg);\n\nvar _ListenSvg = require('../../shared/ListenSvg');\n\nvar _ListenSvg2 = _interopRequireDefault(_ListenSvg);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar STATUS = {\n  inactive: 'INACTIVE',\n  stopped: 'STOPPED',\n  active: 'ACTIVE',\n  denied: 'DENIED'\n};\n\nvar Mic = function (_React$Component) {\n  _inherits(Mic, _React$Component);\n\n  function Mic() {\n    _classCallCheck(this, Mic);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this));\n\n    _this.stopMic = function () {\n      if (_this.instance) {\n        _this.setState({\n          status: STATUS.inactive\n        }, function () {\n          _this.instance.stop();\n\n          _this.instance = null;\n        });\n      }\n    };\n\n    _this.handleClick = function () {\n      _this.results = [];\n\n      if (window && window.SpeechRecognition) {\n        var status = _this.state.status;\n\n        if (status === STATUS.active) {\n          _this.setState({\n            status: STATUS.inactive\n          });\n        }\n\n        var _this$props = _this.props,\n            onResult = _this$props.onResult,\n            onNoMatch = _this$props.onNoMatch,\n            onError = _this$props.onError,\n            lang = _this$props.lang,\n            getInstance = _this$props.getInstance;\n        var _window = window,\n            SpeechRecognition = _window.SpeechRecognition;\n\n        if (_this.instance && status !== STATUS.denied) {\n          _this.setState({\n            status: STATUS.inactive\n          }, function () {\n            _this.instance.stop();\n\n            _this.instance = null;\n          });\n\n          return;\n        }\n\n        _this.instance = new SpeechRecognition();\n        _this.instance.continuous = true;\n        _this.instance.interimResults = false;\n        _this.instance.lang = lang;\n\n        if (getInstance) {\n          getInstance(_this.instance);\n        }\n\n        _this.instance.start();\n\n        _this.instance.onstart = function () {\n          _this.setState({\n            status: STATUS.active\n          });\n        };\n\n        _this.instance.onresult = function (_ref) {\n          var results = _ref.results,\n              timeStamp = _ref.timeStamp;\n\n          _this.stopMic();\n\n          if (onResult) {\n            onResult({\n              results: results,\n              timeStamp: timeStamp\n            });\n          }\n\n          _this.results.push({\n            results: results,\n            timeStamp: timeStamp\n          });\n        };\n\n        _this.instance.onnomatch = function (e) {\n          return onNoMatch ? onNoMatch(e) : console.warn(e);\n        };\n\n        _this.instance.onerror = function (e) {\n          if (e.error === 'no-speech' || e.error === 'audio-capture') {\n            _this.setState({\n              status: STATUS.inactive\n            });\n          } else if (e.error === 'not-allowed') {\n            _this.setState({\n              status: STATUS.denied\n            });\n          }\n\n          console.error(e);\n\n          if (onError) {\n            onError(e);\n          }\n        };\n        /* Below Two methods run when Continuous is False */\n\n\n        _this.instance.onspeechend = function () {\n          _this.setState({\n            status: STATUS.inactive\n          });\n        };\n\n        _this.instance.onaudioend = function () {\n          _this.setState({\n            status: STATUS.inactive\n          });\n        };\n      }\n    };\n\n    _this.state = {\n      status: STATUS.inactive\n    };\n    _this.results = [];\n\n    if (typeof window !== 'undefined') {\n      window.SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition || null;\n\n      if (!window.SpeechRecognition) {\n        console.error('SpeechRecognition is not supported in this browser. Please check the browser compatibility at https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition#Browser_compatibility.');\n      }\n    }\n\n    return _this;\n  }\n\n  Mic.prototype.getComponent = function getComponent() {\n    var status = this.state.status;\n    var data = {\n      handleClick: this.handleClick,\n      status: status\n    };\n    return (0, _utils.getComponent)(data, this.props);\n  };\n\n  Mic.prototype.render = function render() {\n    var _props = this.props,\n        iconPosition = _props.iconPosition,\n        applyClearStyle = _props.applyClearStyle,\n        showIcon = _props.showIcon;\n\n    if (this.hasCustomRenderer) {\n      return this.getComponent();\n    }\n\n    return _react2.default.createElement(_MicIcon2.default, {\n      showIcon: showIcon,\n      showClear: applyClearStyle,\n      iconPosition: iconPosition\n    }, this.Icon);\n  };\n\n  _createClass(Mic, [{\n    key: 'Icon',\n    get: function get() {\n      var status = this.state.status;\n      var className = this.props.className;\n\n      switch (status) {\n        case STATUS.active:\n          return _react2.default.createElement(_ListenSvg2.default, {\n            className: className,\n            onClick: this.handleClick\n          });\n\n        case STATUS.stopped:\n        case STATUS.denied:\n          return _react2.default.createElement(_MuteSvg2.default, {\n            className: className,\n            onClick: this.handleClick\n          });\n\n        default:\n          return _react2.default.createElement(_MicSvg2.default, {\n            className: className,\n            onClick: this.handleClick\n          });\n      }\n    }\n  }, {\n    key: 'hasCustomRenderer',\n    get: function get() {\n      return (0, _utils.hasCustomRenderer)(this.props);\n    }\n  }]);\n\n  return Mic;\n}(_react2.default.Component);\n\nMic.defaultProps = {\n  lang: 'en-US',\n  iconPosition: 'left'\n};\nMic.propTypes = {\n  children: _types2.default.title,\n  lang: _types2.default.string,\n  iconPosition: _types2.default.string,\n  onResult: _types2.default.func,\n  onNoMatch: _types2.default.func,\n  onError: _types2.default.func,\n  getInstance: _types2.default.func,\n  render: _types2.default.func,\n  className: _types2.default.string,\n  applyClearStyle: _types2.default.bool,\n  showIcon: _types2.default.bool\n};\nexports.default = Mic;","map":{"version":3,"sources":["/Users/rogetgeoffroy/Desktop/Folders/react_js_folder/react-live-search-app/live-search/node_modules/@appbaseio/reactivesearch/lib/components/search/addons/Mic.js"],"names":["exports","__esModule","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_types","_types2","_MicIcon","_MicIcon2","_utils","_MicSvg","_MicSvg2","_MuteSvg","_MuteSvg2","_ListenSvg","_ListenSvg2","obj","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","STATUS","inactive","stopped","active","denied","Mic","_React$Component","_this","stopMic","setState","status","stop","handleClick","results","window","SpeechRecognition","state","_this$props","onResult","onNoMatch","onError","lang","getInstance","_window","continuous","interimResults","start","onstart","onresult","_ref","timeStamp","push","onnomatch","e","console","warn","onerror","error","onspeechend","onaudioend","webkitSpeechRecognition","getComponent","data","render","_props","iconPosition","applyClearStyle","showIcon","hasCustomRenderer","createElement","showClear","Icon","get","className","onClick","Component","defaultProps","propTypes","children","title","string","func","bool"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _MicIcon = require('../../../styles/MicIcon');\n\nvar _MicIcon2 = _interopRequireDefault(_MicIcon);\n\nvar _utils = require('../../../utils');\n\nvar _MicSvg = require('../../shared/MicSvg');\n\nvar _MicSvg2 = _interopRequireDefault(_MicSvg);\n\nvar _MuteSvg = require('../../shared/MuteSvg');\n\nvar _MuteSvg2 = _interopRequireDefault(_MuteSvg);\n\nvar _ListenSvg = require('../../shared/ListenSvg');\n\nvar _ListenSvg2 = _interopRequireDefault(_ListenSvg);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar STATUS = {\n\tinactive: 'INACTIVE',\n\tstopped: 'STOPPED',\n\tactive: 'ACTIVE',\n\tdenied: 'DENIED'\n};\n\nvar Mic = function (_React$Component) {\n\t_inherits(Mic, _React$Component);\n\n\tfunction Mic() {\n\t\t_classCallCheck(this, Mic);\n\n\t\tvar _this = _possibleConstructorReturn(this, _React$Component.call(this));\n\n\t\t_this.stopMic = function () {\n\t\t\tif (_this.instance) {\n\t\t\t\t_this.setState({\n\t\t\t\t\tstatus: STATUS.inactive\n\t\t\t\t}, function () {\n\t\t\t\t\t_this.instance.stop();\n\t\t\t\t\t_this.instance = null;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t_this.handleClick = function () {\n\t\t\t_this.results = [];\n\t\t\tif (window && window.SpeechRecognition) {\n\t\t\t\tvar status = _this.state.status;\n\n\t\t\t\tif (status === STATUS.active) {\n\t\t\t\t\t_this.setState({\n\t\t\t\t\t\tstatus: STATUS.inactive\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tvar _this$props = _this.props,\n\t\t\t\t    onResult = _this$props.onResult,\n\t\t\t\t    onNoMatch = _this$props.onNoMatch,\n\t\t\t\t    onError = _this$props.onError,\n\t\t\t\t    lang = _this$props.lang,\n\t\t\t\t    getInstance = _this$props.getInstance;\n\t\t\t\tvar _window = window,\n\t\t\t\t    SpeechRecognition = _window.SpeechRecognition;\n\n\t\t\t\tif (_this.instance && status !== STATUS.denied) {\n\t\t\t\t\t_this.setState({\n\t\t\t\t\t\tstatus: STATUS.inactive\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\t_this.instance.stop();\n\t\t\t\t\t\t_this.instance = null;\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_this.instance = new SpeechRecognition();\n\t\t\t\t_this.instance.continuous = true;\n\t\t\t\t_this.instance.interimResults = false;\n\t\t\t\t_this.instance.lang = lang;\n\t\t\t\tif (getInstance) {\n\t\t\t\t\tgetInstance(_this.instance);\n\t\t\t\t}\n\t\t\t\t_this.instance.start();\n\t\t\t\t_this.instance.onstart = function () {\n\t\t\t\t\t_this.setState({\n\t\t\t\t\t\tstatus: STATUS.active\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\t_this.instance.onresult = function (_ref) {\n\t\t\t\t\tvar results = _ref.results,\n\t\t\t\t\t    timeStamp = _ref.timeStamp;\n\n\t\t\t\t\t_this.stopMic();\n\t\t\t\t\tif (onResult) {\n\t\t\t\t\t\tonResult({ results: results, timeStamp: timeStamp });\n\t\t\t\t\t}\n\t\t\t\t\t_this.results.push({ results: results, timeStamp: timeStamp });\n\t\t\t\t};\n\t\t\t\t_this.instance.onnomatch = function (e) {\n\t\t\t\t\treturn onNoMatch ? onNoMatch(e) : console.warn(e);\n\t\t\t\t};\n\t\t\t\t_this.instance.onerror = function (e) {\n\t\t\t\t\tif (e.error === 'no-speech' || e.error === 'audio-capture') {\n\t\t\t\t\t\t_this.setState({\n\t\t\t\t\t\t\tstatus: STATUS.inactive\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (e.error === 'not-allowed') {\n\t\t\t\t\t\t_this.setState({\n\t\t\t\t\t\t\tstatus: STATUS.denied\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t\tif (onError) {\n\t\t\t\t\t\tonError(e);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/* Below Two methods run when Continuous is False */\n\t\t\t\t_this.instance.onspeechend = function () {\n\t\t\t\t\t_this.setState({\n\t\t\t\t\t\tstatus: STATUS.inactive\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\t_this.instance.onaudioend = function () {\n\t\t\t\t\t_this.setState({\n\t\t\t\t\t\tstatus: STATUS.inactive\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\t_this.state = {\n\t\t\tstatus: STATUS.inactive\n\t\t};\n\t\t_this.results = [];\n\n\t\tif (typeof window !== 'undefined') {\n\t\t\twindow.SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition || null;\n\n\t\t\tif (!window.SpeechRecognition) {\n\t\t\t\tconsole.error('SpeechRecognition is not supported in this browser. Please check the browser compatibility at https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition#Browser_compatibility.');\n\t\t\t}\n\t\t}\n\t\treturn _this;\n\t}\n\n\tMic.prototype.getComponent = function getComponent() {\n\t\tvar status = this.state.status;\n\n\t\tvar data = {\n\t\t\thandleClick: this.handleClick,\n\t\t\tstatus: status\n\t\t};\n\t\treturn (0, _utils.getComponent)(data, this.props);\n\t};\n\n\tMic.prototype.render = function render() {\n\t\tvar _props = this.props,\n\t\t    iconPosition = _props.iconPosition,\n\t\t    applyClearStyle = _props.applyClearStyle,\n\t\t    showIcon = _props.showIcon;\n\n\t\tif (this.hasCustomRenderer) {\n\t\t\treturn this.getComponent();\n\t\t}\n\t\treturn _react2.default.createElement(\n\t\t\t_MicIcon2.default,\n\t\t\t{ showIcon: showIcon, showClear: applyClearStyle, iconPosition: iconPosition },\n\t\t\tthis.Icon\n\t\t);\n\t};\n\n\t_createClass(Mic, [{\n\t\tkey: 'Icon',\n\t\tget: function get() {\n\t\t\tvar status = this.state.status;\n\t\t\tvar className = this.props.className;\n\n\t\t\tswitch (status) {\n\t\t\t\tcase STATUS.active:\n\t\t\t\t\treturn _react2.default.createElement(_ListenSvg2.default, { className: className, onClick: this.handleClick });\n\t\t\t\tcase STATUS.stopped:\n\t\t\t\tcase STATUS.denied:\n\t\t\t\t\treturn _react2.default.createElement(_MuteSvg2.default, { className: className, onClick: this.handleClick });\n\t\t\t\tdefault:\n\t\t\t\t\treturn _react2.default.createElement(_MicSvg2.default, { className: className, onClick: this.handleClick });\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'hasCustomRenderer',\n\t\tget: function get() {\n\t\t\treturn (0, _utils.hasCustomRenderer)(this.props);\n\t\t}\n\t}]);\n\n\treturn Mic;\n}(_react2.default.Component);\n\nMic.defaultProps = {\n\tlang: 'en-US',\n\ticonPosition: 'left'\n};\n\nMic.propTypes = {\n\tchildren: _types2.default.title,\n\tlang: _types2.default.string,\n\ticonPosition: _types2.default.string,\n\tonResult: _types2.default.func,\n\tonNoMatch: _types2.default.func,\n\tonError: _types2.default.func,\n\tgetInstance: _types2.default.func,\n\trender: _types2.default.func,\n\tclassName: _types2.default.string,\n\tapplyClearStyle: _types2.default.bool,\n\tshowIcon: _types2.default.bool\n};\n\nexports.default = Mic;"]},"metadata":{},"sourceType":"script"}