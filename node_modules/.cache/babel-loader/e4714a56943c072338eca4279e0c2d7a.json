{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTopSuggestions = exports.withClickIds = exports.getCompositeAggsQuery = exports.getAggsQuery = exports.extractQueryFromDefaultQuery = exports.updateInternalQuery = exports.getSearchState = exports.getOptionsFromQuery = exports.parseHits = exports.handleA11yAction = exports.getInnerKey = exports.getClassName = exports.checkSomePropChange = exports.checkPropChange = exports.updateDefaultQuery = exports.updateCustomQuery = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.isEqual = isEqual;\nexports.debounce = debounce;\nexports.getQueryOptions = getQueryOptions;\nexports.buildQuery = buildQuery;\nexports.pushToAndClause = pushToAndClause;\nexports.checkValueChange = checkValueChange;\nexports.getAggsOrder = getAggsOrder;\nexports.formatDate = formatDate;\nexports.getResultStats = getResultStats;\nexports.handleOnSuggestions = handleOnSuggestions;\n\nvar _dateFormats = require('./dateFormats');\n\nvar _dateFormats2 = _interopRequireDefault(_dateFormats);\n\nvar _suggestions = require('./suggestions');\n\nvar _suggestions2 = _interopRequireDefault(_suggestions);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar updateCustomQuery = exports.updateCustomQuery = function updateCustomQuery(componentId, props, value) {\n  if (props.customQuery && typeof props.customQuery === 'function') {\n    props.setCustomQuery(componentId, props.customQuery(value, props));\n  }\n};\n\nvar updateDefaultQuery = exports.updateDefaultQuery = function updateDefaultQuery(componentId, props, value) {\n  if (props.defaultQuery && typeof props.defaultQuery === 'function') {\n    props.setDefaultQuery(componentId, props.defaultQuery(value, props));\n  }\n};\n\nfunction isEqual(x, y) {\n  if (x === y) return true;\n  if (!(x instanceof Object) || !(y instanceof Object)) return false;\n  if (x.constructor !== y.constructor) return false;\n\n  for (var p in x) {\n    if (!x.hasOwnProperty(p)) continue;\n    if (!y.hasOwnProperty(p)) return false;\n    if (x[p] === y[p]) continue;\n    if (typeof x[p] !== 'object') return false;\n    if (!isEqual(x[p], y[p])) return false;\n  }\n\n  for (var _p in y) {\n    if (y.hasOwnProperty(_p) && !x.hasOwnProperty(_p)) return false;\n  }\n\n  return true;\n}\n\nfunction debounce(callback, wait) {\n  var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n  var timeout = null;\n  var callbackArgs = null;\n\n  var later = function later() {\n    return callback.apply(context, callbackArgs);\n  };\n\n  return function debouncedFunction() {\n    callbackArgs = arguments;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\nfunction getQueryOptions(props) {\n  var options = {};\n\n  if (props.size !== undefined) {\n    options.size = props.size;\n  }\n\n  if (props.includeFields || props.excludeFields) {\n    var source = {};\n\n    if (props.includeFields) {\n      source.includes = props.includeFields;\n    }\n\n    if (props.excludeFields) {\n      source.excludes = props.excludeFields;\n    }\n\n    options._source = source;\n  }\n\n  return options;\n}\n\nfunction getOperation(conjunction) {\n  if (conjunction === 'and') {\n    return 'must';\n  }\n\n  if (conjunction === 'or') {\n    return 'should';\n  }\n\n  return 'must_not';\n}\n\nfunction createBoolQuery(operation, query) {\n  var resultQuery = null;\n\n  if (Array.isArray(query) && query.length || !Array.isArray(query) && query) {\n    resultQuery = {\n      bool: _defineProperty({}, operation, query)\n    };\n  }\n\n  if (operation === 'should' && resultQuery) {\n    resultQuery = {\n      bool: _extends({}, resultQuery.bool, {\n        minimum_should_match: 1\n      })\n    };\n  }\n\n  return resultQuery;\n}\n\nfunction getQuery(react, queryList) {\n  var query = [];\n  Object.keys(react).forEach(function (conjunction) {\n    if (Array.isArray(react[conjunction])) {\n      var operation = getOperation(conjunction);\n      var queryArr = react[conjunction].map(function (comp) {\n        if (typeof comp !== 'string') {\n          return getQuery(comp, queryList);\n        } else if (comp in queryList) {\n          return queryList[comp];\n        }\n\n        return null;\n      }).filter(function (item) {\n        return !!item;\n      });\n      var boolQuery = createBoolQuery(operation, queryArr);\n\n      if (boolQuery) {\n        query = [].concat(_toConsumableArray(query), [boolQuery]);\n      }\n    } else if (typeof react[conjunction] === 'string') {\n      var _operation = getOperation(conjunction);\n\n      var _boolQuery = createBoolQuery(_operation, queryList[react[conjunction]]);\n\n      if (_boolQuery) {\n        query = [].concat(_toConsumableArray(query), [_boolQuery]);\n      }\n    } else if (typeof react[conjunction] === 'object' && react[conjunction] !== null) {\n      var _boolQuery2 = getQuery(react[conjunction], queryList);\n\n      if (_boolQuery2) {\n        query = [].concat(_toConsumableArray(query), [_boolQuery2]);\n      }\n    }\n  });\n\n  if (Array.isArray(query) && query.length) {\n    return {\n      bool: {\n        must: query\n      }\n    };\n  }\n\n  if (query && Object.keys(query).length) {\n    return query;\n  }\n\n  return null;\n}\n\nfunction getExternalQueryOptions(react, options, component) {\n  var queryOptions = {};\n  Object.keys(react).forEach(function (conjunction) {\n    if (Array.isArray(react[conjunction])) {\n      react[conjunction].forEach(function (comp) {\n        if (options[comp]) {\n          queryOptions = _extends({}, queryOptions, options[comp]);\n        }\n      });\n    } else if (typeof react[conjunction] === 'string') {\n      if (options[react[conjunction]]) {\n        queryOptions = _extends({}, queryOptions, options[react[conjunction]]);\n      }\n    } else if (typeof react[conjunction] === 'object' && react[conjunction] !== null && !Array.isArray(react[conjunction])) {\n      queryOptions = _extends({}, queryOptions, getExternalQueryOptions(react[conjunction], options));\n    }\n  });\n\n  if (options[component]) {\n    queryOptions = _extends({}, queryOptions, options[component]);\n  }\n\n  return queryOptions;\n}\n\nfunction buildQuery(component, dependencyTree, queryList, queryOptions) {\n  var queryObj = null;\n  var options = null;\n\n  if (component in dependencyTree) {\n    queryObj = getQuery(dependencyTree[component], queryList);\n    options = getExternalQueryOptions(dependencyTree[component], queryOptions, component);\n  }\n\n  return {\n    queryObj: queryObj,\n    options: options\n  };\n}\n\nfunction pushToAndClause(reactProp, component) {\n  var react = _extends({}, reactProp);\n\n  if (react.and) {\n    if (Array.isArray(react.and)) {\n      react.and = [].concat(_toConsumableArray(react.and), [component]);\n      return react;\n    } else if (typeof react.and === 'string') {\n      react.and = [react.and, component];\n      return react;\n    }\n\n    react.and = pushToAndClause(react.and, component);\n    return react;\n  }\n\n  return _extends({}, react, {\n    and: component\n  });\n}\n\nfunction checkValueChange(componentId, value, beforeValueChange, performUpdate) {\n  var selectedValue = value;\n\n  if (Array.isArray(value) && !value.length) {\n    selectedValue = null;\n  }\n\n  var handleError = function handleError(e) {\n    console.warn(componentId + ' - beforeValueChange rejected the promise with ', e);\n  };\n\n  if (beforeValueChange) {\n    try {\n      var promise = beforeValueChange(selectedValue);\n\n      if (promise instanceof Promise) {\n        promise.then(performUpdate).catch(handleError);\n      } else {\n        performUpdate();\n      }\n    } catch (e) {\n      handleError(e);\n    }\n  } else {\n    performUpdate();\n  }\n}\n\nfunction getAggsOrder(sortBy) {\n  if (sortBy === 'count') {\n    return {\n      _count: 'desc'\n    };\n  }\n\n  return {\n    _term: sortBy\n  };\n}\n\nvar checkPropChange = exports.checkPropChange = function checkPropChange(prevProp, nextProp, callback) {\n  if (!isEqual(prevProp, nextProp)) {\n    callback();\n    return true;\n  }\n\n  return false;\n};\n\nvar checkSomePropChange = exports.checkSomePropChange = function checkSomePropChange() {\n  var prevProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var nextProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var propsList = arguments[2];\n  var callback = arguments[3];\n  propsList.some(function (prop) {\n    return checkPropChange(prevProps[prop], nextProps[prop], callback);\n  });\n};\n\nvar getClassName = exports.getClassName = function getClassName(classMap, component) {\n  return classMap && classMap[component] || '';\n};\n\nvar getInnerKey = exports.getInnerKey = function getInnerKey(obj, key) {\n  return obj && obj[key] || {};\n};\n\nvar handleA11yAction = exports.handleA11yAction = function handleA11yAction(e, callback) {\n  if (e.key === 'Enter' || e.key === ' ') {\n    e.preventDefault();\n    callback();\n  }\n};\n\nvar highlightResults = function highlightResults(result) {\n  var data = _extends({}, result);\n\n  if (data.highlight) {\n    Object.keys(data.highlight).forEach(function (highlightItem) {\n      var highlightValue = data.highlight[highlightItem][0];\n      data._source = _extends({}, data._source, _defineProperty({}, highlightItem, highlightValue));\n    });\n  }\n\n  return data;\n};\n\nvar parseHits = exports.parseHits = function parseHits(hits) {\n  var showHighlighted = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var results = null;\n\n  if (hits) {\n    results = [].concat(_toConsumableArray(hits)).map(function (item) {\n      var streamProps = {};\n\n      if (item._updated) {\n        streamProps._updated = item._updated;\n      } else if (item._deleted) {\n        streamProps._deleted = item._deleted;\n      }\n\n      var data = _extends({}, item);\n\n      if (showHighlighted) data = highlightResults(item);\n      var result = Object.keys(data).filter(function (key) {\n        return key !== '_source';\n      }).reduce(function (obj, key) {\n        obj[key] = data[key];\n        return obj;\n      }, _extends({\n        highlight: data.highlight || {}\n      }, data._source, streamProps));\n      return result;\n    });\n  }\n\n  return results;\n};\n\nfunction formatDate(date, props) {\n  if (props.parseDate) {\n    return props.parseDate(date, props);\n  }\n\n  switch (props.queryFormat) {\n    case 'epoch_millis':\n      return date.getTime();\n\n    case 'epoch_seconds':\n      return Math.floor(date.getTime() / 1000);\n\n    default:\n      {\n        if (_dateFormats2.default[props.queryFormat]) {\n          return date.toString(_dateFormats2.default[props.queryFormat]);\n        }\n\n        return date.getTime();\n      }\n  }\n}\n\nvar getOptionsFromQuery = function getOptionsFromQuery() {\n  var customQuery = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (customQuery) {\n    var query = customQuery.query,\n        rest = _objectWithoutProperties(customQuery, ['query']);\n\n    return Object.keys(rest).length ? rest : null;\n  }\n\n  return null;\n};\n\nexports.getOptionsFromQuery = getOptionsFromQuery;\n\nfunction computeResultStats(hits, searchState, promotedResults) {\n  Object.keys(hits).forEach(function (componentId) {\n    var _ref = hits[componentId] || {},\n        hidden = _ref.hidden,\n        total = _ref.total,\n        time = _ref.time;\n\n    searchState[componentId] = _extends({}, searchState[componentId], {\n      resultStats: _extends({}, searchState[componentId].resultStats, {\n        numberOfResults: total,\n        time: time,\n        promoted: promotedResults[componentId] && promotedResults[componentId].length,\n        hidden: hidden || 0\n      })\n    });\n  });\n}\n\nvar getSearchState = exports.getSearchState = function getSearchState() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var forHeaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var selectedValues = state.selectedValues,\n      queryLog = state.queryLog,\n      dependencyTree = state.dependencyTree,\n      props = state.props,\n      hits = state.hits,\n      aggregations = state.aggregations,\n      isLoading = state.isLoading,\n      error = state.error,\n      promotedResults = state.promotedResults,\n      settings = state.settings,\n      customData = state.customData,\n      rawData = state.rawData;\n  var searchState = {};\n\n  var populateState = function populateState() {\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var key = arguments[1];\n    return Object.keys(obj).forEach(function (componentId) {\n      searchState[componentId] = _extends({}, searchState[componentId], key ? _defineProperty({}, key, obj[componentId]) : obj[componentId]);\n    });\n  };\n\n  populateState(props);\n  Object.keys(selectedValues).forEach(function (componentId) {\n    var componentState = searchState[componentId];\n    var selectedValue = selectedValues[componentId];\n\n    if (selectedValue) {\n      searchState[componentId] = _extends({}, componentState, _extends({\n        title: selectedValue.label,\n        componentType: selectedValue.componentType,\n        value: selectedValue.value\n      }, selectedValue.category && {\n        category: selectedValue.category\n      }, {\n        URLParams: selectedValue.URLParams\n      }));\n    }\n  });\n\n  if (!forHeaders) {\n    populateState(queryLog);\n    populateState(hits, 'hits');\n    populateState(aggregations, 'aggregations');\n    populateState(isLoading, 'isLoading');\n    populateState(error, 'error');\n    populateState(promotedResults, 'promotedData');\n    populateState(settings, 'settings');\n    populateState(customData, 'customData');\n    populateState(rawData, 'rawData');\n    computeResultStats(hits, searchState, promotedResults);\n  }\n\n  populateState(dependencyTree, 'react');\n  return searchState;\n};\n\nvar updateInternalQuery = exports.updateInternalQuery = function updateInternalQuery(componentId, queryOptions, value, props, defaultQueryToExecute, queryParams) {\n  var defaultQuery = props.defaultQuery;\n  var defaultQueryOptions = void 0;\n  var query = void 0;\n\n  if (defaultQuery) {\n    var queryTobeSet = defaultQuery(value, props);\n\n    var _ref3 = queryTobeSet || {};\n\n    query = _ref3.query;\n    defaultQueryOptions = getOptionsFromQuery(queryTobeSet);\n    updateDefaultQuery(componentId, props, value);\n  }\n\n  props.setQueryOptions(componentId, _extends({}, defaultQueryOptions, queryOptions || defaultQueryToExecute));\n\n  if (query) {\n    props.updateQuery(_extends({\n      componentId: componentId,\n      query: query,\n      value: value\n    }, queryParams));\n  }\n};\n\nvar extractQueryFromDefaultQuery = function extractQueryFromDefaultQuery(props, value) {\n  var queryToBeReturned = {};\n  var defaultQuery = props.defaultQuery;\n\n  if (defaultQuery) {\n    var evaluateQuery = defaultQuery(value, props);\n\n    if (evaluateQuery) {\n      var query = evaluateQuery.query,\n          options = _objectWithoutProperties(evaluateQuery, ['query']);\n\n      if (options) {\n        queryToBeReturned = options;\n      }\n    }\n  }\n\n  return queryToBeReturned;\n};\n\nexports.extractQueryFromDefaultQuery = extractQueryFromDefaultQuery;\n\nvar getAggsQuery = exports.getAggsQuery = function getAggsQuery(value, query, props) {\n  var clonedQuery = query;\n  var dataField = props.dataField,\n      size = props.size,\n      sortBy = props.sortBy,\n      showMissing = props.showMissing,\n      missingLabel = props.missingLabel;\n  clonedQuery.size = 0;\n  clonedQuery.aggs = _defineProperty({}, dataField, {\n    terms: _extends({\n      field: dataField,\n      size: size,\n      order: getAggsOrder(sortBy || 'count')\n    }, showMissing ? {\n      missing: missingLabel\n    } : {})\n  });\n\n  if (props.nestedField) {\n    clonedQuery.aggs = {\n      reactivesearch_nested: {\n        nested: {\n          path: props.nestedField\n        },\n        aggs: clonedQuery.aggs\n      }\n    };\n  }\n\n  return _extends({}, clonedQuery, extractQueryFromDefaultQuery(props, value));\n};\n\nvar getCompositeAggsQuery = exports.getCompositeAggsQuery = function getCompositeAggsQuery(value, query, props, after) {\n  var showTopHits = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var clonedQuery = query;\n  var dataField = props.dataField,\n      size = props.size,\n      sortBy = props.sortBy,\n      showMissing = props.showMissing,\n      aggregationField = props.aggregationField;\n  var finalField = aggregationField || dataField;\n  var order = sortBy === 'count' ? {} : {\n    order: sortBy\n  };\n  clonedQuery.aggs = _defineProperty({}, finalField, _extends({\n    composite: _extends({\n      sources: [_defineProperty({}, finalField, {\n        terms: _extends({\n          field: finalField\n        }, order, showMissing ? {\n          missing_bucket: true\n        } : {})\n      })],\n      size: size\n    }, after)\n  }, showTopHits ? {\n    aggs: _defineProperty({}, finalField, {\n      top_hits: {\n        size: 1\n      }\n    })\n  } : {}));\n  clonedQuery.size = 0;\n\n  if (props.nestedField) {\n    clonedQuery.aggs = {\n      reactivesearch_nested: {\n        nested: {\n          path: props.nestedField\n        },\n        aggs: clonedQuery.aggs\n      }\n    };\n  }\n\n  return _extends({}, clonedQuery, extractQueryFromDefaultQuery(props, value));\n};\n\nvar withClickIds = exports.withClickIds = function withClickIds() {\n  var results = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return results.map(function (result, index) {\n    return _extends({}, result, {\n      _click_id: index\n    });\n  });\n};\n\nfunction getResultStats(props) {\n  var total = props.total,\n      size = props.size,\n      time = props.time,\n      hidden = props.hidden,\n      promotedResults = props.promotedResults;\n  return _extends({\n    numberOfResults: total\n  }, size > 0 ? {\n    numberOfPages: Math.ceil(total / size)\n  } : null, {\n    time: time,\n    hidden: hidden,\n    promoted: promotedResults && promotedResults.length\n  });\n}\n\nfunction handleOnSuggestions(results, currentValue, props) {\n  var parseSuggestion = props.parseSuggestion,\n      promotedResults = props.promotedResults;\n  var fields = void 0;\n\n  if (props.dataField) {\n    fields = Array.isArray(props.dataField) ? props.dataField : [props.dataField];\n  } else if (results && Array.isArray(results) && results.length > 0 && results[0] && results[0]._source) {\n    fields = Object.keys(results[0]._source);\n  }\n\n  var newResults = parseHits(results, false);\n  var parsedPromotedResults = parseHits(promotedResults, false);\n\n  if (parsedPromotedResults && parsedPromotedResults.length) {\n    var ids = parsedPromotedResults.map(function (item) {\n      return item._id;\n    }).filter(Boolean);\n\n    if (ids) {\n      newResults = newResults.filter(function (item) {\n        return !ids.includes(item._id);\n      });\n    }\n\n    newResults = [].concat(_toConsumableArray(parsedPromotedResults), _toConsumableArray(newResults));\n  }\n\n  var parsedSuggestions = (0, _suggestions2.default)({\n    fields: fields,\n    suggestions: newResults,\n    currentValue: currentValue.toLowerCase(),\n    showDistinctSuggestions: props.showDistinctSuggestions\n  });\n\n  if (parseSuggestion) {\n    return parsedSuggestions.map(function (suggestion) {\n      return parseSuggestion(suggestion);\n    });\n  }\n\n  return parsedSuggestions;\n}\n\nvar getTopSuggestions = exports.getTopSuggestions = function getTopSuggestions(querySuggestions) {\n  var currentValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var showDistinctSuggestions = arguments[2];\n  var parsedSuggestions = parseHits(querySuggestions, false);\n  var finalSuggestions = (0, _suggestions2.default)({\n    fields: ['key', 'key.autosuggest', 'key.search'],\n    suggestions: parsedSuggestions || [],\n    currentValue: currentValue.toLowerCase(),\n    showDistinctSuggestions: showDistinctSuggestions\n  });\n  return withClickIds(finalSuggestions);\n};","map":{"version":3,"sources":["/Users/rogetgeoffroy/Desktop/Folders/react_js_folder/react-live-search-app/live-search/node_modules/@appbaseio/reactivecore/lib/utils/helper.js"],"names":["Object","defineProperty","exports","value","getTopSuggestions","withClickIds","getCompositeAggsQuery","getAggsQuery","extractQueryFromDefaultQuery","updateInternalQuery","getSearchState","getOptionsFromQuery","parseHits","handleA11yAction","getInnerKey","getClassName","checkSomePropChange","checkPropChange","updateDefaultQuery","updateCustomQuery","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","isEqual","debounce","getQueryOptions","buildQuery","pushToAndClause","checkValueChange","getAggsOrder","formatDate","getResultStats","handleOnSuggestions","_dateFormats","require","_dateFormats2","_interopRequireDefault","_suggestions","_suggestions2","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","enumerable","configurable","writable","componentId","props","customQuery","setCustomQuery","defaultQuery","setDefaultQuery","x","y","constructor","p","_p","callback","wait","context","timeout","callbackArgs","later","apply","debouncedFunction","clearTimeout","setTimeout","options","size","includeFields","excludeFields","includes","excludes","_source","getOperation","conjunction","createBoolQuery","operation","query","resultQuery","bool","minimum_should_match","getQuery","react","queryList","forEach","queryArr","map","comp","filter","item","boolQuery","concat","_operation","_boolQuery","_boolQuery2","must","getExternalQueryOptions","component","queryOptions","dependencyTree","queryObj","reactProp","and","beforeValueChange","performUpdate","selectedValue","handleError","e","console","warn","promise","Promise","then","catch","sortBy","_count","_term","prevProp","nextProp","prevProps","nextProps","propsList","some","prop","classMap","preventDefault","highlightResults","result","data","highlight","highlightItem","highlightValue","hits","showHighlighted","results","streamProps","_updated","_deleted","reduce","date","parseDate","queryFormat","getTime","Math","floor","toString","rest","computeResultStats","searchState","promotedResults","_ref","hidden","total","time","resultStats","numberOfResults","promoted","state","forHeaders","selectedValues","queryLog","aggregations","isLoading","error","settings","customData","rawData","populateState","componentState","title","label","componentType","category","URLParams","defaultQueryToExecute","queryParams","defaultQueryOptions","queryTobeSet","_ref3","setQueryOptions","updateQuery","queryToBeReturned","evaluateQuery","clonedQuery","dataField","showMissing","missingLabel","aggs","terms","field","order","missing","nestedField","reactivesearch_nested","nested","path","after","showTopHits","aggregationField","finalField","composite","sources","missing_bucket","top_hits","index","_click_id","numberOfPages","ceil","currentValue","parseSuggestion","fields","newResults","parsedPromotedResults","ids","_id","Boolean","parsedSuggestions","suggestions","toLowerCase","showDistinctSuggestions","suggestion","querySuggestions","finalSuggestions"],"mappings":"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","sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});exports.getTopSuggestions=exports.withClickIds=exports.getCompositeAggsQuery=exports.getAggsQuery=exports.extractQueryFromDefaultQuery=exports.updateInternalQuery=exports.getSearchState=exports.getOptionsFromQuery=exports.parseHits=exports.handleA11yAction=exports.getInnerKey=exports.getClassName=exports.checkSomePropChange=exports.checkPropChange=exports.updateDefaultQuery=exports.updateCustomQuery=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};exports.isEqual=isEqual;exports.debounce=debounce;exports.getQueryOptions=getQueryOptions;exports.buildQuery=buildQuery;exports.pushToAndClause=pushToAndClause;exports.checkValueChange=checkValueChange;exports.getAggsOrder=getAggsOrder;exports.formatDate=formatDate;exports.getResultStats=getResultStats;exports.handleOnSuggestions=handleOnSuggestions;var _dateFormats=require('./dateFormats');var _dateFormats2=_interopRequireDefault(_dateFormats);var _suggestions=require('./suggestions');var _suggestions2=_interopRequireDefault(_suggestions);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var updateCustomQuery=exports.updateCustomQuery=function updateCustomQuery(componentId,props,value){if(props.customQuery&&typeof props.customQuery==='function'){props.setCustomQuery(componentId,props.customQuery(value,props));}};var updateDefaultQuery=exports.updateDefaultQuery=function updateDefaultQuery(componentId,props,value){if(props.defaultQuery&&typeof props.defaultQuery==='function'){props.setDefaultQuery(componentId,props.defaultQuery(value,props));}};function isEqual(x,y){if(x===y)return true;if(!(x instanceof Object)||!(y instanceof Object))return false;if(x.constructor!==y.constructor)return false;for(var p in x){if(!x.hasOwnProperty(p))continue;if(!y.hasOwnProperty(p))return false;if(x[p]===y[p])continue;if(typeof x[p]!=='object')return false;if(!isEqual(x[p],y[p]))return false;}for(var _p in y){if(y.hasOwnProperty(_p)&&!x.hasOwnProperty(_p))return false;}return true;}function debounce(callback,wait){var context=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this;var timeout=null;var callbackArgs=null;var later=function later(){return callback.apply(context,callbackArgs);};return function debouncedFunction(){callbackArgs=arguments;clearTimeout(timeout);timeout=setTimeout(later,wait);};}function getQueryOptions(props){var options={};if(props.size!==undefined){options.size=props.size;}if(props.includeFields||props.excludeFields){var source={};if(props.includeFields){source.includes=props.includeFields;}if(props.excludeFields){source.excludes=props.excludeFields;}options._source=source;}return options;}function getOperation(conjunction){if(conjunction==='and'){return'must';}if(conjunction==='or'){return'should';}return'must_not';}function createBoolQuery(operation,query){var resultQuery=null;if(Array.isArray(query)&&query.length||!Array.isArray(query)&&query){resultQuery={bool:_defineProperty({},operation,query)};}if(operation==='should'&&resultQuery){resultQuery={bool:_extends({},resultQuery.bool,{minimum_should_match:1})};}return resultQuery;}function getQuery(react,queryList){var query=[];Object.keys(react).forEach(function(conjunction){if(Array.isArray(react[conjunction])){var operation=getOperation(conjunction);var queryArr=react[conjunction].map(function(comp){if(typeof comp!=='string'){return getQuery(comp,queryList);}else if(comp in queryList){return queryList[comp];}return null;}).filter(function(item){return!!item;});var boolQuery=createBoolQuery(operation,queryArr);if(boolQuery){query=[].concat(_toConsumableArray(query),[boolQuery]);}}else if(typeof react[conjunction]==='string'){var _operation=getOperation(conjunction);var _boolQuery=createBoolQuery(_operation,queryList[react[conjunction]]);if(_boolQuery){query=[].concat(_toConsumableArray(query),[_boolQuery]);}}else if(typeof react[conjunction]==='object'&&react[conjunction]!==null){var _boolQuery2=getQuery(react[conjunction],queryList);if(_boolQuery2){query=[].concat(_toConsumableArray(query),[_boolQuery2]);}}});if(Array.isArray(query)&&query.length){return{bool:{must:query}};}if(query&&Object.keys(query).length){return query;}return null;}function getExternalQueryOptions(react,options,component){var queryOptions={};Object.keys(react).forEach(function(conjunction){if(Array.isArray(react[conjunction])){react[conjunction].forEach(function(comp){if(options[comp]){queryOptions=_extends({},queryOptions,options[comp]);}});}else if(typeof react[conjunction]==='string'){if(options[react[conjunction]]){queryOptions=_extends({},queryOptions,options[react[conjunction]]);}}else if(typeof react[conjunction]==='object'&&react[conjunction]!==null&&!Array.isArray(react[conjunction])){queryOptions=_extends({},queryOptions,getExternalQueryOptions(react[conjunction],options));}});if(options[component]){queryOptions=_extends({},queryOptions,options[component]);}return queryOptions;}function buildQuery(component,dependencyTree,queryList,queryOptions){var queryObj=null;var options=null;if(component in dependencyTree){queryObj=getQuery(dependencyTree[component],queryList);options=getExternalQueryOptions(dependencyTree[component],queryOptions,component);}return{queryObj:queryObj,options:options};}function pushToAndClause(reactProp,component){var react=_extends({},reactProp);if(react.and){if(Array.isArray(react.and)){react.and=[].concat(_toConsumableArray(react.and),[component]);return react;}else if(typeof react.and==='string'){react.and=[react.and,component];return react;}react.and=pushToAndClause(react.and,component);return react;}return _extends({},react,{and:component});}function checkValueChange(componentId,value,beforeValueChange,performUpdate){var selectedValue=value;if(Array.isArray(value)&&!value.length){selectedValue=null;}var handleError=function handleError(e){console.warn(componentId+' - beforeValueChange rejected the promise with ',e);};if(beforeValueChange){try{var promise=beforeValueChange(selectedValue);if(promise instanceof Promise){promise.then(performUpdate).catch(handleError);}else{performUpdate();}}catch(e){handleError(e);}}else{performUpdate();}}function getAggsOrder(sortBy){if(sortBy==='count'){return{_count:'desc'};}return{_term:sortBy};}var checkPropChange=exports.checkPropChange=function checkPropChange(prevProp,nextProp,callback){if(!isEqual(prevProp,nextProp)){callback();return true;}return false;};var checkSomePropChange=exports.checkSomePropChange=function checkSomePropChange(){var prevProps=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var nextProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var propsList=arguments[2];var callback=arguments[3];propsList.some(function(prop){return checkPropChange(prevProps[prop],nextProps[prop],callback);});};var getClassName=exports.getClassName=function getClassName(classMap,component){return classMap&&classMap[component]||'';};var getInnerKey=exports.getInnerKey=function getInnerKey(obj,key){return obj&&obj[key]||{};};var handleA11yAction=exports.handleA11yAction=function handleA11yAction(e,callback){if(e.key==='Enter'||e.key===' '){e.preventDefault();callback();}};var highlightResults=function highlightResults(result){var data=_extends({},result);if(data.highlight){Object.keys(data.highlight).forEach(function(highlightItem){var highlightValue=data.highlight[highlightItem][0];data._source=_extends({},data._source,_defineProperty({},highlightItem,highlightValue));});}return data;};var parseHits=exports.parseHits=function parseHits(hits){var showHighlighted=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var results=null;if(hits){results=[].concat(_toConsumableArray(hits)).map(function(item){var streamProps={};if(item._updated){streamProps._updated=item._updated;}else if(item._deleted){streamProps._deleted=item._deleted;}var data=_extends({},item);if(showHighlighted)data=highlightResults(item);var result=Object.keys(data).filter(function(key){return key!=='_source';}).reduce(function(obj,key){obj[key]=data[key];return obj;},_extends({highlight:data.highlight||{}},data._source,streamProps));return result;});}return results;};function formatDate(date,props){if(props.parseDate){return props.parseDate(date,props);}switch(props.queryFormat){case'epoch_millis':return date.getTime();case'epoch_seconds':return Math.floor(date.getTime()/1000);default:{if(_dateFormats2.default[props.queryFormat]){return date.toString(_dateFormats2.default[props.queryFormat]);}return date.getTime();}}}var getOptionsFromQuery=function getOptionsFromQuery(){var customQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(customQuery){var query=customQuery.query,rest=_objectWithoutProperties(customQuery,['query']);return Object.keys(rest).length?rest:null;}return null;};exports.getOptionsFromQuery=getOptionsFromQuery;function computeResultStats(hits,searchState,promotedResults){Object.keys(hits).forEach(function(componentId){var _ref=hits[componentId]||{},hidden=_ref.hidden,total=_ref.total,time=_ref.time;searchState[componentId]=_extends({},searchState[componentId],{resultStats:_extends({},searchState[componentId].resultStats,{numberOfResults:total,time:time,promoted:promotedResults[componentId]&&promotedResults[componentId].length,hidden:hidden||0})});});}var getSearchState=exports.getSearchState=function getSearchState(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var forHeaders=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var selectedValues=state.selectedValues,queryLog=state.queryLog,dependencyTree=state.dependencyTree,props=state.props,hits=state.hits,aggregations=state.aggregations,isLoading=state.isLoading,error=state.error,promotedResults=state.promotedResults,settings=state.settings,customData=state.customData,rawData=state.rawData;var searchState={};var populateState=function populateState(){var obj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var key=arguments[1];return Object.keys(obj).forEach(function(componentId){searchState[componentId]=_extends({},searchState[componentId],key?_defineProperty({},key,obj[componentId]):obj[componentId]);});};populateState(props);Object.keys(selectedValues).forEach(function(componentId){var componentState=searchState[componentId];var selectedValue=selectedValues[componentId];if(selectedValue){searchState[componentId]=_extends({},componentState,_extends({title:selectedValue.label,componentType:selectedValue.componentType,value:selectedValue.value},selectedValue.category&&{category:selectedValue.category},{URLParams:selectedValue.URLParams}));}});if(!forHeaders){populateState(queryLog);populateState(hits,'hits');populateState(aggregations,'aggregations');populateState(isLoading,'isLoading');populateState(error,'error');populateState(promotedResults,'promotedData');populateState(settings,'settings');populateState(customData,'customData');populateState(rawData,'rawData');computeResultStats(hits,searchState,promotedResults);}populateState(dependencyTree,'react');return searchState;};var updateInternalQuery=exports.updateInternalQuery=function updateInternalQuery(componentId,queryOptions,value,props,defaultQueryToExecute,queryParams){var defaultQuery=props.defaultQuery;var defaultQueryOptions=void 0;var query=void 0;if(defaultQuery){var queryTobeSet=defaultQuery(value,props);var _ref3=queryTobeSet||{};query=_ref3.query;defaultQueryOptions=getOptionsFromQuery(queryTobeSet);updateDefaultQuery(componentId,props,value);}props.setQueryOptions(componentId,_extends({},defaultQueryOptions,queryOptions||defaultQueryToExecute));if(query){props.updateQuery(_extends({componentId:componentId,query:query,value:value},queryParams));}};var extractQueryFromDefaultQuery=function extractQueryFromDefaultQuery(props,value){var queryToBeReturned={};var defaultQuery=props.defaultQuery;if(defaultQuery){var evaluateQuery=defaultQuery(value,props);if(evaluateQuery){var query=evaluateQuery.query,options=_objectWithoutProperties(evaluateQuery,['query']);if(options){queryToBeReturned=options;}}}return queryToBeReturned;};exports.extractQueryFromDefaultQuery=extractQueryFromDefaultQuery;var getAggsQuery=exports.getAggsQuery=function getAggsQuery(value,query,props){var clonedQuery=query;var dataField=props.dataField,size=props.size,sortBy=props.sortBy,showMissing=props.showMissing,missingLabel=props.missingLabel;clonedQuery.size=0;clonedQuery.aggs=_defineProperty({},dataField,{terms:_extends({field:dataField,size:size,order:getAggsOrder(sortBy||'count')},showMissing?{missing:missingLabel}:{})});if(props.nestedField){clonedQuery.aggs={reactivesearch_nested:{nested:{path:props.nestedField},aggs:clonedQuery.aggs}};}return _extends({},clonedQuery,extractQueryFromDefaultQuery(props,value));};var getCompositeAggsQuery=exports.getCompositeAggsQuery=function getCompositeAggsQuery(value,query,props,after){var showTopHits=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var clonedQuery=query;var dataField=props.dataField,size=props.size,sortBy=props.sortBy,showMissing=props.showMissing,aggregationField=props.aggregationField;var finalField=aggregationField||dataField;var order=sortBy==='count'?{}:{order:sortBy};clonedQuery.aggs=_defineProperty({},finalField,_extends({composite:_extends({sources:[_defineProperty({},finalField,{terms:_extends({field:finalField},order,showMissing?{missing_bucket:true}:{})})],size:size},after)},showTopHits?{aggs:_defineProperty({},finalField,{top_hits:{size:1}})}:{}));clonedQuery.size=0;if(props.nestedField){clonedQuery.aggs={reactivesearch_nested:{nested:{path:props.nestedField},aggs:clonedQuery.aggs}};}return _extends({},clonedQuery,extractQueryFromDefaultQuery(props,value));};var withClickIds=exports.withClickIds=function withClickIds(){var results=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return results.map(function(result,index){return _extends({},result,{_click_id:index});});};function getResultStats(props){var total=props.total,size=props.size,time=props.time,hidden=props.hidden,promotedResults=props.promotedResults;return _extends({numberOfResults:total},size>0?{numberOfPages:Math.ceil(total/size)}:null,{time:time,hidden:hidden,promoted:promotedResults&&promotedResults.length});}function handleOnSuggestions(results,currentValue,props){var parseSuggestion=props.parseSuggestion,promotedResults=props.promotedResults;var fields=void 0;if(props.dataField){fields=Array.isArray(props.dataField)?props.dataField:[props.dataField];}else if(results&&Array.isArray(results)&&results.length>0&&results[0]&&results[0]._source){fields=Object.keys(results[0]._source);}var newResults=parseHits(results,false);var parsedPromotedResults=parseHits(promotedResults,false);if(parsedPromotedResults&&parsedPromotedResults.length){var ids=parsedPromotedResults.map(function(item){return item._id;}).filter(Boolean);if(ids){newResults=newResults.filter(function(item){return!ids.includes(item._id);});}newResults=[].concat(_toConsumableArray(parsedPromotedResults),_toConsumableArray(newResults));}var parsedSuggestions=(0,_suggestions2.default)({fields:fields,suggestions:newResults,currentValue:currentValue.toLowerCase(),showDistinctSuggestions:props.showDistinctSuggestions});if(parseSuggestion){return parsedSuggestions.map(function(suggestion){return parseSuggestion(suggestion);});}return parsedSuggestions;}var getTopSuggestions=exports.getTopSuggestions=function getTopSuggestions(querySuggestions){var currentValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var showDistinctSuggestions=arguments[2];var parsedSuggestions=parseHits(querySuggestions,false);var finalSuggestions=(0,_suggestions2.default)({fields:['key','key.autosuggest','key.search'],suggestions:parsedSuggestions||[],currentValue:currentValue.toLowerCase(),showDistinctSuggestions:showDistinctSuggestions});return withClickIds(finalSuggestions);};"]},"metadata":{},"sourceType":"script"}