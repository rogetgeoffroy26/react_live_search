{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = watchManReducer;\n\nvar _constants = require('../constants');\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction getWatchList(depTree) {\n  var list = Object.values(depTree);\n  var components = [];\n  list.forEach(function (item) {\n    if (typeof item === 'string') {\n      components.push(item);\n    } else if (Array.isArray(item)) {\n      item.forEach(function (component) {\n        if (typeof component === 'string') {\n          components.push(component);\n        } else {\n          components.push.apply(components, _toConsumableArray(getWatchList(component)));\n        }\n      });\n    } else if (typeof item === 'object' && item !== null) {\n      components.push.apply(components, _toConsumableArray(getWatchList(item)));\n    }\n  });\n  return components.filter(function (value, index, array) {\n    return array.indexOf(value) === index;\n  });\n}\n\nfunction watchManReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments[1];\n\n  if (action.type === _constants.WATCH_COMPONENT) {\n    var watchList = getWatchList(action.react);\n\n    var newState = _extends({}, state);\n\n    Object.keys(newState).forEach(function (key) {\n      newState[key] = newState[key].filter(function (value) {\n        return value !== action.component;\n      });\n    });\n    watchList.forEach(function (item) {\n      if (Array.isArray(newState[item])) {\n        newState[item] = [].concat(_toConsumableArray(newState[item]), [action.component]);\n      } else {\n        newState[item] = [action.component];\n      }\n    });\n    return newState;\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/Users/rogetgeoffroy/Desktop/Folders/react_js_folder/react-live-search-app/live-search/node_modules/@appbaseio/reactivecore/lib/reducers/watchManReducer.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","default","watchManReducer","_constants","require","_toConsumableArray","arr","Array","isArray","arr2","from","getWatchList","depTree","list","values","components","forEach","item","push","component","apply","filter","index","array","indexOf","state","undefined","action","type","WATCH_COMPONENT","watchList","react","newState","keys","concat"],"mappings":"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","sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};exports.default=watchManReducer;var _constants=require('../constants');function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function getWatchList(depTree){var list=Object.values(depTree);var components=[];list.forEach(function(item){if(typeof item==='string'){components.push(item);}else if(Array.isArray(item)){item.forEach(function(component){if(typeof component==='string'){components.push(component);}else{components.push.apply(components,_toConsumableArray(getWatchList(component)));}});}else if(typeof item==='object'&&item!==null){components.push.apply(components,_toConsumableArray(getWatchList(item)));}});return components.filter(function(value,index,array){return array.indexOf(value)===index;});}function watchManReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var action=arguments[1];if(action.type===_constants.WATCH_COMPONENT){var watchList=getWatchList(action.react);var newState=_extends({},state);Object.keys(newState).forEach(function(key){newState[key]=newState[key].filter(function(value){return value!==action.component;});});watchList.forEach(function(item){if(Array.isArray(newState[item])){newState[item]=[].concat(_toConsumableArray(newState[item]),[action.component]);}else{newState[item]=[action.component];}});return newState;}return state;}"]},"metadata":{},"sourceType":"script"}